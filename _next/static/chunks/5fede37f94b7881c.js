(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,90773,e=>{e.v("/_next/static/media/index.63436236.js")},12792,e=>e.a(async(t,a)=>{try{let p;var s=e.i(11639),o=t([s]);[s]=o.then?(await o)():o;let c=new Map;async function i(e){try{let t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?128:40960,a=await s.LangModel.newLocal(e.modelName,{validateChecksum:!1,kvCache:{contextWindowSize:t},progressCallback:e=>{self.postMessage({type:"langmodel-init-progress",progress:e})}});p=new s.Agent(a),self.postMessage({type:"agent-ready"})}catch(e){self.postMessage({type:"error",error:e?.message||String(e)})}}async function r(e,t){try{let a=await s.LangModel.newStreamAPI(e.spec,e.modelName,t);p=new s.Agent(a),self.postMessage({type:"agent-ready"})}catch(e){self.postMessage({type:"error",error:e?.message||String(e)})}}async function l(e,t){if(void 0!==p){for await(let a of p.runDelta(e,t))self.postMessage({type:"agent-stream-delta",output:a});self.postMessage({type:"agent-stream-finished"})}}async function n(e){if(!c.has(e))try{let t=await s.MCPClient.streamableHttp(e);c.set(e,t);let a=t.tools.map(e=>e.description);self.postMessage({type:"mcp-server-registered",url:e,tools:a})}catch(e){self.postMessage({type:"error",error:e?.message||String(e)})}}self.onmessage=async e=>{let t=e.data;if("initialize-local-agent"===t.type)await i(t.config);else if("initialize-api-agent"===t.type)await r(t.config,t.apiKey);else if("run-agent"===t.type)await l(t.messages,t.config);else if("add-builtin-tool"===t.type)!function(e,t){if(void 0===p)return;let a=s.Tool.newBuiltin(e,t);p.addTool(a)}(t.name,t.config);else if("add-mcp-server"===t.type)await n(t.url);else if("remove-mcp-server"===t.type){var a,o=t.url;let e=c.get(o);if(void 0!==e&&void 0!==p){for(let t of e.tools)p.removeTool(t.description.name);c.delete(o)}}else if("add-mcp-tool"===t.type)!function(e,t){if(void 0===p)return;let a=c.get(e);if(void 0===a)return;let s=a.tools.find(e=>e.description.name===t);void 0!==s&&p.addTool(s)}(t.url,t.name);else if("remove-tool"===t.type){a=t.name,void 0!==p&&p.removeTool(a)}else"clear-tools"===t.type&&void 0!==p&&p.clearTools()},self.postMessage({type:"worker-ready"}),e.s([]),a()}catch(e){a(e)}},!1)]);