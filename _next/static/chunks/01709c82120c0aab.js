(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,12298,e=>{"use strict";var t=class{_providers=new Set;getModelContext(){return Array.from(this._providers).map(e=>e.getModelContext()).sort((e,t)=>(t.priority??0)-(e.priority??0)).reduce((e,t)=>{if(t.system&&(e.system?e.system+=`

${t.system}`:e.system=t.system),t.tools)for(let[r,s]of Object.entries(t.tools)){let t=e.tools?.[r];if(t&&t!==s)throw Error(`You tried to define a tool with the name ${r}, but it already exists.`);e.tools||(e.tools={}),e.tools[r]=s}return t.config&&(e.config={...e.config,...t.config}),t.callSettings&&(e.callSettings={...e.callSettings,...t.callSettings}),e},{})}registerModelContextProvider(e){this._providers.add(e);let t=e.subscribe?.(()=>{this.notifySubscribers()});return this.notifySubscribers(),()=>{this._providers.delete(e),t?.(),this.notifySubscribers()}}_subscribers=new Set;notifySubscribers(){for(let e of this._subscribers)e()}subscribe(e){return this._subscribers.add(e),()=>this._subscribers.delete(e)}};e.s(["CompositeContextProvider",()=>t],12298)},32704,26177,67586,13414,32264,27758,46602,85114,43254,22833,81089,83220,19189,54096,5347,23129,28703,17435,21918,e=>{"use strict";e.s(["AssistantProvider",()=>eg,"createAssistantApiField",()=>eo,"extendApi",()=>ep,"useAssistantApi",()=>ed,"useAssistantApiImpl",()=>eu,"useExtendedAssistantApi",()=>eh],32704);var t,r=e.i(41295);function s(e){let t=e[i];if(!t)throw Error("ResourceElement.type is not a valid Resource");return t}var i=Symbol("fnSymbol"),n=null;function a(){if(!n)throw Error("No resource fiber available");return n}function o(e,t){return{resourceFn:e,scheduleRerender:t,cells:[],currentIndex:0,renderContext:void 0,isFirstRender:!0,isMounted:!1,isNeverMounted:!0}}function l(e){e.isMounted=!1;let t=null;for(let r=e.cells.length-1;r>=0;r--){let s=e.cells[r];if(s?.type==="effect"&&s.mounted&&s.cleanup)try{s.cleanup()}catch(e){null==t&&(t=e)}finally{s.mounted=!1}}if(null!=t)throw t}function c(e,t){let r={commitTasks:[],props:t,state:void 0};e.currentIndex=0;let s=n;n=e;try{if((()=>{e.renderContext=r;try{r.state=e.resourceFn(t)}finally{e.renderContext=void 0}})(),e.isFirstRender=!1,e.cells.length!==e.currentIndex)throw Error(`Rendered ${e.currentIndex} hooks but expected ${e.cells.length}. Hooks must be called in the exact same order in every render.`)}finally{n=s}return r}function u(e,t){e.isMounted=!0,e.isNeverMounted=!1,t.commitTasks.forEach(t=>{let r=t.cellIndex,s=e.cells[r];if("effect"!==s.type)throw Error("Cannot find effect cell");let i=!0;if(void 0!==s.deps&&void 0!==t.deps&&(i=s.deps.length!==t.deps.length||s.deps.some((e,r)=>!Object.is(e,t.deps[r]))),i){if(s.mounted){if(typeof s.deps!=typeof t.deps)throw Error("tapEffect called with and without dependencies across re-renders");try{s.mounted&&s.cleanup&&s.cleanup()}finally{s.mounted=!1}}try{let e=t.effect();if(void 0!==e&&"function"!=typeof e)throw Error(`An effect function must either return a cleanup function or nothing. Received: ${typeof e}`);s.mounted=!0,s.cleanup="function"==typeof e?e:void 0,s.deps=t.deps}catch(e){throw e}}})}var h=!0===globalThis.__ASSISTANT_UI_DISABLE_LAYOUT_EFFECT__?r.useEffect:r.useLayoutEffect;function d(e){let[,t]=(0,r.useState)({}),i=(0,r.useMemo)(()=>o(s(e.type),()=>t({})),[e.type,t]),n=c(i,e.props);return h(()=>()=>l(i),[]),h(()=>{u(i,n)}),n.state}e.s(["useResource",()=>d],26177);var p=e=>"string"==typeof e?{scope:e.split(".")[0],event:e}:{scope:e.scope,event:e.event},g=(e,t,r)=>t===e;e.s(["checkEventScope",()=>g,"normalizeEventSelector",()=>p],67586);let f=e=>{let t,r=new Set,s=(e,s)=>{let i="function"==typeof e?e(t):e;if(!Object.is(i,t)){let e=t;t=(null!=s?s:"object"!=typeof i||null===i)?i:Object.assign({},t,i),r.forEach(r=>r(t,e))}},i=()=>t,n={setState:s,getState:i,getInitialState:()=>a,subscribe:e=>(r.add(e),()=>r.delete(e))},a=t=e(s,i,n);return n},b=e=>{let t=e?f(e):f,s=e=>(function(e,t=e=>e){let s=r.default.useSyncExternalStore(e.subscribe,r.default.useCallback(()=>t(e.getState()),[e,t]),r.default.useCallback(()=>t(e.getInitialState()),[e,t]));return r.default.useDebugValue(s),s})(t,e);return Object.assign(s,t),s},m=e=>e?b(e):b;function _(e,t){function r(r){let s=e(r);return s?s[t]:null}return{[t]:function(e){let t,s=!1;"function"==typeof e?t=e:e&&"object"==typeof e&&(s=!!e.optional,t=e.selector);let i=r({optional:s});return i?t?i(t):i():null},[`${t}Store`]:r}}e.s(["create",()=>m],13414),e.s(["createContextStoreHook",()=>_],32264);var y=(0,r.createContext)(null),{useThreadViewport:S,useThreadViewportStore:E}=_(function(e){let t=(0,r.useContext)(y);if(!e?.optional&&!t)throw Error("This component must be used within ThreadPrimitive.Viewport.");return t},"useThreadViewport");e.s(["ThreadViewportContext",()=>y,"useThreadViewport",()=>S,"useThreadViewportStore",()=>E],27758);var v=e=>e;e.s(["writableStore",()=>v],46602);var w=e.i(20299),I=({children:e})=>{let t=(()=>{let e=E({optional:!0}),[t]=(0,r.useState)(()=>{let e;return e=new Set,m(()=>({isAtBottom:!0,scrollToBottom:()=>{for(let t of e)t()},onScrollToBottom:t=>(e.add(t),()=>{e.delete(t)})}))});return(0,r.useEffect)(()=>e?.getState().onScrollToBottom(()=>{t.getState().scrollToBottom()}),[e,t]),(0,r.useEffect)(()=>{if(e)return t.subscribe(t=>{e.getState().isAtBottom!==t.isAtBottom&&v(e).setState({isAtBottom:t.isAtBottom})})},[t,e]),t})(),[s]=(0,r.useState)(()=>({useThreadViewport:t}));return(0,w.jsx)(y.Provider,{value:s,children:e})};e.s(["ThreadViewportProvider",()=>I],85114);var x=()=>{if(t)return t;let e=()=>({apis:new Map,nextId:0,listeners:new Set});if("undefined"==typeof window)return t=e();let r=window.__ASSISTANT_UI_DEVTOOLS_HOOK__;if(r)return t=r,r;let s=e();return window.__ASSISTANT_UI_DEVTOOLS_HOOK__=s,t=s,s},T=class e{static MAX_EVENT_LOGS_PER_API=200;static register(t){let r=x();for(let e of r.apis.values())if(e.api===t)return()=>{};let s=r.nextId++,i=t.on?.("*",t=>{let i=r.apis.get(s);i&&(i.logs.push({time:new Date,event:t.event,data:t.payload}),i.logs.length>e.MAX_EVENT_LOGS_PER_API&&(i.logs=i.logs.slice(-e.MAX_EVENT_LOGS_PER_API)),e.notifyListeners(s))}),n=t.subscribe?.(()=>{e.notifyListeners(s)});return r.apis.set(s,{api:t,logs:[]}),e.notifyListeners(s),()=>{let t=x();t.apis.get(s)&&(i?.(),n?.(),t.apis.delete(s),e.notifyListeners(s))}}static notifyListeners(e){x().listeners.forEach(t=>t(e))}};function A(e){let t=function(e){let t=a(),r=t.currentIndex++;if(!t.isFirstRender&&r>=t.cells.length)throw Error("Rendered more hooks than during the previous render. Hooks must be called in the exact same order in every render.");if(!t.cells[r]){let s={type:"state",value:"function"==typeof e?e():e,set:e=>{let r=s.value,i="function"==typeof e?e(r):e;if(!Object.is(r,i)){s.value=i;if(t.renderContext)throw Error("Resource updated during render");if(t.isNeverMounted)throw Error("Resource updated before mount");t.isMounted&&t.scheduleRerender()}}};t.cells[r]=s}let s=t.cells[r];if("state"!==s.type)throw Error("Hook order changed between renders");return s}(e);return[t.value,t.set]}function C(e){let[t]=A(()=>({current:e}));return t}e.s(["tapState",()=>A],43254);var M=(e,t)=>{let r=C();return r.current||(r.current={value:e(),deps:t}),((e,t)=>{if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!Object.is(e[r],t[r]))return!1;return!0})(r.current.deps,t)||(r.current.value=e(),r.current.deps=t),r.current.value};function R(e){let t=(e,r)=>({type:t,props:e,...r?.key!==void 0&&{key:r.key}});return t[i]=e,t}function k(e){return s(e.type)(e.props)}function B(e,t){let r=a(),s=function(){let e=a(),t=e.currentIndex++;if(!e.isFirstRender&&t>=e.cells.length)throw Error("Rendered more hooks than during the previous render. Hooks must be called in the exact same order in every render.");if(e.cells[t]||(e.cells[t]={type:"effect",mounted:!1}),"effect"!==e.cells[t].type)throw Error("Hook order changed between renders");return t}();r.renderContext.commitTasks.push({effect:e,deps:t,cellIndex:s})}function P(e,t){let[r,i]=A({}),n=M(()=>o(s(e.type),()=>i({})),[e.type]),a=t?M(()=>e.props,t):e.props,h=M(()=>c(n,a),[n,a,r]);return B(()=>()=>l(n),[n]),B(()=>{u(n,h)},[n,h]),h.state}e.s(["tapMemo",()=>M],22833),e.s(["resource",()=>R],81089),e.s(["tapInlineResource",()=>k],83220),e.s(["tapEffect",()=>B],19189);var O=class{constructor(e){this.getApi=e}get(e,t){return this.getApi()[t]}ownKeys(){return Object.keys(this.getApi())}has(e,t){return t in this.getApi()}getOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(this.getApi(),t)}set(){return!1}defineProperty(){return!1}deleteProperty(){return!1}},j=(e,t)=>{let r=C(e);B(()=>{r.current=e});let s=M(()=>new Proxy({},new O(()=>r.current)),[]),i=t?.key,n=e.getState();return M(()=>({key:i,state:n,api:s}),[n,i])};e.s(["tapApi",()=>j],54096);var N=Symbol("tap.Context"),L=e=>({[N]:e}),D=(e,t,r)=>{let s=e[N];e[N]=t;try{return r()}finally{e[N]=s}},F=e=>e[N],U=L(null),z=(e,t)=>D(U,e,t),$=()=>{let e=F(U);if(!e)throw Error("Model context is not available in this context");return e};e.s(["tapModelContext",()=>$,"withModelContextProvider",()=>z],5347);var J=R(({toolkit:e})=>{let[t,r]=A(()=>({tools:{}})),s=$();B(()=>{if(!e)return;let t=[];for(let[r,s]of Object.entries(e))s.render&&t.push(i(r,s.render));let r=Object.entries(e).reduce((e,[t,r])=>{let{render:s,...i}=r;return e[t]=i,e},{});return t.push(s.register({getModelContext:()=>({tools:r})})),()=>{t.forEach(e=>e())}},[e,s]);let i=(e,t)=>(r(r=>({...r,tools:{...r.tools,[e]:[...r.tools[e]??[],t]}})),()=>{r(r=>({...r,tools:{...r.tools,[e]:r.tools[e]?.filter(e=>e!==t)??[]}}))});return j({getState:()=>t,setToolUI:i})}),V=[],q=!1;function K(){q=!1;let e=V;for(let t of(V=[],e))try{t()}catch(e){console.error("Error in scheduled task:",e)}}var H=class e{constructor(e){this._task=e}_isDirty=!1;_hasScheduledTask=!1;_isFlushing=!1;static MAX_FLUSH_DEPTH=50;get isDirty(){return this._isDirty}markDirty(){if(this._isDirty=!0,!this._hasScheduledTask&&!this._isFlushing){var e;this._hasScheduledTask=!0,e=()=>{this._hasScheduledTask=!1,this.flushSync()},V.push(e),q||(q=!0,queueMicrotask(K))}}flushSync(){if(this._isFlushing)return;this._isFlushing=!0;let t=0;try{for(;this._isDirty;){if(++t>e.MAX_FLUSH_DEPTH)throw Error("Maximum update depth exceeded. This can happen when a resource repeatedly calls setState inside tapEffect.");this._isDirty=!1,this._task()}}finally{this._isFlushing=!1}}},Y=({element:e,onUpdateInput:t,onFlushSync:r,onDispose:s})=>{let[i,n]=A(e.props),a=k({type:e.type,props:i}),o=C(new Set).current,l=C(a);return B(()=>{a!==l.current&&(l.current=a,o.forEach(e=>e()))}),M(()=>({getState:()=>l.current,subscribe:e=>(o.add(e),()=>o.delete(e)),updateInput:e=>{t(),n(()=>e)},flushSync:r,dispose:s}),[])},G=R(e=>{let t=M(()=>((e,t=!1)=>{let r=!t,s={element:e,onUpdateInput:()=>{r||(r=!0,u(n,a))},onFlushSync:()=>{i.flushSync()},onDispose:()=>l(n)},i=new H(()=>{a=c(n,s),r&&u(n,a)}),n=o(Y,()=>i.markDirty()),a=c(n,s);return r&&u(n,a),a.state})(e,!0),[e.type]);return B(()=>{t.updateInput(e.props)}),t});e.s(["asStore",()=>G],23129);var W=R(()=>M(()=>{let e=new Map;return{on:(t,r)=>{e.has(t)||e.set(t,new Set);let s=e.get(t);return s.add(r),()=>{s.delete(r),0===s.size&&e.delete(t)}},emit:(t,r)=>{let s=e.get(t),i=e.get("*");(s||i)&&queueMicrotask(()=>{if(s)for(let e of s)e(r);if(i)for(let e of i)e({event:t,payload:r})})}}},[])),X=L(null),Q=(e,t)=>D(X,e,t),Z=()=>{let e=F(X);if(!e)throw Error("Events context is not available");return e};e.s(["tapEvents",()=>Z,"withEventsProvider",()=>Q],28703);var ee=e.i(12298),et=R(()=>{let[e]=A(()=>({})),t=new ee.CompositeContextProvider;return j({getState:()=>e,getModelContext:()=>t.getModelContext(),subscribe:e=>t.subscribe(e),register:e=>t.registerModelContextProvider(e)})}),er=R(({threads:e,modelContext:t,tools:r})=>{let s=k(W()),{threads:i,tools:n,modelContext:a}=Q(s,()=>{let s=P(t??et(),[t]);return z(s.api,()=>({modelContext:s,tools:P(r??J({}),[r]),threads:P(e,[e])}))}),o=M(()=>({threads:i.state,tools:n.state,modelContext:a.state}),[i.state,n.state,a.state]);return j({getState:()=>o,threads:i.api,tools:n.api,modelContext:a.api,on:s.on})});function es(e){let t=new Set;e.forEach((e,r)=>{if(void 0===e.key)throw Error(`tapResources: All resource elements must have a key. Element at index ${r} is missing a key.`);if(t.has(e.key))throw Error(`tapResources: Duplicate key "${e.key}" found. All keys must be unique.`);t.add(e.key)});let[r,i]=A({}),n=M(()=>new Map(e.map(e=>[e.key,e])),[e]),[a]=A(()=>new Map),h=M(()=>{let e=new Map,t=new Set;return n.forEach((r,n)=>{t.add(n);let u=a.get(n);u&&u.resourceFn===s(r.type)||(u&&l(u),u=o(s(r.type),()=>i({})),a.set(n,u));let h=c(u,r.props);e.set(n,h)}),a.forEach((e,r)=>{t.has(r)||(l(e),a.delete(r))}),e},[n,r]);return B(()=>{h.forEach((e,t)=>{let r=a.get(t);r&&u(r,e)})},[h,a]),B(()=>()=>{a.forEach(e=>{l(e)}),a.clear()},[a]),M(()=>e.map(e=>h.get(e.key)?.state),[e,h])}e.s(["DerivedScope",()=>ei,"DerivedScopes",()=>ea],21918),e.s(["tapResources",()=>es],17435);var ei=R(e=>{let t=C(e.get);return B(()=>{t.current=e.get}),M(()=>eo({source:e.source,query:e.query,get:()=>t.current()}),[e.source,JSON.stringify(e.query)])}),en=R(e=>{let t=P(e.scopeElement);return M(()=>[e.fieldName,t],[e.fieldName,t])}),ea=R(e=>{let{on:t,subscribe:r,flushSync:s,...i}=e,n=C({on:t,subscribe:r,flushSync:s});B(()=>{n.current={on:t,subscribe:r,flushSync:s}});let a=es(Object.entries(i).map(([e,t])=>en({fieldName:e,scopeElement:t},{key:e})));return M(()=>{let e=Object.fromEntries(a),{on:t,subscribe:r,flushSync:s}=n.current;return t&&(e.on=(e,r)=>t(e,r)),r&&(e.subscribe=e=>r(e)),s&&(e.flushSync=()=>s()),e},[...a])}),eo=e=>{let t=e.get;return t.source=e.source,t.query=e.query,t},el=()=>()=>{},ec=(0,r.createContext)({threads:eo({source:null,query:{},get:()=>{throw Error("Threads is only available inside <AssistantProvider />")}}),tools:eo({source:null,query:{},get:()=>{throw Error("Tools is only available inside <AssistantProvider />")}}),modelContext:eo({source:null,query:{},get:()=>{throw Error("ModelContext is only available inside <AssistantProvider />")}}),threadListItem:eo({source:null,query:{},get:()=>{throw Error("ThreadListItem is only available inside <AssistantProvider />")}}),thread:eo({source:null,query:{},get:()=>{throw Error("Thread is only available inside <AssistantProvider />")}}),composer:eo({source:null,query:{},get:()=>{throw Error("Composer is only available inside <AssistantProvider />")}}),message:eo({source:null,query:{},get:()=>{throw Error("Message is only available inside <ThreadPrimitive.Messages />")}}),part:eo({source:null,query:{},get:()=>{throw Error("Part is only available inside <MessagePrimitive.Parts />")}}),attachment:eo({source:null,query:{},get:()=>{throw Error("Attachment is only available inside <MessagePrimitive.Attachments /> or <ComposerPrimitive.Attachments />")}}),subscribe:el,flushSync:el,on:e=>{let{scope:t}=p(e);throw Error(`Event scope is not available in this component: ${t}`)}}),eu=()=>(0,r.useContext)(ec),eh=e=>{let t=eu(),s=d(ea(e));return(0,r.useMemo)(()=>ep(t,s),[t,s])};function ed(e){let t,s,i;if(!e)return eu();return t=eu(),s=d(G(er(e))),i=(0,r.useMemo)(()=>{let e;return e=()=>s.getState().api.threads.item("main"),{threads:eo({source:"root",query:{},get:()=>s.getState().api.threads}),tools:eo({source:"root",query:{},get:()=>s.getState().api.tools}),modelContext:eo({source:"root",query:{},get:()=>s.getState().api.modelContext}),thread:eo({source:"threads",query:{type:"main"},get:()=>s.getState().api.threads.thread("main")}),threadListItem:eo({source:"threads",query:{type:"main"},get:()=>e()}),composer:eo({source:"thread",query:{},get:()=>s.getState().api.threads.thread("main").composer}),on(t,r){let{event:i,scope:n}=p(t);if("*"===n)return s.getState().api.on(i,r);if(g("thread",n,i)||g("thread-list-item",n,i)||g("composer",n,i))return s.getState().api.on(i,t=>{t.threadId===e().getState().id&&r(t)});throw Error(`Event scope is not available in this component: ${n}`)},subscribe:s.subscribe,flushSync:s.flushSync}},[s]),(0,r.useMemo)(()=>ep(t,i),[t,i])}var ep=(e,t)=>{var r,s,i,n;let a=t.subscribe,o=t.flushSync;return{...e,...t,subscribe:(r=e.subscribe,s=a??el,r===el?s:s===el?r:(...e)=>{let t=r(...e),i=s(...e);return()=>{t(),i()}}),flushSync:(i=e.flushSync,n=o??el,i===el?n:n===el?i:(...e)=>{i(...e),n(...e)})}},eg=({api:e,children:t,devToolsVisible:s=!0})=>((0,r.useEffect)(()=>{if(s&&e.subscribe)return T.register(e)},[e,s]),(0,w.jsx)(ec.Provider,{value:e,children:(0,w.jsx)(I,{children:t})}))},79166,e=>{"use strict";var t=Symbol("innerMessage"),r=Symbol("innerMessages"),s=e=>e[t],i=[],n=e=>{let s="messages"in e?e.messages:e,n=s[r]||s[t];return n?Array.isArray(n)?n:(s[r]=[n],s[r]):i};e.s(["getExternalStoreMessage",()=>s,"getExternalStoreMessages",()=>n,"symbolInnerMessage",()=>t])},89293,(e,t,r)=>{"use strict";var s=e.i(14370);let i=void 0!==s.Buffer,n=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,a=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function o(e,t,r){null==r&&null!==t&&"object"==typeof t&&(r=t,t=void 0),i&&s.Buffer.isBuffer(e)&&(e=e.toString()),e&&65279===e.charCodeAt(0)&&(e=e.slice(1));let o=JSON.parse(e,t);if(null===o||"object"!=typeof o)return o;let c=r&&r.protoAction||"error",u=r&&r.constructorAction||"error";if("ignore"===c&&"ignore"===u)return o;if("ignore"!==c&&"ignore"!==u){if(!1===n.test(e)&&!1===a.test(e))return o}else if("ignore"!==c&&"ignore"===u){if(!1===n.test(e))return o}else if(!1===a.test(e))return o;return l(o,{protoAction:c,constructorAction:u,safe:r&&r.safe})}function l(e,{protoAction:t="error",constructorAction:r="error",safe:s}={}){let i=[e];for(;i.length;){let e=i;for(let n of(i=[],e)){if("ignore"!==t&&Object.prototype.hasOwnProperty.call(n,"__proto__")){if(!0===s)return null;if("error"===t)throw SyntaxError("Object contains forbidden prototype property");delete n.__proto__}if("ignore"!==r&&Object.prototype.hasOwnProperty.call(n,"constructor")&&null!==n.constructor&&"object"==typeof n.constructor&&Object.prototype.hasOwnProperty.call(n.constructor,"prototype")){if(!0===s)return null;if("error"===r)throw SyntaxError("Object contains forbidden prototype property");delete n.constructor}for(let e in n){let t=n[e];t&&"object"==typeof t&&i.push(t)}}}return e}function c(e,t,r){let{stackTraceLimit:s}=Error;Error.stackTraceLimit=0;try{return o(e,t,r)}finally{Error.stackTraceLimit=s}}t.exports=c,t.exports.default=c,t.exports.parse=c,t.exports.safeParse=function(e,t){let{stackTraceLimit:r}=Error;Error.stackTraceLimit=0;try{return o(e,t,{safe:!0})}catch{return}finally{Error.stackTraceLimit=r}},t.exports.scan=l},82166,e=>{"use strict";var t=e.i(89293),r=Symbol("aui.parse-partial-json-object.meta"),s=e=>{if(0===e.length)return{[r]:{state:"partial",partialPath:[]}};try{let s=t.default.parse(e);if("object"!=typeof s||null===s)throw Error("argsText is expected to be an object");return s[r]={state:"complete",partialPath:[]},s}catch{try{let[s,i]=function(e){let t,r=["ROOT"],s=-1,i=null,n=[];function a(){void 0!==t&&(n.push(JSON.parse('"'+t+'"')),t=void 0)}function o(e,t,n){switch(e){case'"':s=t,r.pop(),r.push(n),r.push("INSIDE_STRING"),a();break;case"f":case"t":case"n":s=t,i=t,r.pop(),r.push(n),r.push("INSIDE_LITERAL");break;case"-":r.pop(),r.push(n),r.push("INSIDE_NUMBER"),a();break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":s=t,r.pop(),r.push(n),r.push("INSIDE_NUMBER"),a();break;case"{":s=t,r.pop(),r.push(n),r.push("INSIDE_OBJECT_START"),a();break;case"[":s=t,r.pop(),r.push(n),r.push("INSIDE_ARRAY_START"),a()}}function l(e,i){switch(e){case",":r.pop(),r.push("INSIDE_OBJECT_AFTER_COMMA");break;case"}":s=i,r.pop(),t=n.pop()}}function c(e,i){switch(e){case",":r.pop(),r.push("INSIDE_ARRAY_AFTER_COMMA"),t=(Number(t)+1).toString();break;case"]":s=i,r.pop(),t=n.pop()}}for(let a=0;a<e.length;a++){let u=e[a];switch(r[r.length-1]){case"ROOT":o(u,a,"FINISH");break;case"INSIDE_OBJECT_START":switch(u){case'"':r.pop(),r.push("INSIDE_OBJECT_KEY"),t="";break;case"}":s=a,r.pop(),t=n.pop()}break;case"INSIDE_OBJECT_AFTER_COMMA":'"'===u&&(r.pop(),r.push("INSIDE_OBJECT_KEY"),t="");break;case"INSIDE_OBJECT_KEY":switch(u){case'"':r.pop(),r.push("INSIDE_OBJECT_AFTER_KEY");break;case"\\":r.push("INSIDE_STRING_ESCAPE"),t+=u;break;default:t+=u}break;case"INSIDE_OBJECT_AFTER_KEY":":"===u&&(r.pop(),r.push("INSIDE_OBJECT_BEFORE_VALUE"));break;case"INSIDE_OBJECT_BEFORE_VALUE":o(u,a,"INSIDE_OBJECT_AFTER_VALUE");break;case"INSIDE_OBJECT_AFTER_VALUE":l(u,a);break;case"INSIDE_STRING":switch(u){case'"':r.pop(),s=a,t=n.pop();break;case"\\":r.push("INSIDE_STRING_ESCAPE");break;default:s=a}break;case"INSIDE_ARRAY_START":"]"===u?(s=a,r.pop(),t=n.pop()):(s=a,t="0",o(u,a,"INSIDE_ARRAY_AFTER_VALUE"));break;case"INSIDE_ARRAY_AFTER_VALUE":switch(u){case",":r.pop(),r.push("INSIDE_ARRAY_AFTER_COMMA"),t=(Number(t)+1).toString();break;case"]":s=a,r.pop(),t=n.pop();break;default:s=a}break;case"INSIDE_ARRAY_AFTER_COMMA":o(u,a,"INSIDE_ARRAY_AFTER_VALUE");break;case"INSIDE_STRING_ESCAPE":r.pop(),"INSIDE_STRING"===r[r.length-1]?s=a:"INSIDE_OBJECT_KEY"===r[r.length-1]&&(t+=u);break;case"INSIDE_NUMBER":switch(u){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":s=a;break;case"e":case"E":case"-":case".":break;case",":r.pop(),t=n.pop(),"INSIDE_ARRAY_AFTER_VALUE"===r[r.length-1]&&c(u,a),"INSIDE_OBJECT_AFTER_VALUE"===r[r.length-1]&&l(u,a);break;case"}":r.pop(),t=n.pop(),"INSIDE_OBJECT_AFTER_VALUE"===r[r.length-1]&&l(u,a);break;case"]":r.pop(),t=n.pop(),"INSIDE_ARRAY_AFTER_VALUE"===r[r.length-1]&&c(u,a);break;default:r.pop(),t=n.pop()}break;case"INSIDE_LITERAL":{let t=e.substring(i,a+1);"false".startsWith(t)||"true".startsWith(t)||"null".startsWith(t)?s=a:(r.pop(),"INSIDE_OBJECT_AFTER_VALUE"===r[r.length-1]?l(u,a):"INSIDE_ARRAY_AFTER_VALUE"===r[r.length-1]&&c(u,a))}}}let u=e.slice(0,s+1);for(let t=r.length-1;t>=0;t--)switch(r[t]){case"INSIDE_STRING":u+='"';break;case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":u+="}";break;case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":u+="]";break;case"INSIDE_LITERAL":{let t=e.substring(i,e.length);"true".startsWith(t)?u+="true".slice(t.length):"false".startsWith(t)?u+="false".slice(t.length):"null".startsWith(t)&&(u+="null".slice(t.length))}}return[u,n]}(e),n=t.default.parse(s);if("object"!=typeof n||null===n)throw Error("argsText is expected to be an object");return n[r]={state:"partial",partialPath:i},n}catch{return}}},i=(e,t,r)=>{if("object"!=typeof e||null===e)return t.state;if("complete"===t.state)return"complete";if(0===r.length)return t.state;let[s,...n]=r;if(!Object.prototype.hasOwnProperty.call(e,s))return"partial";let[a,...o]=t.partialPath;return s!==a?"complete":i(e[s],{state:"partial",partialPath:o},n)},n=(e,t)=>{let s=e?.[r];if(!s)throw Error("unable to determine object state");return i(e,s,t.map(String))};e.s(["getPartialJsonObjectFieldState",()=>n,"parsePartialJsonObject",()=>s],82166)},97167,97395,e=>{"use strict";let t=(e,t=21)=>(r=t)=>{let s="",i=0|r;for(;i--;)s+=e[Math.random()*e.length|0];return s};e.s(["customAlphabet",()=>t],97395);var r=t("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",7),s=()=>`__optimistic__${r()}`;e.s(["generateId",()=>r,"generateOptimisticId",()=>s],97167)},23789,e=>{"use strict";var t=e.i(82166),r=e.i(97167),s=(e,s,i)=>{let{role:n,id:a,createdAt:o,attachments:l,status:c,metadata:u}=e,h={id:a??s,createdAt:o??new Date},d="string"==typeof e.content?[{type:"text",text:e.content}]:e.content;if("user"!==n&&l?.length)throw Error("attachments are only supported for user messages");if("assistant"!==n&&c)throw Error("status is only supported for assistant messages");if("assistant"!==n&&u?.steps)throw Error("metadata.steps is only supported for assistant messages");switch(n){case"assistant":return{...h,role:n,content:d.map(e=>{let s=e.type;switch(s){case"text":case"reasoning":if(0===e.text.trim().length)return null;return e;case"file":case"source":case"data":return e;case"image":return(({image:e,...t})=>e.match(/^data:image\/(png|jpeg|jpg|gif|webp);base64,(.*)$/)?{...t,image:e}:(console.warn("Invalid image data format detected"),null))(e);case"tool-call":{let{parentId:s,messages:i,...n}=e,a={...n,toolCallId:e.toolCallId??"tool-"+(0,r.generateId)(),...void 0!==s&&{parentId:s},...void 0!==i&&{messages:i}};if(e.args)return{...a,args:e.args,argsText:e.argsText??JSON.stringify(e.args)};return{...a,args:(0,t.parsePartialJsonObject)(e.argsText??"")??{},argsText:e.argsText??""}}default:throw Error(`Unsupported assistant message part type: ${s}`)}}).filter(e=>!!e),status:c??i,metadata:{unstable_state:u?.unstable_state??null,unstable_annotations:u?.unstable_annotations??[],unstable_data:u?.unstable_data??[],custom:u?.custom??{},steps:u?.steps??[],...u?.submittedFeedback&&{submittedFeedback:u.submittedFeedback}}};case"user":return{...h,role:n,content:d.map(e=>{let t=e.type;switch(t){case"text":case"image":case"audio":case"file":return e;default:throw Error(`Unsupported user message part type: ${t}`)}}),attachments:l??[],metadata:{custom:u?.custom??{}}};case"system":if(1!==d.length||"text"!==d[0].type)throw Error("System messages must have exactly one text message part.");return{...h,role:n,content:d,metadata:{custom:u?.custom??{}}};default:throw Error(`Unknown message role: ${n}`)}};e.s(["fromThreadMessageLike",()=>s])},35498,e=>{"use strict";var t=Symbol("autoStatus"),r=Object.freeze(Object.assign({type:"running"},{[t]:!0})),s=Object.freeze(Object.assign({type:"complete",reason:"unknown"},{[t]:!0})),i=Object.freeze(Object.assign({type:"requires-action",reason:"tool-calls"},{[t]:!0})),n=Object.freeze(Object.assign({type:"requires-action",reason:"interrupt"},{[t]:!0})),a=e=>!0===e[t],o=(e,a,o,l,c)=>e&&c?Object.assign({type:"incomplete",reason:"error",error:c},{[t]:!0}):e&&a?r:o?n:l?i:s;e.s(["getAutoStatus",()=>o,"isAutoStatus",()=>a])},38201,e=>{"use strict";var t=e.i(12298),r=class{_contextProvider=new t.CompositeContextProvider;registerModelContextProvider(e){return this._contextProvider.registerModelContextProvider(e)}getModelContextProvider(){return this._contextProvider}};e.s(["BaseAssistantRuntimeCore",()=>r])},2631,e=>{"use strict";var t=e=>e.content.filter(e=>"text"===e.type).map(e=>e.text).join("\n\n");e.s(["getThreadMessageText",()=>t])},12164,e=>{"use strict";var t=e.i(97167),r=e.i(35498),s=e.i(23789),i={fromArray:e=>{let i=e.map(e=>(0,s.fromThreadMessageLike)(e,(0,t.generateId)(),(0,r.getAutoStatus)(!1,!1,!1,!1,void 0)));return{messages:i.map((e,t)=>({parentId:t>0?i[t-1].id:null,message:e}))}}},n=e=>e.next?n(e.next):"current"in e?e:null,a=class{constructor(e){this.func=e}_value=null;get value(){return null===this._value&&(this._value=this.func()),this._value}dirty(){this._value=null}},o=class{messages=new Map;head=null;root={children:[],next:null};updateLevels(e,t){for(let r of(e.level=t,e.children)){let e=this.messages.get(r);e&&this.updateLevels(e,t+1)}}performOp(e,t,r){let s=t.prev??this.root,i=e??this.root;if("relink"!==r||s!==i){if("link"!==r&&(s.children=s.children.filter(e=>e!==t.current.id),s.next===t)){let e=s.children.at(-1),t=e?this.messages.get(e):null;if(void 0===t)throw Error("MessageRepository(performOp/cut): Fallback sibling message not found. This is likely an internal bug in assistant-ui.");s.next=t}if("cut"!==r){for(let r=e;r;r=r.prev)if(r.current.id===t.current.id)throw Error("MessageRepository(performOp/link): A message with the same id already exists in the parent tree. This error occurs if the same message id is found multiple times. This is likely an internal bug in assistant-ui.");i.children=[...i.children,t.current.id],(n(t)===this.head||null===i.next)&&(i.next=t),t.prev=e;let r=e?e.level+1:0;this.updateLevels(t,r)}}}_messages=new a(()=>{let e=Array((this.head?.level??-1)+1);for(let t=this.head;t;t=t.prev)e[t.level]=t.current;return e});get headId(){return this.head?.current.id??null}getMessages(e){if(void 0===e||e===this.head?.current.id)return this._messages.value;let t=this.messages.get(e);if(!t)throw Error("MessageRepository(getMessages): Head message not found. This is likely an internal bug in assistant-ui.");let r=Array(t.level+1);for(let e=t;e;e=e.prev)r[e.level]=e.current;return r}addOrUpdateMessage(e,t){let r=this.messages.get(t.id),s=e?this.messages.get(e):null;if(void 0===s)throw Error("MessageRepository(addOrUpdateMessage): Parent message not found. This is likely an internal bug in assistant-ui.");if(r){r.current=t,this.performOp(s,r,"relink"),this._messages.dirty();return}let i={prev:s,current:t,next:null,children:[],level:s?s.level+1:0};this.messages.set(t.id,i),this.performOp(s,i,"link"),this.head===s&&(this.head=i),this._messages.dirty()}getMessage(e){let t=this.messages.get(e);if(!t)throw Error("MessageRepository(updateMessage): Message not found. This is likely an internal bug in assistant-ui.");return{parentId:t.prev?.current.id??null,message:t.current}}appendOptimisticMessage(e,r){let i;do i=(0,t.generateOptimisticId)();while(this.messages.has(i))return this.addOrUpdateMessage(e,(0,s.fromThreadMessageLike)(r,i,{type:"running"})),i}deleteMessage(e,t){let r=this.messages.get(e);if(!r)throw Error("MessageRepository(deleteMessage): Message not found. This is likely an internal bug in assistant-ui.");let s=void 0===t?r.prev:null===t?null:this.messages.get(t);if(void 0===s)throw Error("MessageRepository(deleteMessage): Replacement not found. This is likely an internal bug in assistant-ui.");for(let e of r.children){let t=this.messages.get(e);if(!t)throw Error("MessageRepository(deleteMessage): Child message not found. This is likely an internal bug in assistant-ui.");this.performOp(s,t,"relink")}this.performOp(null,r,"cut"),this.messages.delete(e),this.head===r&&(this.head=n(s??this.root)),this._messages.dirty()}getBranches(e){let t=this.messages.get(e);if(!t)throw Error("MessageRepository(getBranches): Message not found. This is likely an internal bug in assistant-ui.");let{children:r}=t.prev??this.root;return r}switchToBranch(e){let t=this.messages.get(e);if(!t)throw Error("MessageRepository(switchToBranch): Branch not found. This is likely an internal bug in assistant-ui.");(t.prev??this.root).next=t,this.head=n(t),this._messages.dirty()}resetHead(e){if(null===e)return void this.clear();let t=this.messages.get(e);if(!t)throw Error("MessageRepository(resetHead): Branch not found. This is likely an internal bug in assistant-ui.");if(t.children.length>0){let e=t=>{for(let r of t.children){let t=this.messages.get(r);t&&(e(t),this.messages.delete(r))}};e(t),t.children=[],t.next=null}this.head=t;for(let e=t;e;e=e.prev)e.prev&&(e.prev.next=e);this._messages.dirty()}clear(){this.messages.clear(),this.head=null,this.root={children:[],next:null},this._messages.dirty()}export(){let e=[];for(let[,t]of this.messages)e.push({message:t.current,parentId:t.prev?.current.id??null});return{headId:this.head?.current.id??null,messages:e}}import({headId:e,messages:t}){for(let{message:e,parentId:r}of t)this.addOrUpdateMessage(r,e);this.resetHead(e??t.at(-1)?.message.id??null)}};e.s(["ExportedMessageRepository",()=>i,"MessageRepository",()=>o])},31609,13931,e=>{"use strict";var t=class{_subscribers=new Set;subscribe(e){return this._subscribers.add(e),()=>this._subscribers.delete(e)}waitForUpdate(){return new Promise(e=>{let t=this.subscribe(()=>{t(),e()})})}_notifySubscribers(){let e=[];for(let t of this._subscribers)try{t()}catch(t){e.push(t)}if(e.length>0)if(1===e.length)throw e[0];else throw AggregateError(e)}},r=class extends t{isEditing=!0;get attachmentAccept(){return this.getAttachmentAdapter()?.accept??"*"}_attachments=[];get attachments(){return this._attachments}setAttachments(e){this._attachments=e,this._notifySubscribers()}get isEmpty(){return!this.text.trim()&&!this.attachments.length}_text="";get text(){return this._text}_role="user";get role(){return this._role}_runConfig={};get runConfig(){return this._runConfig}setText(e){this._text!==e&&(this._text=e,this._notifySubscribers())}setRole(e){this._role!==e&&(this._role=e,this._notifySubscribers())}setRunConfig(e){this._runConfig!==e&&(this._runConfig=e,this._notifySubscribers())}_emptyTextAndAttachments(){this._attachments=[],this._text="",this._notifySubscribers()}async _onClearAttachments(){let e=this.getAttachmentAdapter();e&&await Promise.all(this._attachments.map(t=>e.remove(t)))}async reset(){if(0===this._attachments.length&&""===this._text&&"user"===this._role&&0===Object.keys(this._runConfig).length)return;this._role="user",this._runConfig={};let e=this._onClearAttachments();this._emptyTextAndAttachments(),await e}async clearAttachments(){let e=this._onClearAttachments();this.setAttachments([]),await e}async send(){let e=this.getAttachmentAdapter(),t=e&&this.attachments.length>0?Promise.all(this.attachments.map(async t=>"complete"===t.status.type?t:await e.send(t))):[],r=this.text;this._emptyTextAndAttachments();let s={createdAt:new Date,role:this.role,content:r?[{type:"text",text:r}]:[],attachments:await t,runConfig:this.runConfig,metadata:{custom:{}}};this.handleSend(s),this._notifyEventSubscribers("send")}cancel(){this.handleCancel()}async addAttachment(e){let t=this.getAttachmentAdapter();if(!t)throw Error("Attachments are not supported");let r=e=>{let t=this._attachments.findIndex(t=>t.id===e.id);-1!==t?this._attachments=[...this._attachments.slice(0,t),e,...this._attachments.slice(t+1)]:this._attachments=[...this._attachments,e],this._notifySubscribers()},s=t.add({file:e});if(Symbol.asyncIterator in s)for await(let e of s)r(e);else r(await s);this._notifyEventSubscribers("attachment-add"),this._notifySubscribers()}async removeAttachment(e){let t=this.getAttachmentAdapter();if(!t)throw Error("Attachments are not supported");let r=this._attachments.findIndex(t=>t.id===e);if(-1===r)throw Error("Attachment not found");let s=this._attachments[r];await t.remove(s),this._attachments=[...this._attachments.slice(0,r),...this._attachments.slice(r+1)],this._notifySubscribers()}_eventSubscribers=new Map;_notifyEventSubscribers(e){let t=this._eventSubscribers.get(e);if(t)for(let e of t)e()}unstable_on(e,t){let r=this._eventSubscribers.get(e);return r?r.add(t):this._eventSubscribers.set(e,new Set([t])),()=>{let r=this._eventSubscribers.get(e);r&&r.delete(t)}}};e.s(["BaseComposerRuntimeCore",()=>r],13931);var s=class extends r{constructor(e){super(),this.runtime=e,this.connect()}_canCancel=!1;get canCancel(){return this._canCancel}get attachments(){return super.attachments}getAttachmentAdapter(){return this.runtime.adapters?.attachments}connect(){return this.runtime.subscribe(()=>{this.canCancel!==this.runtime.capabilities.cancel&&(this._canCancel=this.runtime.capabilities.cancel,this._notifySubscribers())})}async handleSend(e){this.runtime.append({...e,parentId:this.runtime.messages.at(-1)?.id??null,sourceId:null})}async handleCancel(){this.runtime.cancelRun()}};e.s(["DefaultThreadComposerRuntimeCore",()=>s],31609)},18482,45070,48471,79729,35321,e=>{"use strict";var t=class{_subscriptions=new Set;_connection;get isConnected(){return!!this._connection}notifySubscribers(){for(let e of this._subscriptions)e()}_updateConnection(){this._subscriptions.size>0?this._connection||(this._connection=this._connect()):(this._connection?.(),this._connection=void 0)}subscribe(e){return this._subscriptions.add(e),this._updateConnection(),()=>{this._subscriptions.delete(e),this._updateConnection()}}};e.s(["BaseSubject",()=>t],45070);var r=Symbol("skip-update");e.s(["SKIP_UPDATE",()=>r],48471);var s=class extends t{constructor(e){super(),this.binding=e}get path(){return this.binding.path}_previousStateDirty=!0;_previousState;getState=()=>{if(!this.isConnected||this._previousStateDirty){let e=this.binding.getState();e!==r&&(this._previousState=e),this._previousStateDirty=!1}if(void 0===this._previousState)throw Error("Entry not available in the store");return this._previousState};_connect(){let e=()=>{this._previousStateDirty=!0,this.notifySubscribers()};return this.binding.subscribe(e)}};e.s(["LazyMemoizeSubject",()=>s],18482);var i=class{constructor(e,t){this._core=e,this._threadListBinding=t,this.__internal_bindMethods()}get path(){return this._core.path}__internal_bindMethods(){this.switchTo=this.switchTo.bind(this),this.rename=this.rename.bind(this),this.archive=this.archive.bind(this),this.unarchive=this.unarchive.bind(this),this.delete=this.delete.bind(this),this.initialize=this.initialize.bind(this),this.generateTitle=this.generateTitle.bind(this),this.subscribe=this.subscribe.bind(this),this.unstable_on=this.unstable_on.bind(this),this.getState=this.getState.bind(this),this.detach=this.detach.bind(this)}getState(){return this._core.getState()}switchTo(){let e=this._core.getState();return this._threadListBinding.switchToThread(e.id)}rename(e){let t=this._core.getState();return this._threadListBinding.rename(t.id,e)}archive(){let e=this._core.getState();return this._threadListBinding.archive(e.id)}unarchive(){let e=this._core.getState();return this._threadListBinding.unarchive(e.id)}delete(){let e=this._core.getState();return this._threadListBinding.delete(e.id)}initialize(){let e=this._core.getState();return this._threadListBinding.initialize(e.id)}generateTitle(){let e=this._core.getState();return this._threadListBinding.generateTitle(e.id)}unstable_on(e,t){let r=this._core.getState().isMain,s=this._core.getState().id;return this.subscribe(()=>{let i=this._core.getState(),n=i.isMain,a=i.id;r===n&&s===a||(r=n,s=a,"switched-to"===e&&!n||"switched-away"===e&&n||t())})}subscribe(e){return this._core.subscribe(e)}detach(){let e=this._core.getState();this._threadListBinding.detach(e.id)}__internal_getRuntime(){return this}};e.s(["ThreadListItemRuntimeImpl",()=>i],79729);var n=class extends t{constructor(e){super(),this.binding=e;const t=e.getState();if(t===r)throw Error("Entry not available in the store");this._previousState=t}get path(){return this.binding.path}_previousState;getState=()=>(this.isConnected||this._syncState(),this._previousState);_syncState(){let e=this.binding.getState();return!(e===r||function(e,t){if(void 0===e&&void 0===t)return!0;if(void 0===e||void 0===t)return!1;for(let r of Object.keys(e))if(!Object.is(e[r],t[r]))return!1;return!0}(e,this._previousState))&&(this._previousState=e,!0)}_connect(){let e=()=>{this._syncState()&&this.notifySubscribers()};return this.binding.subscribe(e)}};e.s(["ShallowMemoizeSubject",()=>n],35321)},75704,15801,70382,e=>{"use strict";var t=e.i(18482),r=e.i(79729),s=e.i(48471),i=e.i(35321),n=e.i(79166),a=e.i(2631),o=class{constructor(e){this._core=e,this.__internal_bindMethods()}get path(){return this._core.path}__internal_bindMethods(){this.getState=this.getState.bind(this),this.remove=this.remove.bind(this),this.subscribe=this.subscribe.bind(this)}getState(){return this._core.getState()}subscribe(e){return this._core.subscribe(e)}},l=class extends o{constructor(e,t){super(e),this._composerApi=t}remove(){let e=this._composerApi.getState();if(!e)throw Error("Composer is not available");return e.removeAttachment(this.getState().id)}},c=class extends l{get source(){return"thread-composer"}},u=class extends l{get source(){return"edit-composer"}},h=class extends o{get source(){return"message"}constructor(e){super(e)}remove(){throw Error("Message attachments cannot be removed")}},d=e.i(45070),p=class extends d.BaseSubject{constructor(e){super(),this.config=e}getState(){return this.config.binding.getState()}outerSubscribe(e){return this.config.binding.subscribe(e)}_connect(){let e=()=>{this.notifySubscribers()},t=this.config.binding.getState(),r=t?.unstable_on(this.config.event,e),s=()=>{let s=this.config.binding.getState();s!==t&&(t=s,r?.(),r=this.config.binding.getState()?.unstable_on(this.config.event,e))},i=this.outerSubscribe(s);return()=>{i?.(),r?.()}}},g=Object.freeze([]),f=Object.freeze({}),b=class{constructor(e){this._core=e}get path(){return this._core.path}__internal_bindMethods(){this.setText=this.setText.bind(this),this.setRunConfig=this.setRunConfig.bind(this),this.getState=this.getState.bind(this),this.subscribe=this.subscribe.bind(this),this.addAttachment=this.addAttachment.bind(this),this.reset=this.reset.bind(this),this.clearAttachments=this.clearAttachments.bind(this),this.send=this.send.bind(this),this.cancel=this.cancel.bind(this),this.setRole=this.setRole.bind(this),this.getAttachmentByIndex=this.getAttachmentByIndex.bind(this),this.unstable_on=this.unstable_on.bind(this)}setText(e){let t=this._core.getState();if(!t)throw Error("Composer is not available");t.setText(e)}setRunConfig(e){let t=this._core.getState();if(!t)throw Error("Composer is not available");t.setRunConfig(e)}addAttachment(e){let t=this._core.getState();if(!t)throw Error("Composer is not available");return t.addAttachment(e)}reset(){let e=this._core.getState();if(!e)throw Error("Composer is not available");return e.reset()}clearAttachments(){let e=this._core.getState();if(!e)throw Error("Composer is not available");return e.clearAttachments()}send(){let e=this._core.getState();if(!e)throw Error("Composer is not available");e.send()}cancel(){let e=this._core.getState();if(!e)throw Error("Composer is not available");e.cancel()}setRole(e){let t=this._core.getState();if(!t)throw Error("Composer is not available");t.setRole(e)}subscribe(e){return this._core.subscribe(e)}_eventSubscriptionSubjects=new Map;unstable_on(e,t){let r=this._eventSubscriptionSubjects.get(e);return r||(r=new p({event:e,binding:this._core}),this._eventSubscriptionSubjects.set(e,r)),r.subscribe(t)}},m=class extends b{get path(){return this._core.path}get type(){return"thread"}_getState;constructor(e){const r=new t.LazyMemoizeSubject({path:e.path,getState:()=>{let t;return t=e.getState(),Object.freeze({type:"thread",isEditing:t?.isEditing??!1,canCancel:t?.canCancel??!1,isEmpty:t?.isEmpty??!0,attachments:t?.attachments??g,text:t?.text??"",role:t?.role??"user",runConfig:t?.runConfig??f,attachmentAccept:t?.attachmentAccept??"",value:t?.text??""})},subscribe:t=>e.subscribe(t)});super({path:e.path,getState:()=>e.getState(),subscribe:e=>r.subscribe(e)}),this._getState=r.getState.bind(r),this.__internal_bindMethods()}getState(){return this._getState()}getAttachmentByIndex(e){return new c(new i.ShallowMemoizeSubject({path:{...this.path,attachmentSource:"thread-composer",attachmentSelector:{type:"index",index:e},ref:this.path.ref+`${this.path.ref}.attachments[${e}]`},getState:()=>{let t=this.getState().attachments[e];return t?{...t,source:"thread-composer"}:s.SKIP_UPDATE},subscribe:e=>this._core.subscribe(e)}),this._core)}},_=class extends b{constructor(e,r){const s=new t.LazyMemoizeSubject({path:e.path,getState:()=>{let t;return t=e.getState(),Object.freeze({type:"edit",isEditing:t?.isEditing??!1,canCancel:t?.canCancel??!1,isEmpty:t?.isEmpty??!0,text:t?.text??"",role:t?.role??"user",attachments:t?.attachments??g,runConfig:t?.runConfig??f,attachmentAccept:t?.attachmentAccept??"",value:t?.text??""})},subscribe:t=>e.subscribe(t)});super({path:e.path,getState:()=>e.getState(),subscribe:e=>s.subscribe(e)}),this._beginEdit=r,this._getState=s.getState.bind(s),this.__internal_bindMethods()}get path(){return this._core.path}get type(){return"edit"}_getState;__internal_bindMethods(){super.__internal_bindMethods(),this.beginEdit=this.beginEdit.bind(this)}getState(){return this._getState()}beginEdit(){this._beginEdit()}getAttachmentByIndex(e){return new u(new i.ShallowMemoizeSubject({path:{...this.path,attachmentSource:"edit-composer",attachmentSelector:{type:"index",index:e},ref:this.path.ref+`${this.path.ref}.attachments[${e}]`},getState:()=>{let t=this.getState().attachments[e];return t?{...t,source:"edit-composer"}:s.SKIP_UPDATE},subscribe:e=>this._core.subscribe(e)}),this._core)}},y=Symbol.for("aui.tool-response"),S=class e{get[y](){return!0}artifact;result;isError;constructor(e){void 0!==e.artifact&&(this.artifact=e.artifact),this.result=e.result,this.isError=e.isError??!1}static[Symbol.hasInstance](e){return"object"==typeof e&&null!==e&&y in e}static toResponse(t){return t instanceof e?t:new e({result:void 0===t?"<no result>":t})}};e.s(["ToolResponse",()=>S],15801);var E=class{constructor(e,t,r){this.contentBinding=e,this.messageApi=t,this.threadApi=r,this.__internal_bindMethods()}get path(){return this.contentBinding.path}__internal_bindMethods(){this.addToolResult=this.addToolResult.bind(this),this.resumeToolCall=this.resumeToolCall.bind(this),this.getState=this.getState.bind(this),this.subscribe=this.subscribe.bind(this)}getState(){return this.contentBinding.getState()}addToolResult(e){let t=this.contentBinding.getState();if(!t)throw Error("Message part is not available");if("tool-call"!==t.type)throw Error("Tried to add tool result to non-tool message part");if(!this.messageApi)throw Error("Message API is not available. This is likely a bug in assistant-ui.");if(!this.threadApi)throw Error("Thread API is not available");let r=this.messageApi.getState();if(!r)throw Error("Message is not available");let s=t.toolName,i=t.toolCallId,n=S.toResponse(e);this.threadApi.getState().addToolResult({messageId:r.id,toolName:s,toolCallId:i,result:n.result,artifact:n.artifact,isError:n.isError})}resumeToolCall(e){let t=this.contentBinding.getState();if(!t)throw Error("Message part is not available");if("tool-call"!==t.type)throw Error("Tried to resume tool call on non-tool message part");if(!this.threadApi)throw Error("Thread API is not available");let r=t.toolCallId;this.threadApi.getState().resumeToolCall({toolCallId:r,payload:e})}subscribe(e){return this.contentBinding.subscribe(e)}},v=d,w=class extends v.BaseSubject{constructor(e){super(),this.binding=e}get path(){return this.binding.path}getState(){return this.binding.getState()}outerSubscribe(e){return this.binding.subscribe(e)}_connect(){let e=()=>{this.notifySubscribers()},t=this.binding.getState(),r=t?.subscribe(e),s=()=>{let s=this.binding.getState();s!==t&&(t=s,r?.(),r=this.binding.getState()?.subscribe(e),e())},i=this.outerSubscribe(s);return()=>{i?.(),r?.()}}},I=Object.freeze({type:"complete"}),x=(e,t)=>{let r=e.content[t];if(!r)return s.SKIP_UPDATE;let i=((e,t,r)=>{if("assistant"!==e.role)return I;if("tool-call"===r.type)if(!r.result)return e.status;else return I;let s=t===Math.max(0,e.content.length-1);return"requires-action"===e.status.type?I:s?e.status:I})(e,t,r);return Object.freeze({...r,...{[n.symbolInnerMessage]:r[n.symbolInnerMessage]},status:i})},T=class{constructor(e,t){this._core=e,this._threadBinding=t,this.composer=new _(new w({path:{...this.path,ref:this.path.ref+`${this.path.ref}.composer`,composerSource:"edit"},getState:this._getEditComposerRuntimeCore,subscribe:e=>this._threadBinding.subscribe(e)}),()=>this._threadBinding.getState().beginEdit(this._core.getState().id)),this.__internal_bindMethods()}get path(){return this._core.path}__internal_bindMethods(){this.reload=this.reload.bind(this),this.getState=this.getState.bind(this),this.subscribe=this.subscribe.bind(this),this.getMessagePartByIndex=this.getMessagePartByIndex.bind(this),this.getMessagePartByToolCallId=this.getMessagePartByToolCallId.bind(this),this.getAttachmentByIndex=this.getAttachmentByIndex.bind(this),this.unstable_getCopyText=this.unstable_getCopyText.bind(this),this.speak=this.speak.bind(this),this.stopSpeaking=this.stopSpeaking.bind(this),this.submitFeedback=this.submitFeedback.bind(this),this.switchToBranch=this.switchToBranch.bind(this)}composer;_getEditComposerRuntimeCore=()=>this._threadBinding.getState().getEditComposer(this._core.getState().id);getState(){return this._core.getState()}reload(e={}){let t=this._getEditComposerRuntimeCore(),r=t??this._threadBinding.getState().composer,{runConfig:s=(t??r).runConfig}=e,i=this._core.getState();if("assistant"!==i.role)throw Error("Can only reload assistant messages");this._threadBinding.getState().startRun({parentId:i.parentId,sourceId:i.id,runConfig:s})}speak(){let e=this._core.getState();return this._threadBinding.getState().speak(e.id)}stopSpeaking(){let e=this._core.getState(),t=this._threadBinding.getState();if(t.speech?.messageId===e.id)this._threadBinding.getState().stopSpeaking();else throw Error("Message is not being spoken")}submitFeedback({type:e}){let t=this._core.getState();this._threadBinding.getState().submitFeedback({messageId:t.id,type:e})}switchToBranch({position:e,branchId:t}){let r=this._core.getState();if(t&&e)throw Error("May not specify both branchId and position");if(!t&&!e)throw Error("Must specify either branchId or position");let s=this._threadBinding.getState().getBranches(r.id),i=t;if("previous"===e?i=s[r.branchNumber-2]:"next"===e&&(i=s[r.branchNumber]),!i)throw Error("Branch not found");this._threadBinding.getState().switchToBranch(i)}unstable_getCopyText(){return(0,a.getThreadMessageText)(this.getState())}subscribe(e){return this._core.subscribe(e)}getMessagePartByIndex(e){if(e<0)throw Error("Message part index must be >= 0");return new E(new i.ShallowMemoizeSubject({path:{...this.path,ref:this.path.ref+`${this.path.ref}.content[${e}]`,messagePartSelector:{type:"index",index:e}},getState:()=>x(this.getState(),e),subscribe:e=>this._core.subscribe(e)}),this._core,this._threadBinding)}getMessagePartByToolCallId(e){return new E(new i.ShallowMemoizeSubject({path:{...this.path,ref:this.path.ref+`${this.path.ref}.content[toolCallId=${JSON.stringify(e)}]`,messagePartSelector:{type:"toolCallId",toolCallId:e}},getState:()=>{let t=this._core.getState(),r=t.content.findIndex(t=>"tool-call"===t.type&&t.toolCallId===e);return -1===r?s.SKIP_UPDATE:x(t,r)},subscribe:e=>this._core.subscribe(e)}),this._core,this._threadBinding)}getAttachmentByIndex(e){return new h(new i.ShallowMemoizeSubject({path:{...this.path,ref:this.path.ref+`${this.path.ref}.attachments[${e}]`,attachmentSource:"message",attachmentSelector:{type:"index",index:e}},getState:()=>{let t=this.getState().attachments,r=t?.[e];return r?{...r,source:"message"}:s.SKIP_UPDATE},subscribe:e=>this._core.subscribe(e)}))}},A=class{get path(){return this._threadBinding.path}get __internal_threadBinding(){return this._threadBinding}_threadBinding;constructor(e,t){const r=new i.ShallowMemoizeSubject({path:e.path,getState:()=>{var r,s;let i;return r=e.getState(),s=t.getState(),i=r.messages.at(-1),Object.freeze({threadId:s.id,metadata:s,capabilities:r.capabilities,isDisabled:r.isDisabled,isLoading:r.isLoading,isRunning:i?.role==="assistant"&&"running"===i.status.type,messages:r.messages,state:r.state,suggestions:r.suggestions,extras:r.extras,speech:r.speech})},subscribe:r=>{let s=e.subscribe(r),i=t.subscribe(r);return()=>{s(),i()}}});this._threadBinding={path:e.path,getState:()=>e.getState(),getStateState:()=>r.getState(),outerSubscribe:t=>e.outerSubscribe(t),subscribe:t=>e.subscribe(t)},this.composer=new m(new w({path:{...this.path,ref:this.path.ref+`${this.path.ref}.composer`,composerSource:"thread"},getState:()=>this._threadBinding.getState().composer,subscribe:e=>this._threadBinding.subscribe(e)})),this.__internal_bindMethods()}__internal_bindMethods(){this.append=this.append.bind(this),this.unstable_resumeRun=this.unstable_resumeRun.bind(this),this.unstable_loadExternalState=this.unstable_loadExternalState.bind(this),this.startRun=this.startRun.bind(this),this.cancelRun=this.cancelRun.bind(this),this.stopSpeaking=this.stopSpeaking.bind(this),this.export=this.export.bind(this),this.import=this.import.bind(this),this.reset=this.reset.bind(this),this.getMessageByIndex=this.getMessageByIndex.bind(this),this.getMessageById=this.getMessageById.bind(this),this.subscribe=this.subscribe.bind(this),this.unstable_on=this.unstable_on.bind(this),this.getModelContext=this.getModelContext.bind(this),this.getModelConfig=this.getModelConfig.bind(this),this.getState=this.getState.bind(this)}composer;getState(){return this._threadBinding.getStateState()}append(e){var t;this._threadBinding.getState().append((t=this._threadBinding.getState().messages,"string"==typeof e?{createdAt:new Date,parentId:t.at(-1)?.id??null,sourceId:null,runConfig:{},role:"user",content:[{type:"text",text:e}],attachments:[],metadata:{custom:{}}}:{createdAt:e.createdAt??new Date,parentId:e.parentId??t.at(-1)?.id??null,sourceId:e.sourceId??null,role:e.role??"user",content:e.content,attachments:e.attachments??[],metadata:e.metadata??{custom:{}},runConfig:e.runConfig??{},startRun:e.startRun}))}subscribe(e){return this._threadBinding.subscribe(e)}getModelContext(){return this._threadBinding.getState().getModelContext()}getModelConfig(){return this.getModelContext()}startRun(e){let t;return this._threadBinding.getState().startRun({parentId:(t=null===e||"string"==typeof e?{parentId:e}:e).parentId??null,sourceId:t.sourceId??null,runConfig:t.runConfig??{}})}unstable_resumeRun(e){return this._threadBinding.getState().resumeRun({parentId:e.parentId??null,sourceId:e.sourceId??null,runConfig:e.runConfig??{},...e.stream?{stream:e.stream}:{}})}unstable_loadExternalState(e){this._threadBinding.getState().unstable_loadExternalState(e)}cancelRun(){this._threadBinding.getState().cancelRun()}stopSpeaking(){return this._threadBinding.getState().stopSpeaking()}export(){return this._threadBinding.getState().export()}import(e){this._threadBinding.getState().import(e)}reset(e){this._threadBinding.getState().reset(e)}getMessageByIndex(e){if(e<0)throw Error("Message index must be >= 0");return this._getMessageRuntime({...this.path,ref:this.path.ref+`${this.path.ref}.messages[${e}]`,messageSelector:{type:"index",index:e}},()=>{let t=this._threadBinding.getState().messages,r=t[e];if(r)return{message:r,parentId:t[e-1]?.id??null}})}getMessageById(e){return this._getMessageRuntime({...this.path,ref:this.path.ref+`${this.path.ref}.messages[messageId=${JSON.stringify(e)}]`,messageSelector:{type:"messageId",messageId:e}},()=>this._threadBinding.getState().getMessageById(e))}_getMessageRuntime(e,t){return new T(new i.ShallowMemoizeSubject({path:e,getState:()=>{let{message:e,parentId:r}=t()??{},{messages:i,speech:a}=this._threadBinding.getState();if(!e||void 0===r)return s.SKIP_UPDATE;let o=this._threadBinding.getState().getBranches(e.id),l=e.metadata.submittedFeedback;return{...e,...{[n.symbolInnerMessage]:e[n.symbolInnerMessage]},isLast:i.at(-1)?.id===e.id,parentId:r,branchNumber:o.indexOf(e.id)+1,branchCount:o.length,speech:a?.messageId===e.id?a:void 0,submittedFeedback:l}},subscribe:e=>this._threadBinding.subscribe(e)}),this._threadBinding)}_eventSubscriptionSubjects=new Map;unstable_on(e,t){let r=this._eventSubscriptionSubjects.get(e);return r||(r=new p({event:e,binding:this._threadBinding}),this._eventSubscriptionSubjects.set(e,r)),r.subscribe(t)}};e.s(["ThreadRuntimeImpl",()=>A],70382);var C=(e,t)=>{if(void 0===t)return s.SKIP_UPDATE;let r=e.getItemById(t);return r?{id:r.id,threadId:r.id,remoteId:r.remoteId,externalId:r.externalId,title:r.title,status:r.status,isMain:r.id===e.mainThreadId}:s.SKIP_UPDATE},M=class{constructor(e,s=A){this._core=e,this._runtimeFactory=s;const n=new t.LazyMemoizeSubject({path:{},getState:()=>({mainThreadId:e.mainThreadId,newThread:e.newThreadId,threads:e.threadIds,archivedThreads:e.archivedThreadIds,isLoading:e.isLoading,threadItems:e.threadData}),subscribe:t=>e.subscribe(t)});this._getState=n.getState.bind(n),this._mainThreadListItemRuntime=new r.ThreadListItemRuntimeImpl(new i.ShallowMemoizeSubject({path:{ref:"threadItems[main]",threadSelector:{type:"main"}},getState:()=>C(this._core,this._core.mainThreadId),subscribe:e=>this._core.subscribe(e)}),this._core),this.main=new s(new w({path:{ref:"threads.main",threadSelector:{type:"main"}},getState:()=>e.getMainThreadRuntimeCore(),subscribe:t=>e.subscribe(t)}),this._mainThreadListItemRuntime),this.__internal_bindMethods()}_getState;__internal_bindMethods(){this.switchToThread=this.switchToThread.bind(this),this.switchToNewThread=this.switchToNewThread.bind(this),this.getState=this.getState.bind(this),this.subscribe=this.subscribe.bind(this),this.getById=this.getById.bind(this),this.getItemById=this.getItemById.bind(this),this.getItemByIndex=this.getItemByIndex.bind(this),this.getArchivedItemByIndex=this.getArchivedItemByIndex.bind(this)}switchToThread(e){return this._core.switchToThread(e)}switchToNewThread(){return this._core.switchToNewThread()}getState(){return this._getState()}subscribe(e){return this._core.subscribe(e)}_mainThreadListItemRuntime;main;get mainItem(){return this._mainThreadListItemRuntime}getById(e){return new this._runtimeFactory(new w({path:{ref:"threads[threadId="+JSON.stringify(e)+"]",threadSelector:{type:"threadId",threadId:e}},getState:()=>this._core.getThreadRuntimeCore(e),subscribe:e=>this._core.subscribe(e)}),this.mainItem)}getItemByIndex(e){return new r.ThreadListItemRuntimeImpl(new i.ShallowMemoizeSubject({path:{ref:`threadItems[${e}]`,threadSelector:{type:"index",index:e}},getState:()=>C(this._core,this._core.threadIds[e]),subscribe:e=>this._core.subscribe(e)}),this._core)}getArchivedItemByIndex(e){return new r.ThreadListItemRuntimeImpl(new i.ShallowMemoizeSubject({path:{ref:`archivedThreadItems[${e}]`,threadSelector:{type:"archiveIndex",index:e}},getState:()=>C(this._core,this._core.archivedThreadIds[e]),subscribe:e=>this._core.subscribe(e)}),this._core)}getItemById(e){return new r.ThreadListItemRuntimeImpl(new i.ShallowMemoizeSubject({path:{ref:`threadItems[threadId=${e}]`,threadSelector:{type:"threadId",threadId:e}},getState:()=>C(this._core,e),subscribe:e=>this._core.subscribe(e)}),this._core)}},R=e.i(12164),k=class{constructor(e){this._core=e,this.threads=new M(e.threads),this._thread=this.threads.main,this.__internal_bindMethods()}threads;get threadList(){return this.threads}_thread;__internal_bindMethods(){this.switchToNewThread=this.switchToNewThread.bind(this),this.switchToThread=this.switchToThread.bind(this),this.registerModelContextProvider=this.registerModelContextProvider.bind(this),this.registerModelConfigProvider=this.registerModelConfigProvider.bind(this),this.reset=this.reset.bind(this)}get thread(){return this._thread}switchToNewThread(){return this._core.threads.switchToNewThread()}switchToThread(e){return this._core.threads.switchToThread(e)}registerModelContextProvider(e){return this._core.registerModelContextProvider(e)}registerModelConfigProvider(e){return this.registerModelContextProvider(e)}reset({initialMessages:e}={}){return this._core.threads.getMainThreadRuntimeCore().import(R.ExportedMessageRepository.fromArray(e??[]))}};e.s(["AssistantRuntimeImpl",()=>k],75704)},99433,e=>{"use strict";let t=(0,e.i(71775).default)("brain",[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]]);e.s(["default",()=>t])},74978,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={assign:function(){return l},searchParamsToUrlQuery:function(){return n},urlQueryToSearchParams:function(){return o}};for(var i in s)Object.defineProperty(r,i,{enumerable:!0,get:s[i]});function n(e){let t={};for(let[r,s]of e.entries()){let e=t[r];void 0===e?t[r]=s:Array.isArray(e)?e.push(s):t[r]=[e,s]}return t}function a(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function o(e){let t=new URLSearchParams;for(let[r,s]of Object.entries(e))if(Array.isArray(s))for(let e of s)t.append(r,a(e));else t.set(r,a(s));return t}function l(e,...t){for(let r of t){for(let t of r.keys())e.delete(t);for(let[t,s]of r.entries())e.append(t,s)}return e}},85915,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={formatUrl:function(){return o},formatWithValidation:function(){return c},urlObjectKeys:function(){return l}};for(var i in s)Object.defineProperty(r,i,{enumerable:!0,get:s[i]});let n=e.r(26543)._(e.r(74978)),a=/https?|ftp|gopher|file/;function o(e){let{auth:t,hostname:r}=e,s=e.protocol||"",i=e.pathname||"",o=e.hash||"",l=e.query||"",c=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?c=t+e.host:r&&(c=t+(~r.indexOf(":")?`[${r}]`:r),e.port&&(c+=":"+e.port)),l&&"object"==typeof l&&(l=String(n.urlQueryToSearchParams(l)));let u=e.search||l&&`?${l}`||"";return s&&!s.endsWith(":")&&(s+=":"),e.slashes||(!s||a.test(s))&&!1!==c?(c="//"+(c||""),i&&"/"!==i[0]&&(i="/"+i)):c||(c=""),o&&"#"!==o[0]&&(o="#"+o),u&&"?"!==u[0]&&(u="?"+u),i=i.replace(/[?#]/g,encodeURIComponent),u=u.replace("#","%23"),`${s}${c}${i}${u}${o}`}let l=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function c(e){return o(e)}},53671,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={DecodeError:function(){return m},MiddlewareNotFoundError:function(){return E},MissingStaticPage:function(){return S},NormalizeError:function(){return _},PageNotFoundError:function(){return y},SP:function(){return f},ST:function(){return b},WEB_VITALS:function(){return n},execOnce:function(){return a},getDisplayName:function(){return h},getLocationOrigin:function(){return c},getURL:function(){return u},isAbsoluteUrl:function(){return l},isResSent:function(){return d},loadGetInitialProps:function(){return g},normalizeRepeatedSlashes:function(){return p},stringifyError:function(){return v}};for(var i in s)Object.defineProperty(r,i,{enumerable:!0,get:s[i]});let n=["CLS","FCP","FID","INP","LCP","TTFB"];function a(e){let t,r=!1;return(...s)=>(r||(r=!0,t=e(...s)),t)}let o=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,l=e=>o.test(e);function c(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function u(){let{href:e}=window.location,t=c();return e.substring(t.length)}function h(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function d(e){return e.finished||e.headersSent}function p(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function g(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await g(t.Component,t.ctx)}:{};let s=await e.getInitialProps(t);if(r&&d(r))return s;if(!s)throw Object.defineProperty(Error(`"${h(e)}.getInitialProps()" should resolve to an object. But found "${s}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return s}let f="undefined"!=typeof performance,b=f&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class m extends Error{}class _ extends Error{}class y extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class S extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class E extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function v(e){return JSON.stringify({message:e.message,stack:e.stack})}},6636,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isLocalURL",{enumerable:!0,get:function(){return n}});let s=e.r(53671),i=e.r(56270);function n(e){if(!(0,s.isAbsoluteUrl)(e))return!0;try{let t=(0,s.getLocationOrigin)(),r=new URL(e,t);return r.origin===t&&(0,i.hasBasePath)(r.pathname)}catch(e){return!1}}},98790,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"errorOnce",{enumerable:!0,get:function(){return s}});let s=e=>{}},94772,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={default:function(){return m},useLinkStatus:function(){return y}};for(var i in s)Object.defineProperty(r,i,{enumerable:!0,get:s[i]});let n=e.r(26543),a=e.r(20299),o=n._(e.r(41295)),l=e.r(85915),c=e.r(52391),u=e.r(74464),h=e.r(53671),d=e.r(9959);e.r(33041);let p=e.r(44529),g=e.r(6636),f=e.r(68400);function b(e){return"string"==typeof e?e:(0,l.formatUrl)(e)}function m(t){var r;let s,i,n,[l,m]=(0,o.useOptimistic)(p.IDLE_LINK_STATUS),y=(0,o.useRef)(null),{href:S,as:E,children:v,prefetch:w=null,passHref:I,replace:x,shallow:T,scroll:A,onClick:C,onMouseEnter:M,onTouchStart:R,legacyBehavior:k=!1,onNavigate:B,ref:P,unstable_dynamicOnHover:O,...j}=t;s=v,k&&("string"==typeof s||"number"==typeof s)&&(s=(0,a.jsx)("a",{children:s}));let N=o.default.useContext(c.AppRouterContext),L=!1!==w,D=!1!==w?null===(r=w)||"auto"===r?f.FetchStrategy.PPR:f.FetchStrategy.Full:f.FetchStrategy.PPR,{href:F,as:U}=o.default.useMemo(()=>{let e=b(S);return{href:e,as:E?b(E):e}},[S,E]);if(k){if(s?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});i=o.default.Children.only(s)}let z=k?i&&"object"==typeof i&&i.ref:P,$=o.default.useCallback(e=>(null!==N&&(y.current=(0,p.mountLinkInstance)(e,F,N,D,L,m)),()=>{y.current&&((0,p.unmountLinkForCurrentNavigation)(y.current),y.current=null),(0,p.unmountPrefetchableInstance)(e)}),[L,F,N,D,m]),J={ref:(0,u.useMergedRef)($,z),onClick(t){k||"function"!=typeof C||C(t),k&&i.props&&"function"==typeof i.props.onClick&&i.props.onClick(t),!N||t.defaultPrevented||function(t,r,s,i,n,a,l){if("undefined"!=typeof window){let c,{nodeName:u}=t.currentTarget;if("A"===u.toUpperCase()&&((c=t.currentTarget.getAttribute("target"))&&"_self"!==c||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,g.isLocalURL)(r)){n&&(t.preventDefault(),location.replace(r));return}if(t.preventDefault(),l){let e=!1;if(l({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:h}=e.r(6556);o.default.startTransition(()=>{h(s||r,n?"replace":"push",a??!0,i.current)})}}(t,F,U,y,x,A,B)},onMouseEnter(e){k||"function"!=typeof M||M(e),k&&i.props&&"function"==typeof i.props.onMouseEnter&&i.props.onMouseEnter(e),N&&L&&(0,p.onNavigationIntent)(e.currentTarget,!0===O)},onTouchStart:function(e){k||"function"!=typeof R||R(e),k&&i.props&&"function"==typeof i.props.onTouchStart&&i.props.onTouchStart(e),N&&L&&(0,p.onNavigationIntent)(e.currentTarget,!0===O)}};return(0,h.isAbsoluteUrl)(U)?J.href=U:k&&!I&&("a"!==i.type||"href"in i.props)||(J.href=(0,d.addBasePath)(U)),n=k?o.default.cloneElement(i,J):(0,a.jsx)("a",{...j,...J,children:s}),(0,a.jsx)(_.Provider,{value:l,children:n})}e.r(98790);let _=(0,o.createContext)(p.IDLE_LINK_STATUS),y=()=>(0,o.useContext)(_);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},32307,e=>{"use strict";var t=e.i(41295),r=e.i(32704),s=class{#e;constructor(e){this.#e=e}get threads(){return this.#e.threads().getState()}get tools(){return this.#e.tools().getState()}get threadListItem(){return this.#e.threadListItem().getState()}get thread(){return this.#e.thread().getState()}get composer(){return this.#e.composer().getState()}get message(){return this.#e.message().getState()}get part(){return this.#e.part().getState()}get attachment(){return this.#e.attachment().getState()}},i=e=>{let i=(0,r.useAssistantApi)(),n=(0,t.useMemo)(()=>new s(i),[i]),a=(0,t.useSyncExternalStore)(i.subscribe,()=>e(n),()=>e(n));if((0,t.useDebugValue)(a),a instanceof s)throw Error("You tried to return the entire AssistantState. This is not supported due to technical limitations.");return a};e.s(["useAssistantState",()=>i])},64270,e=>{"use strict";var t=e.i(41295),r=e.i(95980),s=e.i(64150),i=e.i(20299),n=(e,n,a=[])=>{let o=(0,t.forwardRef)((e,t)=>{let o={},l={};Object.keys(e).forEach(t=>{a.includes(t)?o[t]=e[t]:l[t]=e[t]});let c=n(o)??void 0;return(0,i.jsx)(r.Primitive.button,{type:"button",...l,ref:t,disabled:l.disabled||!c,onClick:(0,s.composeEventHandlers)(l.onClick,c)})});return o.displayName=e,o};e.s(["createActionButton",()=>n])},43831,e=>{"use strict";var t=e.i(61572);e.s(["PlusIcon",()=>t.default])},65875,e=>{"use strict";var t=e.i(20299),r=e.i(41295),s=e.i(64150),i=e.i(47588),n=e.i(61535),a=e.i(48701),o=e.i(75288),l=e.i(32312),c=e.i(30748),u=e.i(41296),h=e.i(47039),d=e.i(42357),p=e.i(34340),g=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),f=r.forwardRef((e,r)=>(0,t.jsx)(h.Primitive.span,{...e,ref:r,style:{...g,...e.style}}));f.displayName="VisuallyHidden";var[b,m]=(0,n.createContextScope)("Tooltip",[l.createPopperScope]),_=(0,l.createPopperScope)(),y="TooltipProvider",S="tooltip.open",[E,v]=b(y),w=e=>{let{__scopeTooltip:s,delayDuration:i=700,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:o}=e,l=r.useRef(!0),c=r.useRef(!1),u=r.useRef(0);return r.useEffect(()=>{let e=u.current;return()=>window.clearTimeout(e)},[]),(0,t.jsx)(E,{scope:s,isOpenDelayedRef:l,delayDuration:i,onOpen:r.useCallback(()=>{window.clearTimeout(u.current),l.current=!1},[]),onClose:r.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>l.current=!0,n)},[n]),isPointerInTransitRef:c,onPointerInTransitChange:r.useCallback(e=>{c.current=e},[]),disableHoverableContent:a,children:o})};w.displayName=y;var I="Tooltip",[x,T]=b(I),A=e=>{let{__scopeTooltip:s,children:i,open:n,defaultOpen:a,onOpenChange:c,disableHoverableContent:u,delayDuration:h}=e,d=v(I,e.__scopeTooltip),g=_(s),[f,b]=r.useState(null),m=(0,o.useId)(),y=r.useRef(0),E=u??d.disableHoverableContent,w=h??d.delayDuration,T=r.useRef(!1),[A,C]=(0,p.useControllableState)({prop:n,defaultProp:a??!1,onChange:e=>{e?(d.onOpen(),document.dispatchEvent(new CustomEvent(S))):d.onClose(),c?.(e)},caller:I}),M=r.useMemo(()=>A?T.current?"delayed-open":"instant-open":"closed",[A]),R=r.useCallback(()=>{window.clearTimeout(y.current),y.current=0,T.current=!1,C(!0)},[C]),k=r.useCallback(()=>{window.clearTimeout(y.current),y.current=0,C(!1)},[C]),B=r.useCallback(()=>{window.clearTimeout(y.current),y.current=window.setTimeout(()=>{T.current=!0,C(!0),y.current=0},w)},[w,C]);return r.useEffect(()=>()=>{y.current&&(window.clearTimeout(y.current),y.current=0)},[]),(0,t.jsx)(l.Root,{...g,children:(0,t.jsx)(x,{scope:s,contentId:m,open:A,stateAttribute:M,trigger:f,onTriggerChange:b,onTriggerEnter:r.useCallback(()=>{d.isOpenDelayedRef.current?B():R()},[d.isOpenDelayedRef,B,R]),onTriggerLeave:r.useCallback(()=>{E?k():(window.clearTimeout(y.current),y.current=0)},[k,E]),onOpen:R,onClose:k,disableHoverableContent:E,children:i})})};A.displayName=I;var C="TooltipTrigger",M=r.forwardRef((e,n)=>{let{__scopeTooltip:a,...o}=e,c=T(C,a),u=v(C,a),d=_(a),p=r.useRef(null),g=(0,i.useComposedRefs)(n,p,c.onTriggerChange),f=r.useRef(!1),b=r.useRef(!1),m=r.useCallback(()=>f.current=!1,[]);return r.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),(0,t.jsx)(l.Anchor,{asChild:!0,...d,children:(0,t.jsx)(h.Primitive.button,{"aria-describedby":c.open?c.contentId:void 0,"data-state":c.stateAttribute,...o,ref:g,onPointerMove:(0,s.composeEventHandlers)(e.onPointerMove,e=>{"touch"!==e.pointerType&&(b.current||u.isPointerInTransitRef.current||(c.onTriggerEnter(),b.current=!0))}),onPointerLeave:(0,s.composeEventHandlers)(e.onPointerLeave,()=>{c.onTriggerLeave(),b.current=!1}),onPointerDown:(0,s.composeEventHandlers)(e.onPointerDown,()=>{c.open&&c.onClose(),f.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:(0,s.composeEventHandlers)(e.onFocus,()=>{f.current||c.onOpen()}),onBlur:(0,s.composeEventHandlers)(e.onBlur,c.onClose),onClick:(0,s.composeEventHandlers)(e.onClick,c.onClose)})})});M.displayName=C;var R="TooltipPortal",[k,B]=b(R,{forceMount:void 0}),P=e=>{let{__scopeTooltip:r,forceMount:s,children:i,container:n}=e,a=T(R,r);return(0,t.jsx)(k,{scope:r,forceMount:s,children:(0,t.jsx)(u.Presence,{present:s||a.open,children:(0,t.jsx)(c.Portal,{asChild:!0,container:n,children:i})})})};P.displayName=R;var O="TooltipContent",j=r.forwardRef((e,r)=>{let s=B(O,e.__scopeTooltip),{forceMount:i=s.forceMount,side:n="top",...a}=e,o=T(O,e.__scopeTooltip);return(0,t.jsx)(u.Presence,{present:i||o.open,children:o.disableHoverableContent?(0,t.jsx)(U,{side:n,...a,ref:r}):(0,t.jsx)(N,{side:n,...a,ref:r})})}),N=r.forwardRef((e,s)=>{let n=T(O,e.__scopeTooltip),a=v(O,e.__scopeTooltip),o=r.useRef(null),l=(0,i.useComposedRefs)(s,o),[c,u]=r.useState(null),{trigger:h,onClose:d}=n,p=o.current,{onPointerInTransitChange:g}=a,f=r.useCallback(()=>{u(null),g(!1)},[g]),b=r.useCallback((e,t)=>{let r,s=e.currentTarget,i={x:e.clientX,y:e.clientY},n=function(e,t){let r=Math.abs(t.top-e.y),s=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),n=Math.abs(t.left-e.x);switch(Math.min(r,s,i,n)){case n:return"left";case i:return"right";case r:return"top";case s:return"bottom";default:throw Error("unreachable")}}(i,s.getBoundingClientRect());u(((r=[...function(e,t,r=5){let s=[];switch(t){case"top":s.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":s.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":s.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":s.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r})}return s}(i,n),...function(e){let{top:t,right:r,bottom:s,left:i}=e;return[{x:i,y:t},{x:r,y:t},{x:r,y:s},{x:i,y:s}]}(t.getBoundingClientRect())].slice()).sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:1*!!(e.y>t.y)),function(e){if(e.length<=1)return e.slice();let t=[];for(let r=0;r<e.length;r++){let s=e[r];for(;t.length>=2;){let e=t[t.length-1],r=t[t.length-2];if((e.x-r.x)*(s.y-r.y)>=(e.y-r.y)*(s.x-r.x))t.pop();else break}t.push(s)}t.pop();let r=[];for(let t=e.length-1;t>=0;t--){let s=e[t];for(;r.length>=2;){let e=r[r.length-1],t=r[r.length-2];if((e.x-t.x)*(s.y-t.y)>=(e.y-t.y)*(s.x-t.x))r.pop();else break}r.push(s)}return(r.pop(),1===t.length&&1===r.length&&t[0].x===r[0].x&&t[0].y===r[0].y)?t:t.concat(r)}(r))),g(!0)},[g]);return r.useEffect(()=>()=>f(),[f]),r.useEffect(()=>{if(h&&p){let e=e=>b(e,p),t=e=>b(e,h);return h.addEventListener("pointerleave",e),p.addEventListener("pointerleave",t),()=>{h.removeEventListener("pointerleave",e),p.removeEventListener("pointerleave",t)}}},[h,p,b,f]),r.useEffect(()=>{if(c){let e=e=>{let t=e.target,r={x:e.clientX,y:e.clientY},s=h?.contains(t)||p?.contains(t),i=!function(e,t){let{x:r,y:s}=e,i=!1;for(let e=0,n=t.length-1;e<t.length;n=e++){let a=t[e],o=t[n],l=a.x,c=a.y,u=o.x,h=o.y;c>s!=h>s&&r<(u-l)*(s-c)/(h-c)+l&&(i=!i)}return i}(r,c);s?f():i&&(f(),d())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[h,p,c,d,f]),(0,t.jsx)(U,{...e,ref:l})}),[L,D]=b(I,{isInside:!1}),F=(0,d.createSlottable)("TooltipContent"),U=r.forwardRef((e,s)=>{let{__scopeTooltip:i,children:n,"aria-label":o,onEscapeKeyDown:c,onPointerDownOutside:u,...h}=e,d=T(O,i),p=_(i),{onClose:g}=d;return r.useEffect(()=>(document.addEventListener(S,g),()=>document.removeEventListener(S,g)),[g]),r.useEffect(()=>{if(d.trigger){let e=e=>{let t=e.target;t?.contains(d.trigger)&&g()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[d.trigger,g]),(0,t.jsx)(a.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:e=>e.preventDefault(),onDismiss:g,children:(0,t.jsxs)(l.Content,{"data-state":d.stateAttribute,...p,...h,ref:s,style:{...h.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[(0,t.jsx)(F,{children:n}),(0,t.jsx)(L,{scope:i,isInside:!0,children:(0,t.jsx)(f,{id:d.contentId,role:"tooltip",children:o||n})})]})})});j.displayName=O;var z="TooltipArrow",$=r.forwardRef((e,r)=>{let{__scopeTooltip:s,...i}=e,n=_(s);return D(z,s).isInside?null:(0,t.jsx)(l.Arrow,{...n,...i,ref:r})});$.displayName=z;var J=e.i(7071);function V({delayDuration:e=0,...r}){return(0,t.jsx)(w,{"data-slot":"tooltip-provider",delayDuration:e,...r})}function q({...e}){return(0,t.jsx)(V,{children:(0,t.jsx)(A,{"data-slot":"tooltip",...e})})}function K({...e}){return(0,t.jsx)(M,{"data-slot":"tooltip-trigger",...e})}function H({className:e,sideOffset:r=0,children:s,...i}){return(0,t.jsx)(P,{children:(0,t.jsxs)(j,{"data-slot":"tooltip-content",sideOffset:r,className:(0,J.cn)("z-50 w-fit origin-(--radix-tooltip-content-transform-origin) animate-in rounded-md bg-foreground px-3 py-1.5 text-xs text-balance text-background fade-in-0 zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95",e),...i,children:[s,(0,t.jsx)($,{className:"z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px] bg-foreground fill-foreground"})]})})}e.s(["Tooltip",()=>q,"TooltipContent",()=>H,"TooltipProvider",()=>V,"TooltipTrigger",()=>K],65875)},55429,e=>{"use strict";var t=e.i(20299),r=e.i(94331),s=e.i(41295),i=e.i(25111),n=e.i(65875),a=e.i(7071);let o=(0,s.forwardRef)(({children:e,tooltip:s,side:o="bottom",className:l,...c},u)=>(0,t.jsxs)(n.Tooltip,{children:[(0,t.jsx)(n.TooltipTrigger,{asChild:!0,children:(0,t.jsxs)(i.Button,{variant:"ghost",size:"icon",...c,className:(0,a.cn)("aui-button-icon size-6 p-1",l),ref:u,children:[(0,t.jsx)(r.Slottable,{children:e}),(0,t.jsx)("span",{className:"aui-sr-only sr-only",children:s})]})}),(0,t.jsx)(n.TooltipContent,{side:o,children:s})]}));o.displayName="TooltipIconButton",e.s(["TooltipIconButton",0,o])},42424,e=>{"use strict";let t=(0,e.i(71775).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["ChevronRightIcon",()=>t],42424)}]);