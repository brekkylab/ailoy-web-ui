(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,36089,e=>{"use strict";var t=class{_providers=new Set;getModelContext(){return Array.from(this._providers).map(e=>e.getModelContext()).sort((e,t)=>(t.priority??0)-(e.priority??0)).reduce((e,t)=>{if(t.system&&(e.system?e.system+=`

${t.system}`:e.system=t.system),t.tools)for(let[r,i]of Object.entries(t.tools)){let t=e.tools?.[r];if(t&&t!==i)throw Error(`You tried to define a tool with the name ${r}, but it already exists.`);e.tools||(e.tools={}),e.tools[r]=i}return t.config&&(e.config={...e.config,...t.config}),t.callSettings&&(e.callSettings={...e.callSettings,...t.callSettings}),e},{})}registerModelContextProvider(e){this._providers.add(e);let t=e.subscribe?.(()=>{this.notifySubscribers()});return this.notifySubscribers(),()=>{this._providers.delete(e),t?.(),this.notifySubscribers()}}_subscribers=new Set;notifySubscribers(){for(let e of this._subscribers)e()}subscribe(e){return this._subscribers.add(e),()=>this._subscribers.delete(e)}};e.s(["CompositeContextProvider",()=>t],36089)},41619,88744,39275,48637,68531,12594,16181,90308,37469,51416,14453,68146,57464,66170,92219,35305,37036,93722,17243,e=>{"use strict";e.s(["AssistantProvider",()=>ef,"createAssistantApiField",()=>ea,"extendApi",()=>ep,"useAssistantApi",()=>ed,"useAssistantApiImpl",()=>eu,"useExtendedAssistantApi",()=>eh],41619);var t,r=e.i(19243);function i(e){let t=e[s];if(!t)throw Error("ResourceElement.type is not a valid Resource");return t}var s=Symbol("fnSymbol"),n=null;function o(){if(!n)throw Error("No resource fiber available");return n}function a(e,t){return{resourceFn:e,scheduleRerender:t,cells:[],currentIndex:0,renderContext:void 0,isFirstRender:!0,isMounted:!1,isNeverMounted:!0}}function l(e){e.isMounted=!1;let t=null;for(let r=e.cells.length-1;r>=0;r--){let i=e.cells[r];if(i?.type==="effect"&&i.mounted&&i.cleanup)try{i.cleanup()}catch(e){null==t&&(t=e)}finally{i.mounted=!1}}if(null!=t)throw t}function c(e,t){let r={commitTasks:[],props:t,state:void 0};e.currentIndex=0;let i=n;n=e;try{if((()=>{e.renderContext=r;try{r.state=e.resourceFn(t)}finally{e.renderContext=void 0}})(),e.isFirstRender=!1,e.cells.length!==e.currentIndex)throw Error(`Rendered ${e.currentIndex} hooks but expected ${e.cells.length}. Hooks must be called in the exact same order in every render.`)}finally{n=i}return r}function u(e,t){e.isMounted=!0,e.isNeverMounted=!1,t.commitTasks.forEach(t=>{let r=t.cellIndex,i=e.cells[r];if("effect"!==i.type)throw Error("Cannot find effect cell");let s=!0;if(void 0!==i.deps&&void 0!==t.deps&&(s=i.deps.length!==t.deps.length||i.deps.some((e,r)=>!Object.is(e,t.deps[r]))),s){if(i.mounted){if(typeof i.deps!=typeof t.deps)throw Error("tapEffect called with and without dependencies across re-renders");try{i.mounted&&i.cleanup&&i.cleanup()}finally{i.mounted=!1}}try{let e=t.effect();if(void 0!==e&&"function"!=typeof e)throw Error(`An effect function must either return a cleanup function or nothing. Received: ${typeof e}`);i.mounted=!0,i.cleanup="function"==typeof e?e:void 0,i.deps=t.deps}catch(e){throw e}}})}var h=!0===globalThis.__ASSISTANT_UI_DISABLE_LAYOUT_EFFECT__?r.useEffect:r.useLayoutEffect;function d(e){let[,t]=(0,r.useState)({}),s=(0,r.useMemo)(()=>a(i(e.type),()=>t({})),[e.type,t]),n=c(s,e.props);return h(()=>()=>l(s),[]),h(()=>{u(s,n)}),n.state}e.s(["useResource",()=>d],88744);var p=e=>"string"==typeof e?{scope:e.split(".")[0],event:e}:{scope:e.scope,event:e.event},f=(e,t,r)=>t===e;e.s(["checkEventScope",()=>f,"normalizeEventSelector",()=>p],39275);let g=e=>{let t,r=new Set,i=(e,i)=>{let s="function"==typeof e?e(t):e;if(!Object.is(s,t)){let e=t;t=(null!=i?i:"object"!=typeof s||null===s)?s:Object.assign({},t,s),r.forEach(r=>r(t,e))}},s=()=>t,n={setState:i,getState:s,getInitialState:()=>o,subscribe:e=>(r.add(e),()=>r.delete(e))},o=t=e(i,s,n);return n},m=e=>{let t=e?g(e):g,i=e=>(function(e,t=e=>e){let i=r.default.useSyncExternalStore(e.subscribe,r.default.useCallback(()=>t(e.getState()),[e,t]),r.default.useCallback(()=>t(e.getInitialState()),[e,t]));return r.default.useDebugValue(i),i})(t,e);return Object.assign(i,t),i},b=e=>e?m(e):m;function y(e,t){function r(r){let i=e(r);return i?i[t]:null}return{[t]:function(e){let t,i=!1;"function"==typeof e?t=e:e&&"object"==typeof e&&(i=!!e.optional,t=e.selector);let s=r({optional:i});return s?t?s(t):s():null},[`${t}Store`]:r}}e.s(["create",()=>b],48637),e.s(["createContextStoreHook",()=>y],68531);var _=(0,r.createContext)(null),{useThreadViewport:S,useThreadViewportStore:v}=y(function(e){let t=(0,r.useContext)(_);if(!e?.optional&&!t)throw Error("This component must be used within ThreadPrimitive.Viewport.");return t},"useThreadViewport");e.s(["ThreadViewportContext",()=>_,"useThreadViewport",()=>S,"useThreadViewportStore",()=>v],12594);var w=e=>e;e.s(["writableStore",()=>w],16181);var x=e.i(54011),E=({children:e})=>{let t=(()=>{let e=v({optional:!0}),[t]=(0,r.useState)(()=>{let e;return e=new Set,b(()=>({isAtBottom:!0,scrollToBottom:()=>{for(let t of e)t()},onScrollToBottom:t=>(e.add(t),()=>{e.delete(t)})}))});return(0,r.useEffect)(()=>e?.getState().onScrollToBottom(()=>{t.getState().scrollToBottom()}),[e,t]),(0,r.useEffect)(()=>{if(e)return t.subscribe(t=>{e.getState().isAtBottom!==t.isAtBottom&&w(e).setState({isAtBottom:t.isAtBottom})})},[t,e]),t})(),[i]=(0,r.useState)(()=>({useThreadViewport:t}));return(0,x.jsx)(_.Provider,{value:i,children:e})};e.s(["ThreadViewportProvider",()=>E],90308);var T=()=>{if(t)return t;let e=()=>({apis:new Map,nextId:0,listeners:new Set});if("undefined"==typeof window)return t=e();let r=window.__ASSISTANT_UI_DEVTOOLS_HOOK__;if(r)return t=r,r;let i=e();return window.__ASSISTANT_UI_DEVTOOLS_HOOK__=i,t=i,i},I=class e{static MAX_EVENT_LOGS_PER_API=200;static register(t){let r=T();for(let e of r.apis.values())if(e.api===t)return()=>{};let i=r.nextId++,s=t.on?.("*",t=>{let s=r.apis.get(i);s&&(s.logs.push({time:new Date,event:t.event,data:t.payload}),s.logs.length>e.MAX_EVENT_LOGS_PER_API&&(s.logs=s.logs.slice(-e.MAX_EVENT_LOGS_PER_API)),e.notifyListeners(i))}),n=t.subscribe?.(()=>{e.notifyListeners(i)});return r.apis.set(i,{api:t,logs:[]}),e.notifyListeners(i),()=>{let t=T();t.apis.get(i)&&(s?.(),n?.(),t.apis.delete(i),e.notifyListeners(i))}}static notifyListeners(e){T().listeners.forEach(t=>t(e))}};function A(e){let t=function(e){let t=o(),r=t.currentIndex++;if(!t.isFirstRender&&r>=t.cells.length)throw Error("Rendered more hooks than during the previous render. Hooks must be called in the exact same order in every render.");if(!t.cells[r]){let i={type:"state",value:"function"==typeof e?e():e,set:e=>{let r=i.value,s="function"==typeof e?e(r):e;if(!Object.is(r,s)){i.value=s;if(t.renderContext)throw Error("Resource updated during render");if(t.isNeverMounted)throw Error("Resource updated before mount");t.isMounted&&t.scheduleRerender()}}};t.cells[r]=i}let i=t.cells[r];if("state"!==i.type)throw Error("Hook order changed between renders");return i}(e);return[t.value,t.set]}function C(e){let[t]=A(()=>({current:e}));return t}e.s(["tapState",()=>A],37469);var R=(e,t)=>{let r=C();return r.current||(r.current={value:e(),deps:t}),((e,t)=>{if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!Object.is(e[r],t[r]))return!1;return!0})(r.current.deps,t)||(r.current.value=e(),r.current.deps=t),r.current.value};function M(e){let t=(e,r)=>({type:t,props:e,...r?.key!==void 0&&{key:r.key}});return t[s]=e,t}function k(e){return i(e.type)(e.props)}function P(e,t){let r=o(),i=function(){let e=o(),t=e.currentIndex++;if(!e.isFirstRender&&t>=e.cells.length)throw Error("Rendered more hooks than during the previous render. Hooks must be called in the exact same order in every render.");if(e.cells[t]||(e.cells[t]={type:"effect",mounted:!1}),"effect"!==e.cells[t].type)throw Error("Hook order changed between renders");return t}();r.renderContext.commitTasks.push({effect:e,deps:t,cellIndex:i})}function O(e,t){let[r,s]=A({}),n=R(()=>a(i(e.type),()=>s({})),[e.type]),o=t?R(()=>e.props,t):e.props,h=R(()=>c(n,o),[n,o,r]);return P(()=>()=>l(n),[n]),P(()=>{u(n,h)},[n,h]),h.state}e.s(["tapMemo",()=>R],51416),e.s(["resource",()=>M],14453),e.s(["tapInlineResource",()=>k],68146),e.s(["tapEffect",()=>P],57464);var B=class{constructor(e){this.getApi=e}get(e,t){return this.getApi()[t]}ownKeys(){return Object.keys(this.getApi())}has(e,t){return t in this.getApi()}getOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(this.getApi(),t)}set(){return!1}defineProperty(){return!1}deleteProperty(){return!1}},j=(e,t)=>{let r=C(e);P(()=>{r.current=e});let i=R(()=>new Proxy({},new B(()=>r.current)),[]),s=t?.key,n=e.getState();return R(()=>({key:s,state:n,api:i}),[n,s])};e.s(["tapApi",()=>j],66170);var L=Symbol("tap.Context"),N=e=>({[L]:e}),D=(e,t,r)=>{let i=e[L];e[L]=t;try{return r()}finally{e[L]=i}},F=e=>e[L],$=N(null),U=(e,t)=>D($,e,t),z=()=>{let e=F($);if(!e)throw Error("Model context is not available in this context");return e};e.s(["tapModelContext",()=>z,"withModelContextProvider",()=>U],92219);var H=M(({toolkit:e})=>{let[t,r]=A(()=>({tools:{}})),i=z();P(()=>{if(!e)return;let t=[];for(let[r,i]of Object.entries(e))i.render&&t.push(s(r,i.render));let r=Object.entries(e).reduce((e,[t,r])=>{let{render:i,...s}=r;return e[t]=s,e},{});return t.push(i.register({getModelContext:()=>({tools:r})})),()=>{t.forEach(e=>e())}},[e,i]);let s=(e,t)=>(r(r=>({...r,tools:{...r.tools,[e]:[...r.tools[e]??[],t]}})),()=>{r(r=>({...r,tools:{...r.tools,[e]:r.tools[e]?.filter(e=>e!==t)??[]}}))});return j({getState:()=>t,setToolUI:s})}),V=[],J=!1;function q(){J=!1;let e=V;for(let t of(V=[],e))try{t()}catch(e){console.error("Error in scheduled task:",e)}}var Y=class e{constructor(e){this._task=e}_isDirty=!1;_hasScheduledTask=!1;_isFlushing=!1;static MAX_FLUSH_DEPTH=50;get isDirty(){return this._isDirty}markDirty(){if(this._isDirty=!0,!this._hasScheduledTask&&!this._isFlushing){var e;this._hasScheduledTask=!0,e=()=>{this._hasScheduledTask=!1,this.flushSync()},V.push(e),J||(J=!0,queueMicrotask(q))}}flushSync(){if(this._isFlushing)return;this._isFlushing=!0;let t=0;try{for(;this._isDirty;){if(++t>e.MAX_FLUSH_DEPTH)throw Error("Maximum update depth exceeded. This can happen when a resource repeatedly calls setState inside tapEffect.");this._isDirty=!1,this._task()}}finally{this._isFlushing=!1}}},K=({element:e,onUpdateInput:t,onFlushSync:r,onDispose:i})=>{let[s,n]=A(e.props),o=k({type:e.type,props:s}),a=C(new Set).current,l=C(o);return P(()=>{o!==l.current&&(l.current=o,a.forEach(e=>e()))}),R(()=>({getState:()=>l.current,subscribe:e=>(a.add(e),()=>a.delete(e)),updateInput:e=>{t(),n(()=>e)},flushSync:r,dispose:i}),[])},W=M(e=>{let t=R(()=>((e,t=!1)=>{let r=!t,i={element:e,onUpdateInput:()=>{r||(r=!0,u(n,o))},onFlushSync:()=>{s.flushSync()},onDispose:()=>l(n)},s=new Y(()=>{o=c(n,i),r&&u(n,o)}),n=a(K,()=>s.markDirty()),o=c(n,i);return r&&u(n,o),o.state})(e,!0),[e.type]);return P(()=>{t.updateInput(e.props)}),t});e.s(["asStore",()=>W],35305);var X=M(()=>R(()=>{let e=new Map;return{on:(t,r)=>{e.has(t)||e.set(t,new Set);let i=e.get(t);return i.add(r),()=>{i.delete(r),0===i.size&&e.delete(t)}},emit:(t,r)=>{let i=e.get(t),s=e.get("*");(i||s)&&queueMicrotask(()=>{if(i)for(let e of i)e(r);if(s)for(let e of s)e({event:t,payload:r})})}}},[])),G=N(null),Q=(e,t)=>D(G,e,t),Z=()=>{let e=F(G);if(!e)throw Error("Events context is not available");return e};e.s(["tapEvents",()=>Z,"withEventsProvider",()=>Q],37036);var ee=e.i(36089),et=M(()=>{let[e]=A(()=>({})),t=new ee.CompositeContextProvider;return j({getState:()=>e,getModelContext:()=>t.getModelContext(),subscribe:e=>t.subscribe(e),register:e=>t.registerModelContextProvider(e)})}),er=M(({threads:e,modelContext:t,tools:r})=>{let i=k(X()),{threads:s,tools:n,modelContext:o}=Q(i,()=>{let i=O(t??et(),[t]);return U(i.api,()=>({modelContext:i,tools:O(r??H({}),[r]),threads:O(e,[e])}))}),a=R(()=>({threads:s.state,tools:n.state,modelContext:o.state}),[s.state,n.state,o.state]);return j({getState:()=>a,threads:s.api,tools:n.api,modelContext:o.api,on:i.on})});function ei(e){let t=new Set;e.forEach((e,r)=>{if(void 0===e.key)throw Error(`tapResources: All resource elements must have a key. Element at index ${r} is missing a key.`);if(t.has(e.key))throw Error(`tapResources: Duplicate key "${e.key}" found. All keys must be unique.`);t.add(e.key)});let[r,s]=A({}),n=R(()=>new Map(e.map(e=>[e.key,e])),[e]),[o]=A(()=>new Map),h=R(()=>{let e=new Map,t=new Set;return n.forEach((r,n)=>{t.add(n);let u=o.get(n);u&&u.resourceFn===i(r.type)||(u&&l(u),u=a(i(r.type),()=>s({})),o.set(n,u));let h=c(u,r.props);e.set(n,h)}),o.forEach((e,r)=>{t.has(r)||(l(e),o.delete(r))}),e},[n,r]);return P(()=>{h.forEach((e,t)=>{let r=o.get(t);r&&u(r,e)})},[h,o]),P(()=>()=>{o.forEach(e=>{l(e)}),o.clear()},[o]),R(()=>e.map(e=>h.get(e.key)?.state),[e,h])}e.s(["DerivedScope",()=>es,"DerivedScopes",()=>eo],17243),e.s(["tapResources",()=>ei],93722);var es=M(e=>{let t=C(e.get);return P(()=>{t.current=e.get}),R(()=>ea({source:e.source,query:e.query,get:()=>t.current()}),[e.source,JSON.stringify(e.query)])}),en=M(e=>{let t=O(e.scopeElement);return R(()=>[e.fieldName,t],[e.fieldName,t])}),eo=M(e=>{let{on:t,subscribe:r,flushSync:i,...s}=e,n=C({on:t,subscribe:r,flushSync:i});P(()=>{n.current={on:t,subscribe:r,flushSync:i}});let o=ei(Object.entries(s).map(([e,t])=>en({fieldName:e,scopeElement:t},{key:e})));return R(()=>{let e=Object.fromEntries(o),{on:t,subscribe:r,flushSync:i}=n.current;return t&&(e.on=(e,r)=>t(e,r)),r&&(e.subscribe=e=>r(e)),i&&(e.flushSync=()=>i()),e},[...o])}),ea=e=>{let t=e.get;return t.source=e.source,t.query=e.query,t},el=()=>()=>{},ec=(0,r.createContext)({threads:ea({source:null,query:{},get:()=>{throw Error("Threads is only available inside <AssistantProvider />")}}),tools:ea({source:null,query:{},get:()=>{throw Error("Tools is only available inside <AssistantProvider />")}}),modelContext:ea({source:null,query:{},get:()=>{throw Error("ModelContext is only available inside <AssistantProvider />")}}),threadListItem:ea({source:null,query:{},get:()=>{throw Error("ThreadListItem is only available inside <AssistantProvider />")}}),thread:ea({source:null,query:{},get:()=>{throw Error("Thread is only available inside <AssistantProvider />")}}),composer:ea({source:null,query:{},get:()=>{throw Error("Composer is only available inside <AssistantProvider />")}}),message:ea({source:null,query:{},get:()=>{throw Error("Message is only available inside <ThreadPrimitive.Messages />")}}),part:ea({source:null,query:{},get:()=>{throw Error("Part is only available inside <MessagePrimitive.Parts />")}}),attachment:ea({source:null,query:{},get:()=>{throw Error("Attachment is only available inside <MessagePrimitive.Attachments /> or <ComposerPrimitive.Attachments />")}}),subscribe:el,flushSync:el,on:e=>{let{scope:t}=p(e);throw Error(`Event scope is not available in this component: ${t}`)}}),eu=()=>(0,r.useContext)(ec),eh=e=>{let t=eu(),i=d(eo(e));return(0,r.useMemo)(()=>ep(t,i),[t,i])};function ed(e){let t,i,s;if(!e)return eu();return t=eu(),i=d(W(er(e))),s=(0,r.useMemo)(()=>{let e;return e=()=>i.getState().api.threads.item("main"),{threads:ea({source:"root",query:{},get:()=>i.getState().api.threads}),tools:ea({source:"root",query:{},get:()=>i.getState().api.tools}),modelContext:ea({source:"root",query:{},get:()=>i.getState().api.modelContext}),thread:ea({source:"threads",query:{type:"main"},get:()=>i.getState().api.threads.thread("main")}),threadListItem:ea({source:"threads",query:{type:"main"},get:()=>e()}),composer:ea({source:"thread",query:{},get:()=>i.getState().api.threads.thread("main").composer}),on(t,r){let{event:s,scope:n}=p(t);if("*"===n)return i.getState().api.on(s,r);if(f("thread",n,s)||f("thread-list-item",n,s)||f("composer",n,s))return i.getState().api.on(s,t=>{t.threadId===e().getState().id&&r(t)});throw Error(`Event scope is not available in this component: ${n}`)},subscribe:i.subscribe,flushSync:i.flushSync}},[i]),(0,r.useMemo)(()=>ep(t,s),[t,s])}var ep=(e,t)=>{var r,i,s,n;let o=t.subscribe,a=t.flushSync;return{...e,...t,subscribe:(r=e.subscribe,i=o??el,r===el?i:i===el?r:(...e)=>{let t=r(...e),s=i(...e);return()=>{t(),s()}}),flushSync:(s=e.flushSync,n=a??el,s===el?n:n===el?s:(...e)=>{s(...e),n(...e)})}},ef=({api:e,children:t,devToolsVisible:i=!0})=>((0,r.useEffect)(()=>{if(i&&e.subscribe)return I.register(e)},[e,i]),(0,x.jsx)(ec.Provider,{value:e,children:(0,x.jsx)(E,{children:t})}))},65291,e=>{"use strict";var t=Symbol("innerMessage"),r=Symbol("innerMessages"),i=e=>e[t],s=[],n=e=>{let i="messages"in e?e.messages:e,n=i[r]||i[t];return n?Array.isArray(n)?n:(i[r]=[n],i[r]):s};e.s(["getExternalStoreMessage",()=>i,"getExternalStoreMessages",()=>n,"symbolInnerMessage",()=>t])},89293,(e,t,r)=>{"use strict";var i=e.i(40680);let s=void 0!==i.Buffer,n=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,o=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function a(e,t,r){null==r&&null!==t&&"object"==typeof t&&(r=t,t=void 0),s&&i.Buffer.isBuffer(e)&&(e=e.toString()),e&&65279===e.charCodeAt(0)&&(e=e.slice(1));let a=JSON.parse(e,t);if(null===a||"object"!=typeof a)return a;let c=r&&r.protoAction||"error",u=r&&r.constructorAction||"error";if("ignore"===c&&"ignore"===u)return a;if("ignore"!==c&&"ignore"!==u){if(!1===n.test(e)&&!1===o.test(e))return a}else if("ignore"!==c&&"ignore"===u){if(!1===n.test(e))return a}else if(!1===o.test(e))return a;return l(a,{protoAction:c,constructorAction:u,safe:r&&r.safe})}function l(e,{protoAction:t="error",constructorAction:r="error",safe:i}={}){let s=[e];for(;s.length;){let e=s;for(let n of(s=[],e)){if("ignore"!==t&&Object.prototype.hasOwnProperty.call(n,"__proto__")){if(!0===i)return null;if("error"===t)throw SyntaxError("Object contains forbidden prototype property");delete n.__proto__}if("ignore"!==r&&Object.prototype.hasOwnProperty.call(n,"constructor")&&null!==n.constructor&&"object"==typeof n.constructor&&Object.prototype.hasOwnProperty.call(n.constructor,"prototype")){if(!0===i)return null;if("error"===r)throw SyntaxError("Object contains forbidden prototype property");delete n.constructor}for(let e in n){let t=n[e];t&&"object"==typeof t&&s.push(t)}}}return e}function c(e,t,r){let{stackTraceLimit:i}=Error;Error.stackTraceLimit=0;try{return a(e,t,r)}finally{Error.stackTraceLimit=i}}t.exports=c,t.exports.default=c,t.exports.parse=c,t.exports.safeParse=function(e,t){let{stackTraceLimit:r}=Error;Error.stackTraceLimit=0;try{return a(e,t,{safe:!0})}catch{return}finally{Error.stackTraceLimit=r}},t.exports.scan=l},82166,e=>{"use strict";var t=e.i(89293),r=Symbol("aui.parse-partial-json-object.meta"),i=e=>{if(0===e.length)return{[r]:{state:"partial",partialPath:[]}};try{let i=t.default.parse(e);if("object"!=typeof i||null===i)throw Error("argsText is expected to be an object");return i[r]={state:"complete",partialPath:[]},i}catch{try{let[i,s]=function(e){let t,r=["ROOT"],i=-1,s=null,n=[];function o(){void 0!==t&&(n.push(JSON.parse('"'+t+'"')),t=void 0)}function a(e,t,n){switch(e){case'"':i=t,r.pop(),r.push(n),r.push("INSIDE_STRING"),o();break;case"f":case"t":case"n":i=t,s=t,r.pop(),r.push(n),r.push("INSIDE_LITERAL");break;case"-":r.pop(),r.push(n),r.push("INSIDE_NUMBER"),o();break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":i=t,r.pop(),r.push(n),r.push("INSIDE_NUMBER"),o();break;case"{":i=t,r.pop(),r.push(n),r.push("INSIDE_OBJECT_START"),o();break;case"[":i=t,r.pop(),r.push(n),r.push("INSIDE_ARRAY_START"),o()}}function l(e,s){switch(e){case",":r.pop(),r.push("INSIDE_OBJECT_AFTER_COMMA");break;case"}":i=s,r.pop(),t=n.pop()}}function c(e,s){switch(e){case",":r.pop(),r.push("INSIDE_ARRAY_AFTER_COMMA"),t=(Number(t)+1).toString();break;case"]":i=s,r.pop(),t=n.pop()}}for(let o=0;o<e.length;o++){let u=e[o];switch(r[r.length-1]){case"ROOT":a(u,o,"FINISH");break;case"INSIDE_OBJECT_START":switch(u){case'"':r.pop(),r.push("INSIDE_OBJECT_KEY"),t="";break;case"}":i=o,r.pop(),t=n.pop()}break;case"INSIDE_OBJECT_AFTER_COMMA":'"'===u&&(r.pop(),r.push("INSIDE_OBJECT_KEY"),t="");break;case"INSIDE_OBJECT_KEY":switch(u){case'"':r.pop(),r.push("INSIDE_OBJECT_AFTER_KEY");break;case"\\":r.push("INSIDE_STRING_ESCAPE"),t+=u;break;default:t+=u}break;case"INSIDE_OBJECT_AFTER_KEY":":"===u&&(r.pop(),r.push("INSIDE_OBJECT_BEFORE_VALUE"));break;case"INSIDE_OBJECT_BEFORE_VALUE":a(u,o,"INSIDE_OBJECT_AFTER_VALUE");break;case"INSIDE_OBJECT_AFTER_VALUE":l(u,o);break;case"INSIDE_STRING":switch(u){case'"':r.pop(),i=o,t=n.pop();break;case"\\":r.push("INSIDE_STRING_ESCAPE");break;default:i=o}break;case"INSIDE_ARRAY_START":"]"===u?(i=o,r.pop(),t=n.pop()):(i=o,t="0",a(u,o,"INSIDE_ARRAY_AFTER_VALUE"));break;case"INSIDE_ARRAY_AFTER_VALUE":switch(u){case",":r.pop(),r.push("INSIDE_ARRAY_AFTER_COMMA"),t=(Number(t)+1).toString();break;case"]":i=o,r.pop(),t=n.pop();break;default:i=o}break;case"INSIDE_ARRAY_AFTER_COMMA":a(u,o,"INSIDE_ARRAY_AFTER_VALUE");break;case"INSIDE_STRING_ESCAPE":r.pop(),"INSIDE_STRING"===r[r.length-1]?i=o:"INSIDE_OBJECT_KEY"===r[r.length-1]&&(t+=u);break;case"INSIDE_NUMBER":switch(u){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":i=o;break;case"e":case"E":case"-":case".":break;case",":r.pop(),t=n.pop(),"INSIDE_ARRAY_AFTER_VALUE"===r[r.length-1]&&c(u,o),"INSIDE_OBJECT_AFTER_VALUE"===r[r.length-1]&&l(u,o);break;case"}":r.pop(),t=n.pop(),"INSIDE_OBJECT_AFTER_VALUE"===r[r.length-1]&&l(u,o);break;case"]":r.pop(),t=n.pop(),"INSIDE_ARRAY_AFTER_VALUE"===r[r.length-1]&&c(u,o);break;default:r.pop(),t=n.pop()}break;case"INSIDE_LITERAL":{let t=e.substring(s,o+1);"false".startsWith(t)||"true".startsWith(t)||"null".startsWith(t)?i=o:(r.pop(),"INSIDE_OBJECT_AFTER_VALUE"===r[r.length-1]?l(u,o):"INSIDE_ARRAY_AFTER_VALUE"===r[r.length-1]&&c(u,o))}}}let u=e.slice(0,i+1);for(let t=r.length-1;t>=0;t--)switch(r[t]){case"INSIDE_STRING":u+='"';break;case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":u+="}";break;case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":u+="]";break;case"INSIDE_LITERAL":{let t=e.substring(s,e.length);"true".startsWith(t)?u+="true".slice(t.length):"false".startsWith(t)?u+="false".slice(t.length):"null".startsWith(t)&&(u+="null".slice(t.length))}}return[u,n]}(e),n=t.default.parse(i);if("object"!=typeof n||null===n)throw Error("argsText is expected to be an object");return n[r]={state:"partial",partialPath:s},n}catch{return}}},s=(e,t,r)=>{if("object"!=typeof e||null===e)return t.state;if("complete"===t.state)return"complete";if(0===r.length)return t.state;let[i,...n]=r;if(!Object.prototype.hasOwnProperty.call(e,i))return"partial";let[o,...a]=t.partialPath;return i!==o?"complete":s(e[i],{state:"partial",partialPath:a},n)},n=(e,t)=>{let i=e?.[r];if(!i)throw Error("unable to determine object state");return s(e,i,t.map(String))};e.s(["getPartialJsonObjectFieldState",()=>n,"parsePartialJsonObject",()=>i],82166)},71506,97395,e=>{"use strict";let t=(e,t=21)=>(r=t)=>{let i="",s=0|r;for(;s--;)i+=e[Math.random()*e.length|0];return i};e.s(["customAlphabet",()=>t],97395);var r=t("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",7),i=()=>`__optimistic__${r()}`;e.s(["generateId",()=>r,"generateOptimisticId",()=>i],71506)},95231,e=>{"use strict";var t=e.i(82166),r=e.i(71506),i=(e,i,s)=>{let{role:n,id:o,createdAt:a,attachments:l,status:c,metadata:u}=e,h={id:o??i,createdAt:a??new Date},d="string"==typeof e.content?[{type:"text",text:e.content}]:e.content;if("user"!==n&&l?.length)throw Error("attachments are only supported for user messages");if("assistant"!==n&&c)throw Error("status is only supported for assistant messages");if("assistant"!==n&&u?.steps)throw Error("metadata.steps is only supported for assistant messages");switch(n){case"assistant":return{...h,role:n,content:d.map(e=>{let i=e.type;switch(i){case"text":case"reasoning":if(0===e.text.trim().length)return null;return e;case"file":case"source":case"data":return e;case"image":return(({image:e,...t})=>e.match(/^data:image\/(png|jpeg|jpg|gif|webp);base64,(.*)$/)?{...t,image:e}:(console.warn("Invalid image data format detected"),null))(e);case"tool-call":{let{parentId:i,messages:s,...n}=e,o={...n,toolCallId:e.toolCallId??"tool-"+(0,r.generateId)(),...void 0!==i&&{parentId:i},...void 0!==s&&{messages:s}};if(e.args)return{...o,args:e.args,argsText:e.argsText??JSON.stringify(e.args)};return{...o,args:(0,t.parsePartialJsonObject)(e.argsText??"")??{},argsText:e.argsText??""}}default:throw Error(`Unsupported assistant message part type: ${i}`)}}).filter(e=>!!e),status:c??s,metadata:{unstable_state:u?.unstable_state??null,unstable_annotations:u?.unstable_annotations??[],unstable_data:u?.unstable_data??[],custom:u?.custom??{},steps:u?.steps??[],...u?.submittedFeedback&&{submittedFeedback:u.submittedFeedback}}};case"user":return{...h,role:n,content:d.map(e=>{let t=e.type;switch(t){case"text":case"image":case"audio":case"file":return e;default:throw Error(`Unsupported user message part type: ${t}`)}}),attachments:l??[],metadata:{custom:u?.custom??{}}};case"system":if(1!==d.length||"text"!==d[0].type)throw Error("System messages must have exactly one text message part.");return{...h,role:n,content:d,metadata:{custom:u?.custom??{}}};default:throw Error(`Unknown message role: ${n}`)}};e.s(["fromThreadMessageLike",()=>i])},92695,e=>{"use strict";var t=Symbol("autoStatus"),r=Object.freeze(Object.assign({type:"running"},{[t]:!0})),i=Object.freeze(Object.assign({type:"complete",reason:"unknown"},{[t]:!0})),s=Object.freeze(Object.assign({type:"requires-action",reason:"tool-calls"},{[t]:!0})),n=Object.freeze(Object.assign({type:"requires-action",reason:"interrupt"},{[t]:!0})),o=e=>!0===e[t],a=(e,o,a,l,c)=>e&&c?Object.assign({type:"incomplete",reason:"error",error:c},{[t]:!0}):e&&o?r:a?n:l?s:i;e.s(["getAutoStatus",()=>a,"isAutoStatus",()=>o])},58249,e=>{"use strict";var t=e.i(36089),r=class{_contextProvider=new t.CompositeContextProvider;registerModelContextProvider(e){return this._contextProvider.registerModelContextProvider(e)}getModelContextProvider(){return this._contextProvider}};e.s(["BaseAssistantRuntimeCore",()=>r])},61129,e=>{"use strict";var t=e=>e.content.filter(e=>"text"===e.type).map(e=>e.text).join("\n\n");e.s(["getThreadMessageText",()=>t])},87886,e=>{"use strict";var t=e.i(71506),r=e.i(92695),i=e.i(95231),s={fromArray:e=>{let s=e.map(e=>(0,i.fromThreadMessageLike)(e,(0,t.generateId)(),(0,r.getAutoStatus)(!1,!1,!1,!1,void 0)));return{messages:s.map((e,t)=>({parentId:t>0?s[t-1].id:null,message:e}))}}},n=e=>e.next?n(e.next):"current"in e?e:null,o=class{constructor(e){this.func=e}_value=null;get value(){return null===this._value&&(this._value=this.func()),this._value}dirty(){this._value=null}},a=class{messages=new Map;head=null;root={children:[],next:null};updateLevels(e,t){for(let r of(e.level=t,e.children)){let e=this.messages.get(r);e&&this.updateLevels(e,t+1)}}performOp(e,t,r){let i=t.prev??this.root,s=e??this.root;if("relink"!==r||i!==s){if("link"!==r&&(i.children=i.children.filter(e=>e!==t.current.id),i.next===t)){let e=i.children.at(-1),t=e?this.messages.get(e):null;if(void 0===t)throw Error("MessageRepository(performOp/cut): Fallback sibling message not found. This is likely an internal bug in assistant-ui.");i.next=t}if("cut"!==r){for(let r=e;r;r=r.prev)if(r.current.id===t.current.id)throw Error("MessageRepository(performOp/link): A message with the same id already exists in the parent tree. This error occurs if the same message id is found multiple times. This is likely an internal bug in assistant-ui.");s.children=[...s.children,t.current.id],(n(t)===this.head||null===s.next)&&(s.next=t),t.prev=e;let r=e?e.level+1:0;this.updateLevels(t,r)}}}_messages=new o(()=>{let e=Array((this.head?.level??-1)+1);for(let t=this.head;t;t=t.prev)e[t.level]=t.current;return e});get headId(){return this.head?.current.id??null}getMessages(e){if(void 0===e||e===this.head?.current.id)return this._messages.value;let t=this.messages.get(e);if(!t)throw Error("MessageRepository(getMessages): Head message not found. This is likely an internal bug in assistant-ui.");let r=Array(t.level+1);for(let e=t;e;e=e.prev)r[e.level]=e.current;return r}addOrUpdateMessage(e,t){let r=this.messages.get(t.id),i=e?this.messages.get(e):null;if(void 0===i)throw Error("MessageRepository(addOrUpdateMessage): Parent message not found. This is likely an internal bug in assistant-ui.");if(r){r.current=t,this.performOp(i,r,"relink"),this._messages.dirty();return}let s={prev:i,current:t,next:null,children:[],level:i?i.level+1:0};this.messages.set(t.id,s),this.performOp(i,s,"link"),this.head===i&&(this.head=s),this._messages.dirty()}getMessage(e){let t=this.messages.get(e);if(!t)throw Error("MessageRepository(updateMessage): Message not found. This is likely an internal bug in assistant-ui.");return{parentId:t.prev?.current.id??null,message:t.current}}appendOptimisticMessage(e,r){let s;do s=(0,t.generateOptimisticId)();while(this.messages.has(s))return this.addOrUpdateMessage(e,(0,i.fromThreadMessageLike)(r,s,{type:"running"})),s}deleteMessage(e,t){let r=this.messages.get(e);if(!r)throw Error("MessageRepository(deleteMessage): Message not found. This is likely an internal bug in assistant-ui.");let i=void 0===t?r.prev:null===t?null:this.messages.get(t);if(void 0===i)throw Error("MessageRepository(deleteMessage): Replacement not found. This is likely an internal bug in assistant-ui.");for(let e of r.children){let t=this.messages.get(e);if(!t)throw Error("MessageRepository(deleteMessage): Child message not found. This is likely an internal bug in assistant-ui.");this.performOp(i,t,"relink")}this.performOp(null,r,"cut"),this.messages.delete(e),this.head===r&&(this.head=n(i??this.root)),this._messages.dirty()}getBranches(e){let t=this.messages.get(e);if(!t)throw Error("MessageRepository(getBranches): Message not found. This is likely an internal bug in assistant-ui.");let{children:r}=t.prev??this.root;return r}switchToBranch(e){let t=this.messages.get(e);if(!t)throw Error("MessageRepository(switchToBranch): Branch not found. This is likely an internal bug in assistant-ui.");(t.prev??this.root).next=t,this.head=n(t),this._messages.dirty()}resetHead(e){if(null===e)return void this.clear();let t=this.messages.get(e);if(!t)throw Error("MessageRepository(resetHead): Branch not found. This is likely an internal bug in assistant-ui.");if(t.children.length>0){let e=t=>{for(let r of t.children){let t=this.messages.get(r);t&&(e(t),this.messages.delete(r))}};e(t),t.children=[],t.next=null}this.head=t;for(let e=t;e;e=e.prev)e.prev&&(e.prev.next=e);this._messages.dirty()}clear(){this.messages.clear(),this.head=null,this.root={children:[],next:null},this._messages.dirty()}export(){let e=[];for(let[,t]of this.messages)e.push({message:t.current,parentId:t.prev?.current.id??null});return{headId:this.head?.current.id??null,messages:e}}import({headId:e,messages:t}){for(let{message:e,parentId:r}of t)this.addOrUpdateMessage(r,e);this.resetHead(e??t.at(-1)?.message.id??null)}};e.s(["ExportedMessageRepository",()=>s,"MessageRepository",()=>a])},71374,30634,e=>{"use strict";var t=class{_subscribers=new Set;subscribe(e){return this._subscribers.add(e),()=>this._subscribers.delete(e)}waitForUpdate(){return new Promise(e=>{let t=this.subscribe(()=>{t(),e()})})}_notifySubscribers(){let e=[];for(let t of this._subscribers)try{t()}catch(t){e.push(t)}if(e.length>0)if(1===e.length)throw e[0];else throw AggregateError(e)}},r=class extends t{isEditing=!0;get attachmentAccept(){return this.getAttachmentAdapter()?.accept??"*"}_attachments=[];get attachments(){return this._attachments}setAttachments(e){this._attachments=e,this._notifySubscribers()}get isEmpty(){return!this.text.trim()&&!this.attachments.length}_text="";get text(){return this._text}_role="user";get role(){return this._role}_runConfig={};get runConfig(){return this._runConfig}setText(e){this._text!==e&&(this._text=e,this._notifySubscribers())}setRole(e){this._role!==e&&(this._role=e,this._notifySubscribers())}setRunConfig(e){this._runConfig!==e&&(this._runConfig=e,this._notifySubscribers())}_emptyTextAndAttachments(){this._attachments=[],this._text="",this._notifySubscribers()}async _onClearAttachments(){let e=this.getAttachmentAdapter();e&&await Promise.all(this._attachments.map(t=>e.remove(t)))}async reset(){if(0===this._attachments.length&&""===this._text&&"user"===this._role&&0===Object.keys(this._runConfig).length)return;this._role="user",this._runConfig={};let e=this._onClearAttachments();this._emptyTextAndAttachments(),await e}async clearAttachments(){let e=this._onClearAttachments();this.setAttachments([]),await e}async send(){let e=this.getAttachmentAdapter(),t=e&&this.attachments.length>0?Promise.all(this.attachments.map(async t=>"complete"===t.status.type?t:await e.send(t))):[],r=this.text;this._emptyTextAndAttachments();let i={createdAt:new Date,role:this.role,content:r?[{type:"text",text:r}]:[],attachments:await t,runConfig:this.runConfig,metadata:{custom:{}}};this.handleSend(i),this._notifyEventSubscribers("send")}cancel(){this.handleCancel()}async addAttachment(e){let t=this.getAttachmentAdapter();if(!t)throw Error("Attachments are not supported");let r=e=>{let t=this._attachments.findIndex(t=>t.id===e.id);-1!==t?this._attachments=[...this._attachments.slice(0,t),e,...this._attachments.slice(t+1)]:this._attachments=[...this._attachments,e],this._notifySubscribers()},i=t.add({file:e});if(Symbol.asyncIterator in i)for await(let e of i)r(e);else r(await i);this._notifyEventSubscribers("attachment-add"),this._notifySubscribers()}async removeAttachment(e){let t=this.getAttachmentAdapter();if(!t)throw Error("Attachments are not supported");let r=this._attachments.findIndex(t=>t.id===e);if(-1===r)throw Error("Attachment not found");let i=this._attachments[r];await t.remove(i),this._attachments=[...this._attachments.slice(0,r),...this._attachments.slice(r+1)],this._notifySubscribers()}_eventSubscribers=new Map;_notifyEventSubscribers(e){let t=this._eventSubscribers.get(e);if(t)for(let e of t)e()}unstable_on(e,t){let r=this._eventSubscribers.get(e);return r?r.add(t):this._eventSubscribers.set(e,new Set([t])),()=>{let r=this._eventSubscribers.get(e);r&&r.delete(t)}}};e.s(["BaseComposerRuntimeCore",()=>r],30634);var i=class extends r{constructor(e){super(),this.runtime=e,this.connect()}_canCancel=!1;get canCancel(){return this._canCancel}get attachments(){return super.attachments}getAttachmentAdapter(){return this.runtime.adapters?.attachments}connect(){return this.runtime.subscribe(()=>{this.canCancel!==this.runtime.capabilities.cancel&&(this._canCancel=this.runtime.capabilities.cancel,this._notifySubscribers())})}async handleSend(e){this.runtime.append({...e,parentId:this.runtime.messages.at(-1)?.id??null,sourceId:null})}async handleCancel(){this.runtime.cancelRun()}};e.s(["DefaultThreadComposerRuntimeCore",()=>i],71374)},83939,94188,50370,5180,40643,e=>{"use strict";var t=class{_subscriptions=new Set;_connection;get isConnected(){return!!this._connection}notifySubscribers(){for(let e of this._subscriptions)e()}_updateConnection(){this._subscriptions.size>0?this._connection||(this._connection=this._connect()):(this._connection?.(),this._connection=void 0)}subscribe(e){return this._subscriptions.add(e),this._updateConnection(),()=>{this._subscriptions.delete(e),this._updateConnection()}}};e.s(["BaseSubject",()=>t],94188);var r=Symbol("skip-update");e.s(["SKIP_UPDATE",()=>r],50370);var i=class extends t{constructor(e){super(),this.binding=e}get path(){return this.binding.path}_previousStateDirty=!0;_previousState;getState=()=>{if(!this.isConnected||this._previousStateDirty){let e=this.binding.getState();e!==r&&(this._previousState=e),this._previousStateDirty=!1}if(void 0===this._previousState)throw Error("Entry not available in the store");return this._previousState};_connect(){let e=()=>{this._previousStateDirty=!0,this.notifySubscribers()};return this.binding.subscribe(e)}};e.s(["LazyMemoizeSubject",()=>i],83939);var s=class{constructor(e,t){this._core=e,this._threadListBinding=t,this.__internal_bindMethods()}get path(){return this._core.path}__internal_bindMethods(){this.switchTo=this.switchTo.bind(this),this.rename=this.rename.bind(this),this.archive=this.archive.bind(this),this.unarchive=this.unarchive.bind(this),this.delete=this.delete.bind(this),this.initialize=this.initialize.bind(this),this.generateTitle=this.generateTitle.bind(this),this.subscribe=this.subscribe.bind(this),this.unstable_on=this.unstable_on.bind(this),this.getState=this.getState.bind(this),this.detach=this.detach.bind(this)}getState(){return this._core.getState()}switchTo(){let e=this._core.getState();return this._threadListBinding.switchToThread(e.id)}rename(e){let t=this._core.getState();return this._threadListBinding.rename(t.id,e)}archive(){let e=this._core.getState();return this._threadListBinding.archive(e.id)}unarchive(){let e=this._core.getState();return this._threadListBinding.unarchive(e.id)}delete(){let e=this._core.getState();return this._threadListBinding.delete(e.id)}initialize(){let e=this._core.getState();return this._threadListBinding.initialize(e.id)}generateTitle(){let e=this._core.getState();return this._threadListBinding.generateTitle(e.id)}unstable_on(e,t){let r=this._core.getState().isMain,i=this._core.getState().id;return this.subscribe(()=>{let s=this._core.getState(),n=s.isMain,o=s.id;r===n&&i===o||(r=n,i=o,"switched-to"===e&&!n||"switched-away"===e&&n||t())})}subscribe(e){return this._core.subscribe(e)}detach(){let e=this._core.getState();this._threadListBinding.detach(e.id)}__internal_getRuntime(){return this}};e.s(["ThreadListItemRuntimeImpl",()=>s],5180);var n=class extends t{constructor(e){super(),this.binding=e;const t=e.getState();if(t===r)throw Error("Entry not available in the store");this._previousState=t}get path(){return this.binding.path}_previousState;getState=()=>(this.isConnected||this._syncState(),this._previousState);_syncState(){let e=this.binding.getState();return!(e===r||function(e,t){if(void 0===e&&void 0===t)return!0;if(void 0===e||void 0===t)return!1;for(let r of Object.keys(e))if(!Object.is(e[r],t[r]))return!1;return!0}(e,this._previousState))&&(this._previousState=e,!0)}_connect(){let e=()=>{this._syncState()&&this.notifySubscribers()};return this.binding.subscribe(e)}};e.s(["ShallowMemoizeSubject",()=>n],40643)},46850,15801,69966,e=>{"use strict";var t=e.i(83939),r=e.i(5180),i=e.i(50370),s=e.i(40643),n=e.i(65291),o=e.i(61129),a=class{constructor(e){this._core=e,this.__internal_bindMethods()}get path(){return this._core.path}__internal_bindMethods(){this.getState=this.getState.bind(this),this.remove=this.remove.bind(this),this.subscribe=this.subscribe.bind(this)}getState(){return this._core.getState()}subscribe(e){return this._core.subscribe(e)}},l=class extends a{constructor(e,t){super(e),this._composerApi=t}remove(){let e=this._composerApi.getState();if(!e)throw Error("Composer is not available");return e.removeAttachment(this.getState().id)}},c=class extends l{get source(){return"thread-composer"}},u=class extends l{get source(){return"edit-composer"}},h=class extends a{get source(){return"message"}constructor(e){super(e)}remove(){throw Error("Message attachments cannot be removed")}},d=e.i(94188),p=class extends d.BaseSubject{constructor(e){super(),this.config=e}getState(){return this.config.binding.getState()}outerSubscribe(e){return this.config.binding.subscribe(e)}_connect(){let e=()=>{this.notifySubscribers()},t=this.config.binding.getState(),r=t?.unstable_on(this.config.event,e),i=()=>{let i=this.config.binding.getState();i!==t&&(t=i,r?.(),r=this.config.binding.getState()?.unstable_on(this.config.event,e))},s=this.outerSubscribe(i);return()=>{s?.(),r?.()}}},f=Object.freeze([]),g=Object.freeze({}),m=class{constructor(e){this._core=e}get path(){return this._core.path}__internal_bindMethods(){this.setText=this.setText.bind(this),this.setRunConfig=this.setRunConfig.bind(this),this.getState=this.getState.bind(this),this.subscribe=this.subscribe.bind(this),this.addAttachment=this.addAttachment.bind(this),this.reset=this.reset.bind(this),this.clearAttachments=this.clearAttachments.bind(this),this.send=this.send.bind(this),this.cancel=this.cancel.bind(this),this.setRole=this.setRole.bind(this),this.getAttachmentByIndex=this.getAttachmentByIndex.bind(this),this.unstable_on=this.unstable_on.bind(this)}setText(e){let t=this._core.getState();if(!t)throw Error("Composer is not available");t.setText(e)}setRunConfig(e){let t=this._core.getState();if(!t)throw Error("Composer is not available");t.setRunConfig(e)}addAttachment(e){let t=this._core.getState();if(!t)throw Error("Composer is not available");return t.addAttachment(e)}reset(){let e=this._core.getState();if(!e)throw Error("Composer is not available");return e.reset()}clearAttachments(){let e=this._core.getState();if(!e)throw Error("Composer is not available");return e.clearAttachments()}send(){let e=this._core.getState();if(!e)throw Error("Composer is not available");e.send()}cancel(){let e=this._core.getState();if(!e)throw Error("Composer is not available");e.cancel()}setRole(e){let t=this._core.getState();if(!t)throw Error("Composer is not available");t.setRole(e)}subscribe(e){return this._core.subscribe(e)}_eventSubscriptionSubjects=new Map;unstable_on(e,t){let r=this._eventSubscriptionSubjects.get(e);return r||(r=new p({event:e,binding:this._core}),this._eventSubscriptionSubjects.set(e,r)),r.subscribe(t)}},b=class extends m{get path(){return this._core.path}get type(){return"thread"}_getState;constructor(e){const r=new t.LazyMemoizeSubject({path:e.path,getState:()=>{let t;return t=e.getState(),Object.freeze({type:"thread",isEditing:t?.isEditing??!1,canCancel:t?.canCancel??!1,isEmpty:t?.isEmpty??!0,attachments:t?.attachments??f,text:t?.text??"",role:t?.role??"user",runConfig:t?.runConfig??g,attachmentAccept:t?.attachmentAccept??"",value:t?.text??""})},subscribe:t=>e.subscribe(t)});super({path:e.path,getState:()=>e.getState(),subscribe:e=>r.subscribe(e)}),this._getState=r.getState.bind(r),this.__internal_bindMethods()}getState(){return this._getState()}getAttachmentByIndex(e){return new c(new s.ShallowMemoizeSubject({path:{...this.path,attachmentSource:"thread-composer",attachmentSelector:{type:"index",index:e},ref:this.path.ref+`${this.path.ref}.attachments[${e}]`},getState:()=>{let t=this.getState().attachments[e];return t?{...t,source:"thread-composer"}:i.SKIP_UPDATE},subscribe:e=>this._core.subscribe(e)}),this._core)}},y=class extends m{constructor(e,r){const i=new t.LazyMemoizeSubject({path:e.path,getState:()=>{let t;return t=e.getState(),Object.freeze({type:"edit",isEditing:t?.isEditing??!1,canCancel:t?.canCancel??!1,isEmpty:t?.isEmpty??!0,text:t?.text??"",role:t?.role??"user",attachments:t?.attachments??f,runConfig:t?.runConfig??g,attachmentAccept:t?.attachmentAccept??"",value:t?.text??""})},subscribe:t=>e.subscribe(t)});super({path:e.path,getState:()=>e.getState(),subscribe:e=>i.subscribe(e)}),this._beginEdit=r,this._getState=i.getState.bind(i),this.__internal_bindMethods()}get path(){return this._core.path}get type(){return"edit"}_getState;__internal_bindMethods(){super.__internal_bindMethods(),this.beginEdit=this.beginEdit.bind(this)}getState(){return this._getState()}beginEdit(){this._beginEdit()}getAttachmentByIndex(e){return new u(new s.ShallowMemoizeSubject({path:{...this.path,attachmentSource:"edit-composer",attachmentSelector:{type:"index",index:e},ref:this.path.ref+`${this.path.ref}.attachments[${e}]`},getState:()=>{let t=this.getState().attachments[e];return t?{...t,source:"edit-composer"}:i.SKIP_UPDATE},subscribe:e=>this._core.subscribe(e)}),this._core)}},_=Symbol.for("aui.tool-response"),S=class e{get[_](){return!0}artifact;result;isError;constructor(e){void 0!==e.artifact&&(this.artifact=e.artifact),this.result=e.result,this.isError=e.isError??!1}static[Symbol.hasInstance](e){return"object"==typeof e&&null!==e&&_ in e}static toResponse(t){return t instanceof e?t:new e({result:void 0===t?"<no result>":t})}};e.s(["ToolResponse",()=>S],15801);var v=class{constructor(e,t,r){this.contentBinding=e,this.messageApi=t,this.threadApi=r,this.__internal_bindMethods()}get path(){return this.contentBinding.path}__internal_bindMethods(){this.addToolResult=this.addToolResult.bind(this),this.resumeToolCall=this.resumeToolCall.bind(this),this.getState=this.getState.bind(this),this.subscribe=this.subscribe.bind(this)}getState(){return this.contentBinding.getState()}addToolResult(e){let t=this.contentBinding.getState();if(!t)throw Error("Message part is not available");if("tool-call"!==t.type)throw Error("Tried to add tool result to non-tool message part");if(!this.messageApi)throw Error("Message API is not available. This is likely a bug in assistant-ui.");if(!this.threadApi)throw Error("Thread API is not available");let r=this.messageApi.getState();if(!r)throw Error("Message is not available");let i=t.toolName,s=t.toolCallId,n=S.toResponse(e);this.threadApi.getState().addToolResult({messageId:r.id,toolName:i,toolCallId:s,result:n.result,artifact:n.artifact,isError:n.isError})}resumeToolCall(e){let t=this.contentBinding.getState();if(!t)throw Error("Message part is not available");if("tool-call"!==t.type)throw Error("Tried to resume tool call on non-tool message part");if(!this.threadApi)throw Error("Thread API is not available");let r=t.toolCallId;this.threadApi.getState().resumeToolCall({toolCallId:r,payload:e})}subscribe(e){return this.contentBinding.subscribe(e)}},w=d,x=class extends w.BaseSubject{constructor(e){super(),this.binding=e}get path(){return this.binding.path}getState(){return this.binding.getState()}outerSubscribe(e){return this.binding.subscribe(e)}_connect(){let e=()=>{this.notifySubscribers()},t=this.binding.getState(),r=t?.subscribe(e),i=()=>{let i=this.binding.getState();i!==t&&(t=i,r?.(),r=this.binding.getState()?.subscribe(e),e())},s=this.outerSubscribe(i);return()=>{s?.(),r?.()}}},E=Object.freeze({type:"complete"}),T=(e,t)=>{let r=e.content[t];if(!r)return i.SKIP_UPDATE;let s=((e,t,r)=>{if("assistant"!==e.role)return E;if("tool-call"===r.type)if(!r.result)return e.status;else return E;let i=t===Math.max(0,e.content.length-1);return"requires-action"===e.status.type?E:i?e.status:E})(e,t,r);return Object.freeze({...r,...{[n.symbolInnerMessage]:r[n.symbolInnerMessage]},status:s})},I=class{constructor(e,t){this._core=e,this._threadBinding=t,this.composer=new y(new x({path:{...this.path,ref:this.path.ref+`${this.path.ref}.composer`,composerSource:"edit"},getState:this._getEditComposerRuntimeCore,subscribe:e=>this._threadBinding.subscribe(e)}),()=>this._threadBinding.getState().beginEdit(this._core.getState().id)),this.__internal_bindMethods()}get path(){return this._core.path}__internal_bindMethods(){this.reload=this.reload.bind(this),this.getState=this.getState.bind(this),this.subscribe=this.subscribe.bind(this),this.getMessagePartByIndex=this.getMessagePartByIndex.bind(this),this.getMessagePartByToolCallId=this.getMessagePartByToolCallId.bind(this),this.getAttachmentByIndex=this.getAttachmentByIndex.bind(this),this.unstable_getCopyText=this.unstable_getCopyText.bind(this),this.speak=this.speak.bind(this),this.stopSpeaking=this.stopSpeaking.bind(this),this.submitFeedback=this.submitFeedback.bind(this),this.switchToBranch=this.switchToBranch.bind(this)}composer;_getEditComposerRuntimeCore=()=>this._threadBinding.getState().getEditComposer(this._core.getState().id);getState(){return this._core.getState()}reload(e={}){let t=this._getEditComposerRuntimeCore(),r=t??this._threadBinding.getState().composer,{runConfig:i=(t??r).runConfig}=e,s=this._core.getState();if("assistant"!==s.role)throw Error("Can only reload assistant messages");this._threadBinding.getState().startRun({parentId:s.parentId,sourceId:s.id,runConfig:i})}speak(){let e=this._core.getState();return this._threadBinding.getState().speak(e.id)}stopSpeaking(){let e=this._core.getState(),t=this._threadBinding.getState();if(t.speech?.messageId===e.id)this._threadBinding.getState().stopSpeaking();else throw Error("Message is not being spoken")}submitFeedback({type:e}){let t=this._core.getState();this._threadBinding.getState().submitFeedback({messageId:t.id,type:e})}switchToBranch({position:e,branchId:t}){let r=this._core.getState();if(t&&e)throw Error("May not specify both branchId and position");if(!t&&!e)throw Error("Must specify either branchId or position");let i=this._threadBinding.getState().getBranches(r.id),s=t;if("previous"===e?s=i[r.branchNumber-2]:"next"===e&&(s=i[r.branchNumber]),!s)throw Error("Branch not found");this._threadBinding.getState().switchToBranch(s)}unstable_getCopyText(){return(0,o.getThreadMessageText)(this.getState())}subscribe(e){return this._core.subscribe(e)}getMessagePartByIndex(e){if(e<0)throw Error("Message part index must be >= 0");return new v(new s.ShallowMemoizeSubject({path:{...this.path,ref:this.path.ref+`${this.path.ref}.content[${e}]`,messagePartSelector:{type:"index",index:e}},getState:()=>T(this.getState(),e),subscribe:e=>this._core.subscribe(e)}),this._core,this._threadBinding)}getMessagePartByToolCallId(e){return new v(new s.ShallowMemoizeSubject({path:{...this.path,ref:this.path.ref+`${this.path.ref}.content[toolCallId=${JSON.stringify(e)}]`,messagePartSelector:{type:"toolCallId",toolCallId:e}},getState:()=>{let t=this._core.getState(),r=t.content.findIndex(t=>"tool-call"===t.type&&t.toolCallId===e);return -1===r?i.SKIP_UPDATE:T(t,r)},subscribe:e=>this._core.subscribe(e)}),this._core,this._threadBinding)}getAttachmentByIndex(e){return new h(new s.ShallowMemoizeSubject({path:{...this.path,ref:this.path.ref+`${this.path.ref}.attachments[${e}]`,attachmentSource:"message",attachmentSelector:{type:"index",index:e}},getState:()=>{let t=this.getState().attachments,r=t?.[e];return r?{...r,source:"message"}:i.SKIP_UPDATE},subscribe:e=>this._core.subscribe(e)}))}},A=class{get path(){return this._threadBinding.path}get __internal_threadBinding(){return this._threadBinding}_threadBinding;constructor(e,t){const r=new s.ShallowMemoizeSubject({path:e.path,getState:()=>{var r,i;let s;return r=e.getState(),i=t.getState(),s=r.messages.at(-1),Object.freeze({threadId:i.id,metadata:i,capabilities:r.capabilities,isDisabled:r.isDisabled,isLoading:r.isLoading,isRunning:s?.role==="assistant"&&"running"===s.status.type,messages:r.messages,state:r.state,suggestions:r.suggestions,extras:r.extras,speech:r.speech})},subscribe:r=>{let i=e.subscribe(r),s=t.subscribe(r);return()=>{i(),s()}}});this._threadBinding={path:e.path,getState:()=>e.getState(),getStateState:()=>r.getState(),outerSubscribe:t=>e.outerSubscribe(t),subscribe:t=>e.subscribe(t)},this.composer=new b(new x({path:{...this.path,ref:this.path.ref+`${this.path.ref}.composer`,composerSource:"thread"},getState:()=>this._threadBinding.getState().composer,subscribe:e=>this._threadBinding.subscribe(e)})),this.__internal_bindMethods()}__internal_bindMethods(){this.append=this.append.bind(this),this.unstable_resumeRun=this.unstable_resumeRun.bind(this),this.unstable_loadExternalState=this.unstable_loadExternalState.bind(this),this.startRun=this.startRun.bind(this),this.cancelRun=this.cancelRun.bind(this),this.stopSpeaking=this.stopSpeaking.bind(this),this.export=this.export.bind(this),this.import=this.import.bind(this),this.reset=this.reset.bind(this),this.getMessageByIndex=this.getMessageByIndex.bind(this),this.getMessageById=this.getMessageById.bind(this),this.subscribe=this.subscribe.bind(this),this.unstable_on=this.unstable_on.bind(this),this.getModelContext=this.getModelContext.bind(this),this.getModelConfig=this.getModelConfig.bind(this),this.getState=this.getState.bind(this)}composer;getState(){return this._threadBinding.getStateState()}append(e){var t;this._threadBinding.getState().append((t=this._threadBinding.getState().messages,"string"==typeof e?{createdAt:new Date,parentId:t.at(-1)?.id??null,sourceId:null,runConfig:{},role:"user",content:[{type:"text",text:e}],attachments:[],metadata:{custom:{}}}:{createdAt:e.createdAt??new Date,parentId:e.parentId??t.at(-1)?.id??null,sourceId:e.sourceId??null,role:e.role??"user",content:e.content,attachments:e.attachments??[],metadata:e.metadata??{custom:{}},runConfig:e.runConfig??{},startRun:e.startRun}))}subscribe(e){return this._threadBinding.subscribe(e)}getModelContext(){return this._threadBinding.getState().getModelContext()}getModelConfig(){return this.getModelContext()}startRun(e){let t;return this._threadBinding.getState().startRun({parentId:(t=null===e||"string"==typeof e?{parentId:e}:e).parentId??null,sourceId:t.sourceId??null,runConfig:t.runConfig??{}})}unstable_resumeRun(e){return this._threadBinding.getState().resumeRun({parentId:e.parentId??null,sourceId:e.sourceId??null,runConfig:e.runConfig??{},...e.stream?{stream:e.stream}:{}})}unstable_loadExternalState(e){this._threadBinding.getState().unstable_loadExternalState(e)}cancelRun(){this._threadBinding.getState().cancelRun()}stopSpeaking(){return this._threadBinding.getState().stopSpeaking()}export(){return this._threadBinding.getState().export()}import(e){this._threadBinding.getState().import(e)}reset(e){this._threadBinding.getState().reset(e)}getMessageByIndex(e){if(e<0)throw Error("Message index must be >= 0");return this._getMessageRuntime({...this.path,ref:this.path.ref+`${this.path.ref}.messages[${e}]`,messageSelector:{type:"index",index:e}},()=>{let t=this._threadBinding.getState().messages,r=t[e];if(r)return{message:r,parentId:t[e-1]?.id??null}})}getMessageById(e){return this._getMessageRuntime({...this.path,ref:this.path.ref+`${this.path.ref}.messages[messageId=${JSON.stringify(e)}]`,messageSelector:{type:"messageId",messageId:e}},()=>this._threadBinding.getState().getMessageById(e))}_getMessageRuntime(e,t){return new I(new s.ShallowMemoizeSubject({path:e,getState:()=>{let{message:e,parentId:r}=t()??{},{messages:s,speech:o}=this._threadBinding.getState();if(!e||void 0===r)return i.SKIP_UPDATE;let a=this._threadBinding.getState().getBranches(e.id),l=e.metadata.submittedFeedback;return{...e,...{[n.symbolInnerMessage]:e[n.symbolInnerMessage]},isLast:s.at(-1)?.id===e.id,parentId:r,branchNumber:a.indexOf(e.id)+1,branchCount:a.length,speech:o?.messageId===e.id?o:void 0,submittedFeedback:l}},subscribe:e=>this._threadBinding.subscribe(e)}),this._threadBinding)}_eventSubscriptionSubjects=new Map;unstable_on(e,t){let r=this._eventSubscriptionSubjects.get(e);return r||(r=new p({event:e,binding:this._threadBinding}),this._eventSubscriptionSubjects.set(e,r)),r.subscribe(t)}};e.s(["ThreadRuntimeImpl",()=>A],69966);var C=(e,t)=>{if(void 0===t)return i.SKIP_UPDATE;let r=e.getItemById(t);return r?{id:r.id,threadId:r.id,remoteId:r.remoteId,externalId:r.externalId,title:r.title,status:r.status,isMain:r.id===e.mainThreadId}:i.SKIP_UPDATE},R=class{constructor(e,i=A){this._core=e,this._runtimeFactory=i;const n=new t.LazyMemoizeSubject({path:{},getState:()=>({mainThreadId:e.mainThreadId,newThread:e.newThreadId,threads:e.threadIds,archivedThreads:e.archivedThreadIds,isLoading:e.isLoading,threadItems:e.threadData}),subscribe:t=>e.subscribe(t)});this._getState=n.getState.bind(n),this._mainThreadListItemRuntime=new r.ThreadListItemRuntimeImpl(new s.ShallowMemoizeSubject({path:{ref:"threadItems[main]",threadSelector:{type:"main"}},getState:()=>C(this._core,this._core.mainThreadId),subscribe:e=>this._core.subscribe(e)}),this._core),this.main=new i(new x({path:{ref:"threads.main",threadSelector:{type:"main"}},getState:()=>e.getMainThreadRuntimeCore(),subscribe:t=>e.subscribe(t)}),this._mainThreadListItemRuntime),this.__internal_bindMethods()}_getState;__internal_bindMethods(){this.switchToThread=this.switchToThread.bind(this),this.switchToNewThread=this.switchToNewThread.bind(this),this.getState=this.getState.bind(this),this.subscribe=this.subscribe.bind(this),this.getById=this.getById.bind(this),this.getItemById=this.getItemById.bind(this),this.getItemByIndex=this.getItemByIndex.bind(this),this.getArchivedItemByIndex=this.getArchivedItemByIndex.bind(this)}switchToThread(e){return this._core.switchToThread(e)}switchToNewThread(){return this._core.switchToNewThread()}getState(){return this._getState()}subscribe(e){return this._core.subscribe(e)}_mainThreadListItemRuntime;main;get mainItem(){return this._mainThreadListItemRuntime}getById(e){return new this._runtimeFactory(new x({path:{ref:"threads[threadId="+JSON.stringify(e)+"]",threadSelector:{type:"threadId",threadId:e}},getState:()=>this._core.getThreadRuntimeCore(e),subscribe:e=>this._core.subscribe(e)}),this.mainItem)}getItemByIndex(e){return new r.ThreadListItemRuntimeImpl(new s.ShallowMemoizeSubject({path:{ref:`threadItems[${e}]`,threadSelector:{type:"index",index:e}},getState:()=>C(this._core,this._core.threadIds[e]),subscribe:e=>this._core.subscribe(e)}),this._core)}getArchivedItemByIndex(e){return new r.ThreadListItemRuntimeImpl(new s.ShallowMemoizeSubject({path:{ref:`archivedThreadItems[${e}]`,threadSelector:{type:"archiveIndex",index:e}},getState:()=>C(this._core,this._core.archivedThreadIds[e]),subscribe:e=>this._core.subscribe(e)}),this._core)}getItemById(e){return new r.ThreadListItemRuntimeImpl(new s.ShallowMemoizeSubject({path:{ref:`threadItems[threadId=${e}]`,threadSelector:{type:"threadId",threadId:e}},getState:()=>C(this._core,e),subscribe:e=>this._core.subscribe(e)}),this._core)}},M=e.i(87886),k=class{constructor(e){this._core=e,this.threads=new R(e.threads),this._thread=this.threads.main,this.__internal_bindMethods()}threads;get threadList(){return this.threads}_thread;__internal_bindMethods(){this.switchToNewThread=this.switchToNewThread.bind(this),this.switchToThread=this.switchToThread.bind(this),this.registerModelContextProvider=this.registerModelContextProvider.bind(this),this.registerModelConfigProvider=this.registerModelConfigProvider.bind(this),this.reset=this.reset.bind(this)}get thread(){return this._thread}switchToNewThread(){return this._core.threads.switchToNewThread()}switchToThread(e){return this._core.threads.switchToThread(e)}registerModelContextProvider(e){return this._core.registerModelContextProvider(e)}registerModelConfigProvider(e){return this.registerModelContextProvider(e)}reset({initialMessages:e}={}){return this._core.threads.getMainThreadRuntimeCore().import(M.ExportedMessageRepository.fromArray(e??[]))}};e.s(["AssistantRuntimeImpl",()=>k],46850)},38759,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i={assign:function(){return l},searchParamsToUrlQuery:function(){return n},urlQueryToSearchParams:function(){return a}};for(var s in i)Object.defineProperty(r,s,{enumerable:!0,get:i[s]});function n(e){let t={};for(let[r,i]of e.entries()){let e=t[r];void 0===e?t[r]=i:Array.isArray(e)?e.push(i):t[r]=[e,i]}return t}function o(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function a(e){let t=new URLSearchParams;for(let[r,i]of Object.entries(e))if(Array.isArray(i))for(let e of i)t.append(r,o(e));else t.set(r,o(i));return t}function l(e,...t){for(let r of t){for(let t of r.keys())e.delete(t);for(let[t,i]of r.entries())e.append(t,i)}return e}},15495,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i={formatUrl:function(){return a},formatWithValidation:function(){return c},urlObjectKeys:function(){return l}};for(var s in i)Object.defineProperty(r,s,{enumerable:!0,get:i[s]});let n=e.r(26543)._(e.r(38759)),o=/https?|ftp|gopher|file/;function a(e){let{auth:t,hostname:r}=e,i=e.protocol||"",s=e.pathname||"",a=e.hash||"",l=e.query||"",c=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?c=t+e.host:r&&(c=t+(~r.indexOf(":")?`[${r}]`:r),e.port&&(c+=":"+e.port)),l&&"object"==typeof l&&(l=String(n.urlQueryToSearchParams(l)));let u=e.search||l&&`?${l}`||"";return i&&!i.endsWith(":")&&(i+=":"),e.slashes||(!i||o.test(i))&&!1!==c?(c="//"+(c||""),s&&"/"!==s[0]&&(s="/"+s)):c||(c=""),a&&"#"!==a[0]&&(a="#"+a),u&&"?"!==u[0]&&(u="?"+u),s=s.replace(/[?#]/g,encodeURIComponent),u=u.replace("#","%23"),`${i}${c}${s}${u}${a}`}let l=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function c(e){return a(e)}},43841,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i={DecodeError:function(){return b},MiddlewareNotFoundError:function(){return v},MissingStaticPage:function(){return S},NormalizeError:function(){return y},PageNotFoundError:function(){return _},SP:function(){return g},ST:function(){return m},WEB_VITALS:function(){return n},execOnce:function(){return o},getDisplayName:function(){return h},getLocationOrigin:function(){return c},getURL:function(){return u},isAbsoluteUrl:function(){return l},isResSent:function(){return d},loadGetInitialProps:function(){return f},normalizeRepeatedSlashes:function(){return p},stringifyError:function(){return w}};for(var s in i)Object.defineProperty(r,s,{enumerable:!0,get:i[s]});let n=["CLS","FCP","FID","INP","LCP","TTFB"];function o(e){let t,r=!1;return(...i)=>(r||(r=!0,t=e(...i)),t)}let a=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,l=e=>a.test(e);function c(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function u(){let{href:e}=window.location,t=c();return e.substring(t.length)}function h(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function d(e){return e.finished||e.headersSent}function p(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function f(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await f(t.Component,t.ctx)}:{};let i=await e.getInitialProps(t);if(r&&d(r))return i;if(!i)throw Object.defineProperty(Error(`"${h(e)}.getInitialProps()" should resolve to an object. But found "${i}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return i}let g="undefined"!=typeof performance,m=g&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class b extends Error{}class y extends Error{}class _ extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class S extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class v extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function w(e){return JSON.stringify({message:e.message,stack:e.stack})}},77228,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isLocalURL",{enumerable:!0,get:function(){return n}});let i=e.r(43841),s=e.r(43939);function n(e){if(!(0,i.isAbsoluteUrl)(e))return!0;try{let t=(0,i.getLocationOrigin)(),r=new URL(e,t);return r.origin===t&&(0,s.hasBasePath)(r.pathname)}catch(e){return!1}}},17697,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"errorOnce",{enumerable:!0,get:function(){return i}});let i=e=>{}},57483,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i={default:function(){return b},useLinkStatus:function(){return _}};for(var s in i)Object.defineProperty(r,s,{enumerable:!0,get:i[s]});let n=e.r(26543),o=e.r(54011),a=n._(e.r(19243)),l=e.r(15495),c=e.r(13708),u=e.r(53113),h=e.r(43841),d=e.r(56959);e.r(42608);let p=e.r(45804),f=e.r(77228),g=e.r(14267);function m(e){return"string"==typeof e?e:(0,l.formatUrl)(e)}function b(t){var r;let i,s,n,[l,b]=(0,a.useOptimistic)(p.IDLE_LINK_STATUS),_=(0,a.useRef)(null),{href:S,as:v,children:w,prefetch:x=null,passHref:E,replace:T,shallow:I,scroll:A,onClick:C,onMouseEnter:R,onTouchStart:M,legacyBehavior:k=!1,onNavigate:P,ref:O,unstable_dynamicOnHover:B,...j}=t;i=w,k&&("string"==typeof i||"number"==typeof i)&&(i=(0,o.jsx)("a",{children:i}));let L=a.default.useContext(c.AppRouterContext),N=!1!==x,D=!1!==x?null===(r=x)||"auto"===r?g.FetchStrategy.PPR:g.FetchStrategy.Full:g.FetchStrategy.PPR,{href:F,as:$}=a.default.useMemo(()=>{let e=m(S);return{href:e,as:v?m(v):e}},[S,v]);if(k){if(i?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});s=a.default.Children.only(i)}let U=k?s&&"object"==typeof s&&s.ref:O,z=a.default.useCallback(e=>(null!==L&&(_.current=(0,p.mountLinkInstance)(e,F,L,D,N,b)),()=>{_.current&&((0,p.unmountLinkForCurrentNavigation)(_.current),_.current=null),(0,p.unmountPrefetchableInstance)(e)}),[N,F,L,D,b]),H={ref:(0,u.useMergedRef)(z,U),onClick(t){k||"function"!=typeof C||C(t),k&&s.props&&"function"==typeof s.props.onClick&&s.props.onClick(t),!L||t.defaultPrevented||function(t,r,i,s,n,o,l){if("undefined"!=typeof window){let c,{nodeName:u}=t.currentTarget;if("A"===u.toUpperCase()&&((c=t.currentTarget.getAttribute("target"))&&"_self"!==c||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,f.isLocalURL)(r)){n&&(t.preventDefault(),location.replace(r));return}if(t.preventDefault(),l){let e=!1;if(l({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:h}=e.r(8488);a.default.startTransition(()=>{h(i||r,n?"replace":"push",o??!0,s.current)})}}(t,F,$,_,T,A,P)},onMouseEnter(e){k||"function"!=typeof R||R(e),k&&s.props&&"function"==typeof s.props.onMouseEnter&&s.props.onMouseEnter(e),L&&N&&(0,p.onNavigationIntent)(e.currentTarget,!0===B)},onTouchStart:function(e){k||"function"!=typeof M||M(e),k&&s.props&&"function"==typeof s.props.onTouchStart&&s.props.onTouchStart(e),L&&N&&(0,p.onNavigationIntent)(e.currentTarget,!0===B)}};return(0,h.isAbsoluteUrl)($)?H.href=$:k&&!E&&("a"!==s.type||"href"in s.props)||(H.href=(0,d.addBasePath)($)),n=k?a.default.cloneElement(s,H):(0,o.jsx)("a",{...j,...H,children:i}),(0,o.jsx)(y.Provider,{value:l,children:n})}e.r(17697);let y=(0,a.createContext)(p.IDLE_LINK_STATUS),_=()=>(0,a.useContext)(y);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},28374,e=>{"use strict";var t=e.i(19243),r=e.i(41619),i=class{#e;constructor(e){this.#e=e}get threads(){return this.#e.threads().getState()}get tools(){return this.#e.tools().getState()}get threadListItem(){return this.#e.threadListItem().getState()}get thread(){return this.#e.thread().getState()}get composer(){return this.#e.composer().getState()}get message(){return this.#e.message().getState()}get part(){return this.#e.part().getState()}get attachment(){return this.#e.attachment().getState()}},s=e=>{let s=(0,r.useAssistantApi)(),n=(0,t.useMemo)(()=>new i(s),[s]),o=(0,t.useSyncExternalStore)(s.subscribe,()=>e(n),()=>e(n));if((0,t.useDebugValue)(o),o instanceof i)throw Error("You tried to return the entire AssistantState. This is not supported due to technical limitations.");return o};e.s(["useAssistantState",()=>s])},47463,e=>{"use strict";var t=e.i(19243),r=e.i(4635),i=e.i(64150),s=e.i(54011),n=(e,n,o=[])=>{let a=(0,t.forwardRef)((e,t)=>{let a={},l={};Object.keys(e).forEach(t=>{o.includes(t)?a[t]=e[t]:l[t]=e[t]});let c=n(a)??void 0;return(0,s.jsx)(r.Primitive.button,{type:"button",...l,ref:t,disabled:l.disabled||!c,onClick:(0,i.composeEventHandlers)(l.onClick,c)})});return a.displayName=e,a};e.s(["createActionButton",()=>n])},65342,e=>{"use strict";let t=(0,e.i(85739).default)("brain",[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]]);e.s(["default",()=>t])},98962,e=>{"use strict";var t=e.i(50500);e.s(["PlusIcon",()=>t.default])},65875,e=>{"use strict";var t=e.i(54011),r=e.i(19243),i=e.i(64150),s=e.i(31436),n=e.i(14381),o=e.i(17874),a=e.i(77682);let l=["top","right","bottom","left"],c=Math.min,u=Math.max,h=Math.round,d=Math.floor,p=e=>({x:e,y:e}),f={left:"right",right:"left",bottom:"top",top:"bottom"},g={start:"end",end:"start"};function m(e,t){return"function"==typeof e?e(t):e}function b(e){return e.split("-")[0]}function y(e){return e.split("-")[1]}function _(e){return"x"===e?"y":"x"}function S(e){return"y"===e?"height":"width"}let v=new Set(["top","bottom"]);function w(e){return v.has(b(e))?"y":"x"}function x(e){return e.replace(/start|end/g,e=>g[e])}let E=["left","right"],T=["right","left"],I=["top","bottom"],A=["bottom","top"];function C(e){return e.replace(/left|right|bottom|top/g,e=>f[e])}function R(e){return"number"!=typeof e?{top:0,right:0,bottom:0,left:0,...e}:{top:e,right:e,bottom:e,left:e}}function M(e){let{x:t,y:r,width:i,height:s}=e;return{width:i,height:s,top:r,left:t,right:t+i,bottom:r+s,x:t,y:r}}function k(e,t,r){let i,{reference:s,floating:n}=e,o=w(t),a=_(w(t)),l=S(a),c=b(t),u="y"===o,h=s.x+s.width/2-n.width/2,d=s.y+s.height/2-n.height/2,p=s[l]/2-n[l]/2;switch(c){case"top":i={x:h,y:s.y-n.height};break;case"bottom":i={x:h,y:s.y+s.height};break;case"right":i={x:s.x+s.width,y:d};break;case"left":i={x:s.x-n.width,y:d};break;default:i={x:s.x,y:s.y}}switch(y(t)){case"start":i[a]-=p*(r&&u?-1:1);break;case"end":i[a]+=p*(r&&u?-1:1)}return i}let P=async(e,t,r)=>{let{placement:i="bottom",strategy:s="absolute",middleware:n=[],platform:o}=r,a=n.filter(Boolean),l=await (null==o.isRTL?void 0:o.isRTL(t)),c=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:u,y:h}=k(c,i,l),d=i,p={},f=0;for(let r=0;r<a.length;r++){let{name:n,fn:g}=a[r],{x:m,y:b,data:y,reset:_}=await g({x:u,y:h,initialPlacement:i,placement:d,strategy:s,middlewareData:p,rects:c,platform:o,elements:{reference:e,floating:t}});u=null!=m?m:u,h=null!=b?b:h,p={...p,[n]:{...p[n],...y}},_&&f<=50&&(f++,"object"==typeof _&&(_.placement&&(d=_.placement),_.rects&&(c=!0===_.rects?await o.getElementRects({reference:e,floating:t,strategy:s}):_.rects),{x:u,y:h}=k(c,d,l)),r=-1)}return{x:u,y:h,placement:d,strategy:s,middlewareData:p}};async function O(e,t){var r;void 0===t&&(t={});let{x:i,y:s,platform:n,rects:o,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:d=!1,padding:p=0}=m(t,e),f=R(p),g=a[d?"floating"===h?"reference":"floating":h],b=M(await n.getClippingRect({element:null==(r=await (null==n.isElement?void 0:n.isElement(g)))||r?g:g.contextElement||await (null==n.getDocumentElement?void 0:n.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),y="floating"===h?{x:i,y:s,width:o.floating.width,height:o.floating.height}:o.reference,_=await (null==n.getOffsetParent?void 0:n.getOffsetParent(a.floating)),S=await (null==n.isElement?void 0:n.isElement(_))&&await (null==n.getScale?void 0:n.getScale(_))||{x:1,y:1},v=M(n.convertOffsetParentRelativeRectToViewportRelativeRect?await n.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:_,strategy:l}):y);return{top:(b.top-v.top+f.top)/S.y,bottom:(v.bottom-b.bottom+f.bottom)/S.y,left:(b.left-v.left+f.left)/S.x,right:(v.right-b.right+f.right)/S.x}}function B(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function j(e){return l.some(t=>e[t]>=0)}let L=new Set(["left","top"]);async function N(e,t){let{placement:r,platform:i,elements:s}=e,n=await (null==i.isRTL?void 0:i.isRTL(s.floating)),o=b(r),a=y(r),l="y"===w(r),c=L.has(o)?-1:1,u=n&&l?-1:1,h=m(t,e),{mainAxis:d,crossAxis:p,alignmentAxis:f}="number"==typeof h?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&"number"==typeof f&&(p="end"===a?-1*f:f),l?{x:p*u,y:d*c}:{x:d*c,y:p*u}}function D(){return"undefined"!=typeof window}function F(e){return z(e)?(e.nodeName||"").toLowerCase():"#document"}function $(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function U(e){var t;return null==(t=(z(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function z(e){return!!D()&&(e instanceof Node||e instanceof $(e).Node)}function H(e){return!!D()&&(e instanceof Element||e instanceof $(e).Element)}function V(e){return!!D()&&(e instanceof HTMLElement||e instanceof $(e).HTMLElement)}function J(e){return!!D()&&"undefined"!=typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof $(e).ShadowRoot)}let q=new Set(["inline","contents"]);function Y(e){let{overflow:t,overflowX:r,overflowY:i,display:s}=es(e);return/auto|scroll|overlay|hidden|clip/.test(t+i+r)&&!q.has(s)}let K=new Set(["table","td","th"]),W=[":popover-open",":modal"];function X(e){return W.some(t=>{try{return e.matches(t)}catch(e){return!1}})}let G=["transform","translate","scale","rotate","perspective"],Q=["transform","translate","scale","rotate","perspective","filter"],Z=["paint","layout","strict","content"];function ee(e){let t=et(),r=H(e)?es(e):e;return G.some(e=>!!r[e]&&"none"!==r[e])||!!r.containerType&&"normal"!==r.containerType||!t&&!!r.backdropFilter&&"none"!==r.backdropFilter||!t&&!!r.filter&&"none"!==r.filter||Q.some(e=>(r.willChange||"").includes(e))||Z.some(e=>(r.contain||"").includes(e))}function et(){return"undefined"!=typeof CSS&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}let er=new Set(["html","body","#document"]);function ei(e){return er.has(F(e))}function es(e){return $(e).getComputedStyle(e)}function en(e){return H(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function eo(e){if("html"===F(e))return e;let t=e.assignedSlot||e.parentNode||J(e)&&e.host||U(e);return J(t)?t.host:t}function ea(e,t,r){var i;void 0===t&&(t=[]),void 0===r&&(r=!0);let s=function e(t){let r=eo(t);return ei(r)?t.ownerDocument?t.ownerDocument.body:t.body:V(r)&&Y(r)?r:e(r)}(e),n=s===(null==(i=e.ownerDocument)?void 0:i.body),o=$(s);if(n){let e=el(o);return t.concat(o,o.visualViewport||[],Y(s)?s:[],e&&r?ea(e):[])}return t.concat(s,ea(s,[],r))}function el(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function ec(e){let t=es(e),r=parseFloat(t.width)||0,i=parseFloat(t.height)||0,s=V(e),n=s?e.offsetWidth:r,o=s?e.offsetHeight:i,a=h(r)!==n||h(i)!==o;return a&&(r=n,i=o),{width:r,height:i,$:a}}function eu(e){return H(e)?e:e.contextElement}function eh(e){let t=eu(e);if(!V(t))return p(1);let r=t.getBoundingClientRect(),{width:i,height:s,$:n}=ec(t),o=(n?h(r.width):r.width)/i,a=(n?h(r.height):r.height)/s;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}let ed=p(0);function ep(e){let t=$(e);return et()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:ed}function ef(e,t,r,i){var s;void 0===t&&(t=!1),void 0===r&&(r=!1);let n=e.getBoundingClientRect(),o=eu(e),a=p(1);t&&(i?H(i)&&(a=eh(i)):a=eh(e));let l=(void 0===(s=r)&&(s=!1),i&&(!s||i===$(o))&&s)?ep(o):p(0),c=(n.left+l.x)/a.x,u=(n.top+l.y)/a.y,h=n.width/a.x,d=n.height/a.y;if(o){let e=$(o),t=i&&H(i)?$(i):i,r=e,s=el(r);for(;s&&i&&t!==r;){let e=eh(s),t=s.getBoundingClientRect(),i=es(s),n=t.left+(s.clientLeft+parseFloat(i.paddingLeft))*e.x,o=t.top+(s.clientTop+parseFloat(i.paddingTop))*e.y;c*=e.x,u*=e.y,h*=e.x,d*=e.y,c+=n,u+=o,s=el(r=$(s))}}return M({width:h,height:d,x:c,y:u})}function eg(e,t){let r=en(e).scrollLeft;return t?t.left+r:ef(U(e)).left+r}function em(e,t,r){void 0===r&&(r=!1);let i=e.getBoundingClientRect();return{x:i.left+t.scrollLeft-(r?0:eg(e,i)),y:i.top+t.scrollTop}}let eb=new Set(["absolute","fixed"]);function ey(e,t,r){var i;let s;if("viewport"===t)s=function(e,t){let r=$(e),i=U(e),s=r.visualViewport,n=i.clientWidth,o=i.clientHeight,a=0,l=0;if(s){n=s.width,o=s.height;let e=et();(!e||e&&"fixed"===t)&&(a=s.offsetLeft,l=s.offsetTop)}return{width:n,height:o,x:a,y:l}}(e,r);else if("document"===t){let t,r,n,o,a,l,c;i=U(e),t=U(i),r=en(i),n=i.ownerDocument.body,o=u(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),a=u(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight),l=-r.scrollLeft+eg(i),c=-r.scrollTop,"rtl"===es(n).direction&&(l+=u(t.clientWidth,n.clientWidth)-o),s={width:o,height:a,x:l,y:c}}else if(H(t)){let e,i,n,o,a,l;i=(e=ef(t,!0,"fixed"===r)).top+t.clientTop,n=e.left+t.clientLeft,o=V(t)?eh(t):p(1),a=t.clientWidth*o.x,l=t.clientHeight*o.y,s={width:a,height:l,x:n*o.x,y:i*o.y}}else{let r=ep(e);s={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return M(s)}function e_(e){return"static"===es(e).position}function eS(e,t){if(!V(e)||"fixed"===es(e).position)return null;if(t)return t(e);let r=e.offsetParent;return U(e)===r&&(r=r.ownerDocument.body),r}function ev(e,t){var r;let i=$(e);if(X(e))return i;if(!V(e)){let t=eo(e);for(;t&&!ei(t);){if(H(t)&&!e_(t))return t;t=eo(t)}return i}let s=eS(e,t);for(;s&&(r=s,K.has(F(r)))&&e_(s);)s=eS(s,t);return s&&ei(s)&&e_(s)&&!ee(s)?i:s||function(e){let t=eo(e);for(;V(t)&&!ei(t);){if(ee(t))return t;if(X(t))break;t=eo(t)}return null}(e)||i}let ew=async function(e){let t=this.getOffsetParent||ev,r=this.getDimensions,i=await r(e.floating);return{reference:function(e,t,r){let i=V(t),s=U(t),n="fixed"===r,o=ef(e,!0,n,t),a={scrollLeft:0,scrollTop:0},l=p(0);if(i||!i&&!n)if(("body"!==F(t)||Y(s))&&(a=en(t)),i){let e=ef(t,!0,n,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else s&&(l.x=eg(s));n&&!i&&s&&(l.x=eg(s));let c=!s||i||n?p(0):em(s,a);return{x:o.left+a.scrollLeft-l.x-c.x,y:o.top+a.scrollTop-l.y-c.y,width:o.width,height:o.height}}(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}},ex={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:r,offsetParent:i,strategy:s}=e,n="fixed"===s,o=U(i),a=!!t&&X(t.floating);if(i===o||a&&n)return r;let l={scrollLeft:0,scrollTop:0},c=p(1),u=p(0),h=V(i);if((h||!h&&!n)&&(("body"!==F(i)||Y(o))&&(l=en(i)),V(i))){let e=ef(i);c=eh(i),u.x=e.x+i.clientLeft,u.y=e.y+i.clientTop}let d=!o||h||n?p(0):em(o,l,!0);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+u.x+d.x,y:r.y*c.y-l.scrollTop*c.y+u.y+d.y}},getDocumentElement:U,getClippingRect:function(e){let{element:t,boundary:r,rootBoundary:i,strategy:s}=e,n=[..."clippingAncestors"===r?X(t)?[]:function(e,t){let r=t.get(e);if(r)return r;let i=ea(e,[],!1).filter(e=>H(e)&&"body"!==F(e)),s=null,n="fixed"===es(e).position,o=n?eo(e):e;for(;H(o)&&!ei(o);){let t=es(o),r=ee(o);r||"fixed"!==t.position||(s=null),(n?!r&&!s:!r&&"static"===t.position&&!!s&&eb.has(s.position)||Y(o)&&!r&&function e(t,r){let i=eo(t);return!(i===r||!H(i)||ei(i))&&("fixed"===es(i).position||e(i,r))}(e,o))?i=i.filter(e=>e!==o):s=t,o=eo(o)}return t.set(e,i),i}(t,this._c):[].concat(r),i],o=n[0],a=n.reduce((e,r)=>{let i=ey(t,r,s);return e.top=u(i.top,e.top),e.right=c(i.right,e.right),e.bottom=c(i.bottom,e.bottom),e.left=u(i.left,e.left),e},ey(t,o,s));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},getOffsetParent:ev,getElementRects:ew,getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){let{width:t,height:r}=ec(e);return{width:t,height:r}},getScale:eh,isElement:H,isRTL:function(e){return"rtl"===es(e).direction}};function eE(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}let eT=e=>({name:"arrow",options:e,async fn(t){let{x:r,y:i,placement:s,rects:n,platform:o,elements:a,middlewareData:l}=t,{element:h,padding:d=0}=m(e,t)||{};if(null==h)return{};let p=R(d),f={x:r,y:i},g=_(w(s)),b=S(g),v=await o.getDimensions(h),x="y"===g,E=x?"clientHeight":"clientWidth",T=n.reference[b]+n.reference[g]-f[g]-n.floating[b],I=f[g]-n.reference[g],A=await (null==o.getOffsetParent?void 0:o.getOffsetParent(h)),C=A?A[E]:0;C&&await (null==o.isElement?void 0:o.isElement(A))||(C=a.floating[E]||n.floating[b]);let M=C/2-v[b]/2-1,k=c(p[x?"top":"left"],M),P=c(p[x?"bottom":"right"],M),O=C-v[b]-P,B=C/2-v[b]/2+(T/2-I/2),j=u(k,c(B,O)),L=!l.arrow&&null!=y(s)&&B!==j&&n.reference[b]/2-(B<k?k:P)-v[b]/2<0,N=L?B<k?B-k:B-O:0;return{[g]:f[g]+N,data:{[g]:j,centerOffset:B-j-N,...L&&{alignmentOffset:N}},reset:L}}});var eI=e.i(1365),eA="undefined"!=typeof document?r.useLayoutEffect:function(){};function eC(e,t){let r,i,s;if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if((r=e.length)!==t.length)return!1;for(i=r;0!=i--;)if(!eC(e[i],t[i]))return!1;return!0}if((r=(s=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(i=r;0!=i--;)if(!({}).hasOwnProperty.call(t,s[i]))return!1;for(i=r;0!=i--;){let r=s[i];if(("_owner"!==r||!e.$$typeof)&&!eC(e[r],t[r]))return!1}return!0}return e!=e&&t!=t}function eR(e){return"undefined"==typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function eM(e,t){let r=eR(e);return Math.round(t*r)/r}function ek(e){let t=r.useRef(e);return eA(()=>{t.current=e}),t}var eP=e.i(74882),eO=r.forwardRef((e,r)=>{let{children:i,width:s=10,height:n=5,...o}=e;return(0,t.jsx)(eP.Primitive.svg,{...o,ref:r,width:s,height:n,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?i:(0,t.jsx)("polygon",{points:"0,0 30,0 15,10"})})});eO.displayName="Arrow";var eB=e.i(15755),ej=e.i(96458),eL=e.i(1770),eN="Popper",[eD,eF]=(0,n.createContextScope)(eN),[e$,eU]=eD(eN),ez=e=>{let{__scopePopper:i,children:s}=e,[n,o]=r.useState(null);return(0,t.jsx)(e$,{scope:i,anchor:n,onAnchorChange:o,children:s})};ez.displayName=eN;var eH="PopperAnchor",eV=r.forwardRef((e,i)=>{let{__scopePopper:n,virtualRef:o,...a}=e,l=eU(eH,n),c=r.useRef(null),u=(0,s.useComposedRefs)(i,c),h=r.useRef(null);return r.useEffect(()=>{let e=h.current;h.current=o?.current||c.current,e!==h.current&&l.onAnchorChange(h.current)}),o?null:(0,t.jsx)(eP.Primitive.div,{...a,ref:u})});eV.displayName=eH;var eJ="PopperContent",[eq,eY]=eD(eJ),eK=r.forwardRef((e,i)=>{var n,o,a,l,h,p,f,g,v,R,M,k,D;let{__scopePopper:F,side:$="bottom",sideOffset:z=0,align:H="center",alignOffset:V=0,arrowPadding:J=0,avoidCollisions:q=!0,collisionBoundary:Y=[],collisionPadding:K=0,sticky:W="partial",hideWhenDetached:X=!1,updatePositionStrategy:G="optimized",onPlaced:Q,...Z}=e,ee=eU(eJ,F),[et,er]=r.useState(null),ei=(0,s.useComposedRefs)(i,e=>er(e)),[es,en]=r.useState(null),eo=(0,eL.useSize)(es),el=eo?.width??0,ec=eo?.height??0,eh="number"==typeof K?K:{top:0,right:0,bottom:0,left:0,...K},ed=Array.isArray(Y)?Y:[Y],ep=ed.length>0,eg={padding:eh,boundary:ed.filter(eQ),altBoundary:ep},{refs:em,floatingStyles:eb,placement:ey,isPositioned:e_,middlewareData:eS}=function(e){void 0===e&&(e={});let{placement:t="bottom",strategy:i="absolute",middleware:s=[],platform:n,elements:{reference:o,floating:a}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[h,d]=r.useState({x:0,y:0,strategy:i,placement:t,middlewareData:{},isPositioned:!1}),[p,f]=r.useState(s);eC(p,s)||f(s);let[g,m]=r.useState(null),[b,y]=r.useState(null),_=r.useCallback(e=>{e!==x.current&&(x.current=e,m(e))},[]),S=r.useCallback(e=>{e!==E.current&&(E.current=e,y(e))},[]),v=o||g,w=a||b,x=r.useRef(null),E=r.useRef(null),T=r.useRef(h),I=null!=c,A=ek(c),C=ek(n),R=ek(u),M=r.useCallback(()=>{var e,r;let s,n,o;if(!x.current||!E.current)return;let a={placement:t,strategy:i,middleware:p};C.current&&(a.platform=C.current),(e=x.current,r=E.current,s=new Map,o={...(n={platform:ex,...a}).platform,_c:s},P(e,r,{...n,platform:o})).then(e=>{let t={...e,isPositioned:!1!==R.current};k.current&&!eC(T.current,t)&&(T.current=t,eI.flushSync(()=>{d(t)}))})},[p,t,i,C,R]);eA(()=>{!1===u&&T.current.isPositioned&&(T.current.isPositioned=!1,d(e=>({...e,isPositioned:!1})))},[u]);let k=r.useRef(!1);eA(()=>(k.current=!0,()=>{k.current=!1}),[]),eA(()=>{if(v&&(x.current=v),w&&(E.current=w),v&&w){if(A.current)return A.current(v,w,M);M()}},[v,w,M,A,I]);let O=r.useMemo(()=>({reference:x,floating:E,setReference:_,setFloating:S}),[_,S]),B=r.useMemo(()=>({reference:v,floating:w}),[v,w]),j=r.useMemo(()=>{let e={position:i,left:0,top:0};if(!B.floating)return e;let t=eM(B.floating,h.x),r=eM(B.floating,h.y);return l?{...e,transform:"translate("+t+"px, "+r+"px)",...eR(B.floating)>=1.5&&{willChange:"transform"}}:{position:i,left:t,top:r}},[i,l,B.floating,h.x,h.y]);return r.useMemo(()=>({...h,update:M,refs:O,elements:B,floatingStyles:j}),[h,M,O,B,j])}({strategy:"fixed",placement:$+("center"!==H?"-"+H:""),whileElementsMounted:(...e)=>(function(e,t,r,i){let s;void 0===i&&(i={});let{ancestorScroll:n=!0,ancestorResize:o=!0,elementResize:a="function"==typeof ResizeObserver,layoutShift:l="function"==typeof IntersectionObserver,animationFrame:h=!1}=i,p=eu(e),f=n||o?[...p?ea(p):[],...ea(t)]:[];f.forEach(e=>{n&&e.addEventListener("scroll",r,{passive:!0}),o&&e.addEventListener("resize",r)});let g=p&&l?function(e,t){let r,i=null,s=U(e);function n(){var e;clearTimeout(r),null==(e=i)||e.disconnect(),i=null}return!function o(a,l){void 0===a&&(a=!1),void 0===l&&(l=1),n();let h=e.getBoundingClientRect(),{left:p,top:f,width:g,height:m}=h;if(a||t(),!g||!m)return;let b={rootMargin:-d(f)+"px "+-d(s.clientWidth-(p+g))+"px "+-d(s.clientHeight-(f+m))+"px "+-d(p)+"px",threshold:u(0,c(1,l))||1},y=!0;function _(t){let i=t[0].intersectionRatio;if(i!==l){if(!y)return o();i?o(!1,i):r=setTimeout(()=>{o(!1,1e-7)},1e3)}1!==i||eE(h,e.getBoundingClientRect())||o(),y=!1}try{i=new IntersectionObserver(_,{...b,root:s.ownerDocument})}catch(e){i=new IntersectionObserver(_,b)}i.observe(e)}(!0),n}(p,r):null,m=-1,b=null;a&&(b=new ResizeObserver(e=>{let[i]=e;i&&i.target===p&&b&&(b.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var e;null==(e=b)||e.observe(t)})),r()}),p&&!h&&b.observe(p),b.observe(t));let y=h?ef(e):null;return h&&function t(){let i=ef(e);y&&!eE(y,i)&&r(),y=i,s=requestAnimationFrame(t)}(),r(),()=>{var e;f.forEach(e=>{n&&e.removeEventListener("scroll",r),o&&e.removeEventListener("resize",r)}),null==g||g(),null==(e=b)||e.disconnect(),b=null,h&&cancelAnimationFrame(s)}})(...e,{animationFrame:"always"===G}),elements:{reference:ee.anchor},middleware:[{...{name:"offset",options:o=n={mainAxis:z+ec,alignmentAxis:V},async fn(e){var t,r;let{x:i,y:s,placement:n,middlewareData:a}=e,l=await N(e,o);return n===(null==(t=a.offset)?void 0:t.placement)&&null!=(r=a.arrow)&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:n}}}},options:[n,void 0]},q&&{...{name:"shift",options:h=l={mainAxis:!0,crossAxis:!1,limiter:"partial"===W?{...(a=void 0,{options:a={},fn(e){let{x:t,y:r,placement:i,rects:s,middlewareData:n}=e,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=m(a,e),u={x:t,y:r},h=w(i),d=_(h),p=u[d],f=u[h],g=m(o,e),y="number"==typeof g?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){let e="y"===d?"height":"width",t=s.reference[d]-s.floating[e]+y.mainAxis,r=s.reference[d]+s.reference[e]-y.mainAxis;p<t?p=t:p>r&&(p=r)}if(c){var S,v;let e="y"===d?"width":"height",t=L.has(b(i)),r=s.reference[h]-s.floating[e]+(t&&(null==(S=n.offset)?void 0:S[h])||0)+(t?0:y.crossAxis),o=s.reference[h]+s.reference[e]+(t?0:(null==(v=n.offset)?void 0:v[h])||0)-(t?y.crossAxis:0);f<r?f=r:f>o&&(f=o)}return{[d]:p,[h]:f}}}),options:[void 0,void 0]}:void 0,...eg},async fn(e){let{x:t,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:n=!1,limiter:o={fn:e=>{let{x:t,y:r}=e;return{x:t,y:r}}},...a}=m(h,e),l={x:t,y:r},d=await O(e,a),p=w(b(i)),f=_(p),g=l[f],y=l[p];if(s){let e="y"===f?"top":"left",t="y"===f?"bottom":"right",r=g+d[e],i=g-d[t];g=u(r,c(g,i))}if(n){let e="y"===p?"top":"left",t="y"===p?"bottom":"right",r=y+d[e],i=y-d[t];y=u(r,c(y,i))}let S=o.fn({...e,[f]:g,[p]:y});return{...S,data:{x:S.x-t,y:S.y-r,enabled:{[f]:s,[p]:n}}}}},options:[l,void 0]},q&&{...{name:"flip",options:f=p={...eg},async fn(e){var t,r,i,s,n,o,a,l;let c,u,h,{placement:d,middlewareData:p,rects:g,initialPlacement:v,platform:R,elements:M}=e,{mainAxis:k=!0,crossAxis:P=!0,fallbackPlacements:B,fallbackStrategy:j="bestFit",fallbackAxisSideDirection:L="none",flipAlignment:N=!0,...D}=m(f,e);if(null!=(t=p.arrow)&&t.alignmentOffset)return{};let F=b(d),$=w(v),U=b(v)===v,z=await (null==R.isRTL?void 0:R.isRTL(M.floating)),H=B||(U||!N?[C(v)]:(c=C(v),[x(v),c,x(c)])),V="none"!==L;!B&&V&&H.push(...(u=y(v),h=function(e,t,r){switch(e){case"top":case"bottom":if(r)return t?T:E;return t?E:T;case"left":case"right":return t?I:A;default:return[]}}(b(v),"start"===L,z),u&&(h=h.map(e=>e+"-"+u),N&&(h=h.concat(h.map(x)))),h));let J=[v,...H],q=await O(e,D),Y=[],K=(null==(r=p.flip)?void 0:r.overflows)||[];if(k&&Y.push(q[F]),P){let e,t,r,i,s=(o=d,a=g,void 0===(l=z)&&(l=!1),e=y(o),r=S(t=_(w(o))),i="x"===t?e===(l?"end":"start")?"right":"left":"start"===e?"bottom":"top",a.reference[r]>a.floating[r]&&(i=C(i)),[i,C(i)]);Y.push(q[s[0]],q[s[1]])}if(K=[...K,{placement:d,overflows:Y}],!Y.every(e=>e<=0)){let e=((null==(i=p.flip)?void 0:i.index)||0)+1,t=J[e];if(t&&("alignment"!==P||$===w(t)||K.every(e=>w(e.placement)!==$||e.overflows[0]>0)))return{data:{index:e,overflows:K},reset:{placement:t}};let r=null==(s=K.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:s.placement;if(!r)switch(j){case"bestFit":{let e=null==(n=K.filter(e=>{if(V){let t=w(e.placement);return t===$||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:n[0];e&&(r=e);break}case"initialPlacement":r=v}if(d!==r)return{reset:{placement:r}}}return{}}},options:[p,void 0]},{...{name:"size",options:v=g={...eg,apply:({elements:e,rects:t,availableWidth:r,availableHeight:i})=>{let{width:s,height:n}=t.reference,o=e.floating.style;o.setProperty("--radix-popper-available-width",`${r}px`),o.setProperty("--radix-popper-available-height",`${i}px`),o.setProperty("--radix-popper-anchor-width",`${s}px`),o.setProperty("--radix-popper-anchor-height",`${n}px`)}},async fn(e){var t,r;let i,s,{placement:n,rects:o,platform:a,elements:l}=e,{apply:h=()=>{},...d}=m(v,e),p=await O(e,d),f=b(n),g=y(n),_="y"===w(n),{width:S,height:x}=o.floating;"top"===f||"bottom"===f?(i=f,s=g===(await (null==a.isRTL?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(s=f,i="end"===g?"top":"bottom");let E=x-p.top-p.bottom,T=S-p.left-p.right,I=c(x-p[i],E),A=c(S-p[s],T),C=!e.middlewareData.shift,R=I,M=A;if(null!=(t=e.middlewareData.shift)&&t.enabled.x&&(M=T),null!=(r=e.middlewareData.shift)&&r.enabled.y&&(R=E),C&&!g){let e=u(p.left,0),t=u(p.right,0),r=u(p.top,0),i=u(p.bottom,0);_?M=S-2*(0!==e||0!==t?e+t:u(p.left,p.right)):R=x-2*(0!==r||0!==i?r+i:u(p.top,p.bottom))}await h({...e,availableWidth:M,availableHeight:R});let k=await a.getDimensions(l.floating);return S!==k.width||x!==k.height?{reset:{rects:!0}}:{}}},options:[g,void 0]},es&&{...{name:"arrow",options:M=R={element:es,padding:J},fn(e){let{element:t,padding:r}="function"==typeof M?M(e):M;return t&&({}).hasOwnProperty.call(t,"current")?null!=t.current?eT({element:t.current,padding:r}).fn(e):{}:t?eT({element:t,padding:r}).fn(e):{}}},options:[R,void 0]},eZ({arrowWidth:el,arrowHeight:ec}),X&&{...{name:"hide",options:D=k={strategy:"referenceHidden",...eg},async fn(e){let{rects:t}=e,{strategy:r="referenceHidden",...i}=m(D,e);switch(r){case"referenceHidden":{let r=B(await O(e,{...i,elementContext:"reference"}),t.reference);return{data:{referenceHiddenOffsets:r,referenceHidden:j(r)}}}case"escaped":{let r=B(await O(e,{...i,altBoundary:!0}),t.floating);return{data:{escapedOffsets:r,escaped:j(r)}}}default:return{}}}},options:[k,void 0]}]}),[ev,ew]=e0(ey),eO=(0,eB.useCallbackRef)(Q);(0,ej.useLayoutEffect)(()=>{e_&&eO?.()},[e_,eO]);let eN=eS.arrow?.x,eD=eS.arrow?.y,eF=eS.arrow?.centerOffset!==0,[e$,ez]=r.useState();return(0,ej.useLayoutEffect)(()=>{et&&ez(window.getComputedStyle(et).zIndex)},[et]),(0,t.jsx)("div",{ref:em.setFloating,"data-radix-popper-content-wrapper":"",style:{...eb,transform:e_?eb.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:e$,"--radix-popper-transform-origin":[eS.transformOrigin?.x,eS.transformOrigin?.y].join(" "),...eS.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:(0,t.jsx)(eq,{scope:F,placedSide:ev,onArrowChange:en,arrowX:eN,arrowY:eD,shouldHideArrow:eF,children:(0,t.jsx)(eP.Primitive.div,{"data-side":ev,"data-align":ew,...Z,ref:ei,style:{...Z.style,animation:e_?void 0:"none"}})})})});eK.displayName=eJ;var eW="PopperArrow",eX={top:"bottom",right:"left",bottom:"top",left:"right"},eG=r.forwardRef(function(e,r){let{__scopePopper:i,...s}=e,n=eY(eW,i),o=eX[n.placedSide];return(0,t.jsx)("span",{ref:n.onArrowChange,style:{position:"absolute",left:n.arrowX,top:n.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[n.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[n.placedSide],visibility:n.shouldHideArrow?"hidden":void 0},children:(0,t.jsx)(eO,{...s,ref:r,style:{...s.style,display:"block"}})})});function eQ(e){return null!==e}eG.displayName=eW;var eZ=e=>({name:"transformOrigin",options:e,fn(t){let{placement:r,rects:i,middlewareData:s}=t,n=s.arrow?.centerOffset!==0,o=n?0:e.arrowWidth,a=n?0:e.arrowHeight,[l,c]=e0(r),u={start:"0%",center:"50%",end:"100%"}[c],h=(s.arrow?.x??0)+o/2,d=(s.arrow?.y??0)+a/2,p="",f="";return"bottom"===l?(p=n?u:`${h}px`,f=`${-a}px`):"top"===l?(p=n?u:`${h}px`,f=`${i.floating.height+a}px`):"right"===l?(p=`${-a}px`,f=n?u:`${d}px`):"left"===l&&(p=`${i.floating.width+a}px`,f=n?u:`${d}px`),{data:{x:p,y:f}}}});function e0(e){let[t,r="center"]=e.split("-");return[t,r]}var e1=e.i(54450),e5=e.i(18823),e4=e.i(98919),e3=e.i(11575),e6=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),e2=r.forwardRef((e,r)=>(0,t.jsx)(eP.Primitive.span,{...e,ref:r,style:{...e6,...e.style}}));e2.displayName="VisuallyHidden";var[e7,e9]=(0,n.createContextScope)("Tooltip",[eF]),e8=eF(),te="TooltipProvider",tt="tooltip.open",[tr,ti]=e7(te),ts=e=>{let{__scopeTooltip:i,delayDuration:s=700,skipDelayDuration:n=300,disableHoverableContent:o=!1,children:a}=e,l=r.useRef(!0),c=r.useRef(!1),u=r.useRef(0);return r.useEffect(()=>{let e=u.current;return()=>window.clearTimeout(e)},[]),(0,t.jsx)(tr,{scope:i,isOpenDelayedRef:l,delayDuration:s,onOpen:r.useCallback(()=>{window.clearTimeout(u.current),l.current=!1},[]),onClose:r.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>l.current=!0,n)},[n]),isPointerInTransitRef:c,onPointerInTransitChange:r.useCallback(e=>{c.current=e},[]),disableHoverableContent:o,children:a})};ts.displayName=te;var tn="Tooltip",[to,ta]=e7(tn),tl=e=>{let{__scopeTooltip:i,children:s,open:n,defaultOpen:o,onOpenChange:l,disableHoverableContent:c,delayDuration:u}=e,h=ti(tn,e.__scopeTooltip),d=e8(i),[p,f]=r.useState(null),g=(0,a.useId)(),m=r.useRef(0),b=c??h.disableHoverableContent,y=u??h.delayDuration,_=r.useRef(!1),[S,v]=(0,e3.useControllableState)({prop:n,defaultProp:o??!1,onChange:e=>{e?(h.onOpen(),document.dispatchEvent(new CustomEvent(tt))):h.onClose(),l?.(e)},caller:tn}),w=r.useMemo(()=>S?_.current?"delayed-open":"instant-open":"closed",[S]),x=r.useCallback(()=>{window.clearTimeout(m.current),m.current=0,_.current=!1,v(!0)},[v]),E=r.useCallback(()=>{window.clearTimeout(m.current),m.current=0,v(!1)},[v]),T=r.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{_.current=!0,v(!0),m.current=0},y)},[y,v]);return r.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),(0,t.jsx)(ez,{...d,children:(0,t.jsx)(to,{scope:i,contentId:g,open:S,stateAttribute:w,trigger:p,onTriggerChange:f,onTriggerEnter:r.useCallback(()=>{h.isOpenDelayedRef.current?T():x()},[h.isOpenDelayedRef,T,x]),onTriggerLeave:r.useCallback(()=>{b?E():(window.clearTimeout(m.current),m.current=0)},[E,b]),onOpen:x,onClose:E,disableHoverableContent:b,children:s})})};tl.displayName=tn;var tc="TooltipTrigger",tu=r.forwardRef((e,n)=>{let{__scopeTooltip:o,...a}=e,l=ta(tc,o),c=ti(tc,o),u=e8(o),h=r.useRef(null),d=(0,s.useComposedRefs)(n,h,l.onTriggerChange),p=r.useRef(!1),f=r.useRef(!1),g=r.useCallback(()=>p.current=!1,[]);return r.useEffect(()=>()=>document.removeEventListener("pointerup",g),[g]),(0,t.jsx)(eV,{asChild:!0,...u,children:(0,t.jsx)(eP.Primitive.button,{"aria-describedby":l.open?l.contentId:void 0,"data-state":l.stateAttribute,...a,ref:d,onPointerMove:(0,i.composeEventHandlers)(e.onPointerMove,e=>{"touch"!==e.pointerType&&(f.current||c.isPointerInTransitRef.current||(l.onTriggerEnter(),f.current=!0))}),onPointerLeave:(0,i.composeEventHandlers)(e.onPointerLeave,()=>{l.onTriggerLeave(),f.current=!1}),onPointerDown:(0,i.composeEventHandlers)(e.onPointerDown,()=>{l.open&&l.onClose(),p.current=!0,document.addEventListener("pointerup",g,{once:!0})}),onFocus:(0,i.composeEventHandlers)(e.onFocus,()=>{p.current||l.onOpen()}),onBlur:(0,i.composeEventHandlers)(e.onBlur,l.onClose),onClick:(0,i.composeEventHandlers)(e.onClick,l.onClose)})})});tu.displayName=tc;var th="TooltipPortal",[td,tp]=e7(th,{forceMount:void 0}),tf=e=>{let{__scopeTooltip:r,forceMount:i,children:s,container:n}=e,o=ta(th,r);return(0,t.jsx)(td,{scope:r,forceMount:i,children:(0,t.jsx)(e5.Presence,{present:i||o.open,children:(0,t.jsx)(e1.Portal,{asChild:!0,container:n,children:s})})})};tf.displayName=th;var tg="TooltipContent",tm=r.forwardRef((e,r)=>{let i=tp(tg,e.__scopeTooltip),{forceMount:s=i.forceMount,side:n="top",...o}=e,a=ta(tg,e.__scopeTooltip);return(0,t.jsx)(e5.Presence,{present:s||a.open,children:a.disableHoverableContent?(0,t.jsx)(tv,{side:n,...o,ref:r}):(0,t.jsx)(tb,{side:n,...o,ref:r})})}),tb=r.forwardRef((e,i)=>{let n=ta(tg,e.__scopeTooltip),o=ti(tg,e.__scopeTooltip),a=r.useRef(null),l=(0,s.useComposedRefs)(i,a),[c,u]=r.useState(null),{trigger:h,onClose:d}=n,p=a.current,{onPointerInTransitChange:f}=o,g=r.useCallback(()=>{u(null),f(!1)},[f]),m=r.useCallback((e,t)=>{let r,i=e.currentTarget,s={x:e.clientX,y:e.clientY},n=function(e,t){let r=Math.abs(t.top-e.y),i=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),n=Math.abs(t.left-e.x);switch(Math.min(r,i,s,n)){case n:return"left";case s:return"right";case r:return"top";case i:return"bottom";default:throw Error("unreachable")}}(s,i.getBoundingClientRect());u(((r=[...function(e,t,r=5){let i=[];switch(t){case"top":i.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":i.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":i.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":i.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r})}return i}(s,n),...function(e){let{top:t,right:r,bottom:i,left:s}=e;return[{x:s,y:t},{x:r,y:t},{x:r,y:i},{x:s,y:i}]}(t.getBoundingClientRect())].slice()).sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:1*!!(e.y>t.y)),function(e){if(e.length<=1)return e.slice();let t=[];for(let r=0;r<e.length;r++){let i=e[r];for(;t.length>=2;){let e=t[t.length-1],r=t[t.length-2];if((e.x-r.x)*(i.y-r.y)>=(e.y-r.y)*(i.x-r.x))t.pop();else break}t.push(i)}t.pop();let r=[];for(let t=e.length-1;t>=0;t--){let i=e[t];for(;r.length>=2;){let e=r[r.length-1],t=r[r.length-2];if((e.x-t.x)*(i.y-t.y)>=(e.y-t.y)*(i.x-t.x))r.pop();else break}r.push(i)}return(r.pop(),1===t.length&&1===r.length&&t[0].x===r[0].x&&t[0].y===r[0].y)?t:t.concat(r)}(r))),f(!0)},[f]);return r.useEffect(()=>()=>g(),[g]),r.useEffect(()=>{if(h&&p){let e=e=>m(e,p),t=e=>m(e,h);return h.addEventListener("pointerleave",e),p.addEventListener("pointerleave",t),()=>{h.removeEventListener("pointerleave",e),p.removeEventListener("pointerleave",t)}}},[h,p,m,g]),r.useEffect(()=>{if(c){let e=e=>{let t=e.target,r={x:e.clientX,y:e.clientY},i=h?.contains(t)||p?.contains(t),s=!function(e,t){let{x:r,y:i}=e,s=!1;for(let e=0,n=t.length-1;e<t.length;n=e++){let o=t[e],a=t[n],l=o.x,c=o.y,u=a.x,h=a.y;c>i!=h>i&&r<(u-l)*(i-c)/(h-c)+l&&(s=!s)}return s}(r,c);i?g():s&&(g(),d())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[h,p,c,d,g]),(0,t.jsx)(tv,{...e,ref:l})}),[ty,t_]=e7(tn,{isInside:!1}),tS=(0,e4.createSlottable)("TooltipContent"),tv=r.forwardRef((e,i)=>{let{__scopeTooltip:s,children:n,"aria-label":a,onEscapeKeyDown:l,onPointerDownOutside:c,...u}=e,h=ta(tg,s),d=e8(s),{onClose:p}=h;return r.useEffect(()=>(document.addEventListener(tt,p),()=>document.removeEventListener(tt,p)),[p]),r.useEffect(()=>{if(h.trigger){let e=e=>{let t=e.target;t?.contains(h.trigger)&&p()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[h.trigger,p]),(0,t.jsx)(o.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:e=>e.preventDefault(),onDismiss:p,children:(0,t.jsxs)(eK,{"data-state":h.stateAttribute,...d,...u,ref:i,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[(0,t.jsx)(tS,{children:n}),(0,t.jsx)(ty,{scope:s,isInside:!0,children:(0,t.jsx)(e2,{id:h.contentId,role:"tooltip",children:a||n})})]})})});tm.displayName=tg;var tw="TooltipArrow",tx=r.forwardRef((e,r)=>{let{__scopeTooltip:i,...s}=e,n=e8(i);return t_(tw,i).isInside?null:(0,t.jsx)(eG,{...n,...s,ref:r})});tx.displayName=tw;var tE=e.i(7071);function tT({delayDuration:e=0,...r}){return(0,t.jsx)(ts,{"data-slot":"tooltip-provider",delayDuration:e,...r})}function tI({...e}){return(0,t.jsx)(tT,{children:(0,t.jsx)(tl,{"data-slot":"tooltip",...e})})}function tA({...e}){return(0,t.jsx)(tu,{"data-slot":"tooltip-trigger",...e})}function tC({className:e,sideOffset:r=0,children:i,...s}){return(0,t.jsx)(tf,{children:(0,t.jsxs)(tm,{"data-slot":"tooltip-content",sideOffset:r,className:(0,tE.cn)("z-50 w-fit origin-(--radix-tooltip-content-transform-origin) animate-in rounded-md bg-foreground px-3 py-1.5 text-xs text-balance text-background fade-in-0 zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95",e),...s,children:[i,(0,t.jsx)(tx,{className:"z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px] bg-foreground fill-foreground"})]})})}e.s(["Tooltip",()=>tI,"TooltipContent",()=>tC,"TooltipProvider",()=>tT,"TooltipTrigger",()=>tA],65875)},55429,e=>{"use strict";var t=e.i(54011),r=e.i(8415),i=e.i(19243),s=e.i(25111),n=e.i(65875),o=e.i(7071);let a=(0,i.forwardRef)(({children:e,tooltip:i,side:a="bottom",className:l,...c},u)=>(0,t.jsxs)(n.Tooltip,{children:[(0,t.jsx)(n.TooltipTrigger,{asChild:!0,children:(0,t.jsxs)(s.Button,{variant:"ghost",size:"icon",...c,className:(0,o.cn)("aui-button-icon size-6 p-1",l),ref:u,children:[(0,t.jsx)(r.Slottable,{children:e}),(0,t.jsx)("span",{className:"aui-sr-only sr-only",children:i})]})}),(0,t.jsx)(n.TooltipContent,{side:a,children:i})]}));a.displayName="TooltipIconButton",e.s(["TooltipIconButton",0,a])}]);